{"ast":null,"code":"import _defineProperty from\"/home/julianallende/Desktop/proyecto_sapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/julianallende/Desktop/proyecto_sapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/julianallende/Desktop/proyecto_sapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/julianallende/Desktop/proyecto_sapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{Link,useHistory,useParams}from\"react-router-dom\";import axios from\"axios\";import\"./ResetPasswordPagina.scss\";import Navbar from'../components/Navbar/Navbar';import Footer from'../components/Footer/Footer';import'./ResetPasswordPagina.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResetPasswordPagina=function ResetPasswordPagina(props){var _jsxs2;var match=useParams();console.log(match.resetToken);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),confirmPassword=_useState4[0],setConfirmPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var resetPasswordHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{\"Content-Type\":\"application/json\"}};if(!(password!==confirmPassword)){_context.next=6;break;}setPassword(\"\");setConfirmPassword(\"\");return _context.abrupt(\"return\",setError(\"Passwords do not match\"));case 6:_context.prev=6;_context.next=9;return axios.put(\"/api/auth/resetpassword/\".concat(match.resetToken),{password:password},config);case 9:_yield$axios$put=_context.sent;data=_yield$axios$put.data;console.log(data);setSuccess(data.data);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](6);setError(_context.t0.data);case 18:case\"end\":return _context.stop();}}},_callee,null,[[6,15]]);}));return function resetPasswordHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"resetpassword-screen\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"form-wrapper-div\",children:/*#__PURE__*/_jsxs(\"form\",(_jsxs2={className:\"forgot-password-form\",onSubmit:resetPasswordHandler},_defineProperty(_jsxs2,\"className\",\"resetpassword-screen__form\"),_defineProperty(_jsxs2,\"children\",[/*#__PURE__*/_jsx(\"h3\",{className:\"resetpassword-screen__title\",children:\"Forgot Password\"}),error&&/*#__PURE__*/_jsxs(\"span\",{className:\"error-message\",children:[error,\" \"]}),success&&/*#__PURE__*/_jsxs(\"span\",{className:\"success-message\",children:[success,\" \",/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"password\",children:\"New Password:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"contact-form-input\",type:\"password\",required:true,id:\"password\",placeholder:\"Enter new password\",autoComplete:\"true\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"confirmpassword\",children:\"Confirm New Password:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"contact-form-input\",type:\"password\",required:true,id:\"confirmpassword\",placeholder:\"Confirm new password\",autoComplete:\"true\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-contact\",type:\"submit\",children:\"Reset Password\"})]),_jsxs2))}),/*#__PURE__*/_jsx(Footer,{})]});};export default ResetPasswordPagina;","map":{"version":3,"sources":["/home/julianallende/Desktop/proyecto_sapo/client/src/Pages/ResetPasswordPagina.js"],"names":["useState","Link","useHistory","useParams","axios","Navbar","Footer","ResetPasswordPagina","props","match","console","log","resetToken","password","setPassword","confirmPassword","setConfirmPassword","error","setError","success","setSuccess","resetPasswordHandler","e","preventDefault","config","header","put","data","target","value"],"mappings":"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","sourcesContent":["import { useState} from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./ResetPasswordPagina.scss\";\nimport Navbar from '../components/Navbar/Navbar'\nimport Footer from '../components/Footer/Footer'\nimport './ResetPasswordPagina.scss'\n\nconst ResetPasswordPagina = (props) => {\n\n  const match = useParams()\n  console.log(match.resetToken)\n\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  const resetPasswordHandler = async (e) => {\n    e.preventDefault();\n\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    if (password !== confirmPassword) {\n      setPassword(\"\");\n      setConfirmPassword(\"\");\n      return setError(\"Passwords do not match\");\n    }\n\n    try {\n      const { data } = await axios.put(\n        `/api/auth/resetpassword/${match.resetToken}`,\n        {\n          password,\n        },\n        config\n      );\n\n      console.log(data);\n      setSuccess(data.data);\n    } catch (error) {\n      setError(error.data);\n    }\n  };\n\n  return (\n    <div className=\"resetpassword-screen\">\n      <Navbar/>\n      <div className=\"form-wrapper-div\">\n        <form className=\"forgot-password-form\"\n        onSubmit={resetPasswordHandler}\n        className=\"resetpassword-screen__form\"\n      >\n        <h3 className=\"resetpassword-screen__title\">Forgot Password</h3>\n        {error && <span className=\"error-message\">{error} </span>}\n        {success && (\n          <span className=\"success-message\">\n            {success} <Link to=\"/signin\">Login</Link>\n          </span>\n        )}\n        <div className=\"form-group\">\n          <label className=\"form-label\" htmlFor=\"password\">New Password:</label>\n          <input\n            className=\"contact-form-input\"\n            type=\"password\"\n            required\n            id=\"password\"\n            placeholder=\"Enter new password\"\n            autoComplete=\"true\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label className=\"form-label\" htmlFor=\"confirmpassword\">Confirm New Password:</label>\n          <input\n            className=\"contact-form-input\"\n            type=\"password\"\n            required\n            id=\"confirmpassword\"\n            placeholder=\"Confirm new password\"\n            autoComplete=\"true\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n          />\n        </div>\n        <button className=\"btn-contact\" type=\"submit\">\n          Reset Password\n        </button>\n      </form>\n      </div>\n      <Footer/>\n    </div>\n  );\n};\n\nexport default ResetPasswordPagina;"]},"metadata":{},"sourceType":"module"}