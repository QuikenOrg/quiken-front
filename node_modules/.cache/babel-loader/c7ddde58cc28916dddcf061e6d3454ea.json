{"ast":null,"code":"var _jsxFileName = \"/home/julianallende/Desktop/Coding/proyectos/master_quiken/proyecto_sapo/client/src/Pages/UserDashboard.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useHistory, Link } from 'react-router-dom';\nimport axios from \"axios\";\nimport \"./UserDashboard.scss\";\nimport Navbar from '../components/Navbar/Navbar';\nimport GuideTable from '../components/UserDashboard/GuideTable';\nimport Footer from '../components/Footer/Footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UserDashboard = () => {\n  _s();\n\n  const [loggedInUser, setLoggedInUser] = useState('');\n  const [userGuides, setUserGuides] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [privateData, setPrivateData] = useState(\"\");\n  const history = useHistory(); //States for quoate\n\n  const [testPackageLength, setTestPackageLength] = useState();\n  const [testPackageWidth, setTestPackageWidth] = useState();\n  const [testPackageHeight, setTestPackageHeight] = useState();\n  const [testPackageWeight, setTestPackageWeight] = useState();\n  const [testReceiverPostalCode, setTestReceiverPostalCode] = useState();\n  const [testSenderPostalCode, setTestSenderPostalCode] = useState(); //Services available\n\n  const [testServices, setTestServices] = useState();\n  const [testQuoteError, setTestQuoteError] = useState();\n  const [hasQuoteError, setHasQuoteError] = useState(false);\n  const [loadingServicios, setLoadingServicios] = useState(true); //Quoate API Call Function\n\n  const calculateGuide = async () => {\n    const url = 'https://api.quiken.mx/rate';\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"clientDetail\": {\n          \"accountName\": \"rastreo@quiken.mx\",\n          \"apiKey\": \"QNy1tpJFfmYIOlqF1oiwBy7iE46LXuwb\"\n        },\n        \"origin\": {\n          \"name\": \"testSender\",\n          \"company\": \"Default Value\",\n          \"email\": \"test@gmail.com\",\n          \"phone\": \"55555555\",\n          \"country\": \"MX\",\n          \"postalCode\": testSenderPostalCode\n        },\n        \"destination\": {\n          \"name\": \"testReceiber\",\n          \"company\": \"Default Value\",\n          \"email\": \"test2@gmail.com\",\n          \"phone\": \"88888888\",\n          \"country\": \"MX\",\n          \"postalCode\": testReceiverPostalCode\n        },\n        \"package\": {\n          \"content\": \"ropa\",\n          \"type\": 1,\n          \"dimensions\": {\n            \"length\": parseInt(testPackageLength),\n            \"width\": parseInt(testPackageWidth),\n            \"height\": parseInt(testPackageHeight)\n          },\n          \"weight\": parseInt(testPackageWeight)\n        }\n      })\n    });\n    const data = await response.json();\n    console.log(data);\n\n    if (data.status === \"SUCCESS\") {\n      setTestServices(data.data.services);\n      setLoadingServicios(false);\n    } else if (data.status === \"ERROR\") {\n      setTestQuoteError(data.description);\n      setLoadingServicios(false);\n      setHasQuoteError(true);\n    }\n  }; //Handle click on quote button\n\n\n  const handleQuote = async event => {\n    event.preventDefault();\n    await calculateGuide();\n    console.log(testServices);\n  }; //Get Fetch Guides Function\n\n\n  const loadUserGuides = async currentUser => {\n    await fetch(`api/user/guides/${currentUser}`, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(json => {\n      console.log('Success:', json);\n      console.log(json.data);\n      setUserGuides(json.data);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  }; //Fetch Private Data\n\n\n  const fetchPrivateDate = async () => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\n      }\n    };\n\n    try {\n      //AQUI VAN LAS RUTAS DE LAS GUIAS\n      const {\n        data\n      } = await axios.get(\"/api/private\", config);\n      setPrivateData(data.data);\n    } catch (error) {\n      localStorage.removeItem(\"authToken\");\n      localStorage.removeItem(\"email\");\n      localStorage.removeItem(\"username\");\n      setError(\"You are not authorized please login\");\n    }\n  };\n\n  useEffect(() => {\n    fetchPrivateDate();\n    let currentUser = localStorage.getItem('email');\n    console.log('currentUser: ', currentUser);\n    loadUserGuides(currentUser);\n    setLoggedInUser(currentUser);\n  }, []);\n\n  const logoutHandler = () => {\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('email');\n    localStorage.removeItem('username');\n    history.push('/signin');\n  };\n\n  return error ? /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"error-message\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-wrapper-userdashboard\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"heading-userdashboards\",\n        children: \"Welcome to Quiken\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"account-name\",\n        children: [\"Cuenta: \", loggedInUser]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"cotizador-rapido-main-header\",\n        children: \"Cotizador Rapido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-cotizador-servicios div\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-cotizador\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"div-main-cotizador-rapido\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"column-cotizador-rapido\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"Informaci\\xF3n Paquete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Largo (cm)\",\n                onChange: event => setTestPackageLength(event.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Ancho (cm)\",\n                onChange: event => setTestPackageWidth(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Alto (cm)\",\n                onChange: event => setTestPackageHeight(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Peso (cm)\",\n                onChange: event => setTestPackageWeight(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"column-cotizador-rapido\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"\\xBFDesde d\\xF3nde envias?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Codigo Postal\",\n                onChange: event => setTestSenderPostalCode(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"\\xBFHacia d\\xF3nde envias?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                placeholder: \"Codigo Postal\",\n                onChange: event => setTestReceiverPostalCode(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cotizador-row-button\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: event => handleQuote(event),\n              children: \"Cotizar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"column-cotizador\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Servicios\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 23\n          }, this), loadingServicios ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : hasQuoteError ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"has Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 41\n          }, this) : testServices.map(servicio => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: servicio.code\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: servicio.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: servicio.totalPrice\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: servicio.estimateDelivery\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 27\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"tabla-de-guias-heading\",\n        children: \"Tus Guias\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(GuideTable, {\n        userGuides: userGuides\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"div-row-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/createguide\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"blue\",\n            className: \"btn-contact-form\",\n            children: \"Create Guide\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-contact-form \",\n          onClick: logoutHandler,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(UserDashboard, \"NAXy1RAcOm7N7o1ft1qR1dED0OY=\", false, function () {\n  return [useHistory];\n});\n\n_c = UserDashboard;\nexport default UserDashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserDashboard\");","map":{"version":3,"sources":["/home/julianallende/Desktop/Coding/proyectos/master_quiken/proyecto_sapo/client/src/Pages/UserDashboard.js"],"names":["useState","useEffect","useHistory","Link","axios","Navbar","GuideTable","Footer","UserDashboard","loggedInUser","setLoggedInUser","userGuides","setUserGuides","error","setError","privateData","setPrivateData","history","testPackageLength","setTestPackageLength","testPackageWidth","setTestPackageWidth","testPackageHeight","setTestPackageHeight","testPackageWeight","setTestPackageWeight","testReceiverPostalCode","setTestReceiverPostalCode","testSenderPostalCode","setTestSenderPostalCode","testServices","setTestServices","testQuoteError","setTestQuoteError","hasQuoteError","setHasQuoteError","loadingServicios","setLoadingServicios","calculateGuide","url","response","fetch","method","headers","body","JSON","stringify","parseInt","data","json","console","log","status","services","description","handleQuote","event","preventDefault","loadUserGuides","currentUser","then","catch","fetchPrivateDate","config","Authorization","localStorage","getItem","get","removeItem","logoutHandler","push","target","value","map","servicio","code","name","totalPrice","estimateDelivery"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useHistory, Link } from 'react-router-dom'\nimport axios from \"axios\";\nimport \"./UserDashboard.scss\"\nimport Navbar from '../components/Navbar/Navbar'\nimport GuideTable from '../components/UserDashboard/GuideTable'\nimport Footer from '../components/Footer/Footer'\n\nconst UserDashboard = () => {   \n\n  const [loggedInUser, setLoggedInUser] = useState('')\n  const [userGuides, setUserGuides] = useState([])\n  const [error, setError] = useState(\"\");\n  const [privateData, setPrivateData] = useState(\"\");\n  const history = useHistory();\n\n  //States for quoate\n  const [testPackageLength, setTestPackageLength] = useState()\n  const [testPackageWidth, setTestPackageWidth] = useState()\n  const [testPackageHeight, setTestPackageHeight] = useState()\n  const [testPackageWeight, setTestPackageWeight] = useState()\n  const [testReceiverPostalCode, setTestReceiverPostalCode] = useState()\n  const [testSenderPostalCode, setTestSenderPostalCode] = useState()\n\n  //Services available\n  const [testServices, setTestServices] = useState()\n  const [testQuoteError, setTestQuoteError] = useState()\n  const [hasQuoteError, setHasQuoteError] = useState(false)\n  const [loadingServicios, setLoadingServicios] = useState(true)\n\n  //Quoate API Call Function\n  const calculateGuide = async () => {\n    const url = 'https://api.quiken.mx/rate';\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {'Content-type': 'application/json'},\n      body: JSON.stringify({\n          \"clientDetail\": {\n             \"accountName\": \"rastreo@quiken.mx\",\n             \"apiKey\": \"QNy1tpJFfmYIOlqF1oiwBy7iE46LXuwb\"\n           },\n           \"origin\": {\n             \"name\": \"testSender\",\n             \"company\": \"Default Value\",\n             \"email\": \"test@gmail.com\",\n             \"phone\": \"55555555\",\n             \"country\": \"MX\",\n             \"postalCode\": testSenderPostalCode\n           },\n           \"destination\": {\n             \"name\": \"testReceiber\",\n             \"company\": \"Default Value\",\n             \"email\": \"test2@gmail.com\",\n             \"phone\": \"88888888\",\n             \"country\": \"MX\",\n             \"postalCode\": testReceiverPostalCode\n           },\n           \"package\": {\n             \"content\": \"ropa\",\n             \"type\": 1,\n             \"dimensions\": {\n               \"length\": parseInt(testPackageLength),\n               \"width\": parseInt(testPackageWidth),\n               \"height\": parseInt(testPackageHeight)\n             },\n             \"weight\": parseInt(testPackageWeight)\n           }\n      })\n    });\n    const data = await response.json();\n    console.log(data)\n    if (data.status === \"SUCCESS\") {\n      setTestServices(data.data.services)\n      setLoadingServicios(false)\n      \n    } else if (data.status === \"ERROR\") {\n      setTestQuoteError(data.description)\n      setLoadingServicios(false)\n      setHasQuoteError(true)\n    }\n    \n  }\n\n\n  //Handle click on quote button\n  const handleQuote = async (event) => {\n    event.preventDefault()\n    await calculateGuide()\n    console.log(testServices)\n  }\n\n\n  //Get Fetch Guides Function\n  const loadUserGuides = async (currentUser) => {\n    await fetch(`api/user/guides/${currentUser}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      }\n    })\n    .then(response => response.json())\n    .then(json => {\n      console.log('Success:', json);\n      console.log(json.data)\n      setUserGuides(json.data)\n    })\n    .catch((error) => {\n      console.error('Error:', error);\n    });\n  };\n\n  //Fetch Private Data\n  const fetchPrivateDate = async () => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`,\n      },\n    };\n    try {\n      \n      //AQUI VAN LAS RUTAS DE LAS GUIAS\n      const { data } = await axios.get(\"/api/private\", config);\n      setPrivateData(data.data);\n\n\n\n    } catch (error) {\n      localStorage.removeItem(\"authToken\");\n      localStorage.removeItem(\"email\");\n      localStorage.removeItem(\"username\");\n      setError(\"You are not authorized please login\");\n    }\n\n  };\n\n\n  useEffect(() => {\n\n    fetchPrivateDate();\n    let currentUser = localStorage.getItem('email')\n    console.log('currentUser: ', currentUser)\n    loadUserGuides(currentUser);\n    setLoggedInUser(currentUser)\n  }, []);\n\n  const logoutHandler = () => {\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('email');\n      localStorage.removeItem('username');\n      \n\n      history.push('/signin')\n  }\n\n  return error ? (\n    <span className=\"error-message\">{error}</span>\n  ) : (\n    <>  \n        <Navbar/>\n            <div className=\"main-wrapper-userdashboard\">\n                <h2 className=\"heading-userdashboards\">Welcome to Quiken</h2>\n                <div className=\"account-name\">Cuenta: {loggedInUser}</div>\n                <h1 className=\"cotizador-rapido-main-header\">Cotizador Rapido</h1>\n              \n              <div className=\"main-cotizador-servicios div\">\n                {/* Cotizador */}\n                <div className=\"column-cotizador\">\n                      <div className=\"div-main-cotizador-rapido\">\n                        \n                        <div className=\"column-cotizador-rapido\">\n                          <h1>Información Paquete</h1>\n                          \n                          <input placeholder=\"Largo (cm)\"\n                          onChange={(event) => setTestPackageLength(event.target.value)}\n                          required\n                          />\n                          \n                          <input placeholder=\"Ancho (cm)\"\n                          onChange={(event) => setTestPackageWidth(event.target.value)}\n                          />\n\n                          <input placeholder=\"Alto (cm)\"\n                          onChange={(event) => setTestPackageHeight(event.target.value)}\n                          />\n                          \n                          <input placeholder=\"Peso (cm)\"\n                          onChange={(event) => setTestPackageWeight(event.target.value)}\n                          />\n\n                        </div>\n                        \n                        <div className=\"column-cotizador-rapido\">\n                          <h1>¿Desde dónde envias?</h1>\n                          <input placeholder=\"Codigo Postal\"\n                          onChange={(event) => setTestSenderPostalCode(event.target.value)}\n                          />\n\n                          <h1>¿Hacia dónde envias?</h1>\n                          <input placeholder=\"Codigo Postal\"\n                          onChange={(event) => setTestReceiverPostalCode(event.target.value)}\n                          />\n                        </div>\n                        \n                    </div>\n                      <div className=\"cotizador-row-button\">\n                        <button onClick={(event) => handleQuote(event)}>Cotizar</button>\n                      </div>\n                </div>\n\n\n                {/* Empieza aqui */}\n                <div className=\"column-cotizador\">\n                      <h1>Servicios</h1>\n                      {loadingServicios ? <></> : \n                        hasQuoteError ? <div>has Error</div> : \n                      \n      \n                      testServices.map((servicio) => {\n                        return (\n                          <div>\n                            <h1>{servicio.code}</h1>\n                            <h1>{servicio.name}</h1>\n                            <h1>{servicio.totalPrice}</h1>\n                            <h1>{servicio.estimateDelivery}</h1>\n                          </div>\n                        )\n                      })}\n                      \n                </div>\n                {/* Termina Aqui */}\n\n              </div>\n\n\n              <h1 className=\"tabla-de-guias-heading\">Tus Guias</h1>  \n              <GuideTable userGuides={userGuides}/>\n              <div className=\"div-row-wrapper\">\n                <Link to=\"/createguide\">\n                  <button id=\"blue\" className=\"btn-contact-form\">Create Guide</button>\n                </Link>\n                <button className=\"btn-contact-form \" onClick={logoutHandler}>Logout</button>\n              </div>\n             <Footer/>\n            </div>\n        \n    </>\n  );\n};\n\nexport default UserDashboard;"]},"metadata":{},"sourceType":"module"}