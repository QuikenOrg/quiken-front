{"ast":null,"code":"var _jsxFileName = \"/home/julianallende/Desktop/Coding/proyectos/master_quiken/proyecto_sapo/client/src/Pages/RecargarSaldoPagina.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport \"./RecargarSaldoPagina.scss\";\nimport Navbar from '../components/Navbar/Navbar';\nimport SubNavbar from '../components/Navbar/SubNavbar';\nimport Footer from '../components/Footer/Footer';\nimport CheckoutStripe2 from '../components/Cart/Checkout2';\nimport { AfterpayClearpayMessageElement } from '@stripe/react-stripe-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RecargarSaldoPagina = () => {\n  _s();\n\n  //Initializing Variables and States\n  const [paymentMethodSelected, setPaymentMethodSelected] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState(\"\");\n  const [cartTotal, setCartTotal] = useState(0);\n  const [cart, setCart] = useState([]);\n  const [isRechargePaid, setIsRechargePaid] = useState(false);\n  const [hasPaymentError, setHasPaymentError] = useState(false);\n  const [errorPayment, setErrorPayment] = useState(\"\");\n  const [userPoints, setUserPoints] = useState(0);\n  let username = localStorage.getItem('email');\n\n  const handleProductClick = async (cart, id) => {\n    console.log(cart);\n\n    if (cart.length < 5) {\n      const selectedProduct = await items.find(product => product.id === id);\n      cart.push(selectedProduct);\n      setCartTotal(cartTotal + selectedProduct.total);\n    }\n  };\n\n  const items = [{\n    id: 100,\n    total: 200\n  }, {\n    id: 101,\n    total: 1000\n  }, {\n    id: 102,\n    total: 10000\n  }];\n\n  const requestGetPoints = async username => {\n    const url = 'api/user/getPoints/';\n    console.log(username, 'RUNNING THIS');\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'username': username\n      })\n    });\n    const data = await response.json();\n    console.log(data);\n    console.log(response.status, 'STATUS');\n\n    if (response.status === 200) {\n      setUserPoints(data.data[0].points);\n    }\n  };\n\n  const requestRecharge = async (username, amount) => {\n    const url = 'api/user/updatePoints';\n    console.log(username, 'RUNNING THIS');\n    console.log('AMOUNT', amount);\n    const response = await fetch(url, {\n      method: \"PUT\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'username': username,\n        'amount': amount\n      })\n    });\n    const data = await response.json();\n    console.log(data);\n    console.log(response.status, 'STATUS');\n\n    if (response.status === 200) {\n      console.log(data);\n      alert('Tu recarga fue exitosa. Agradecemos tu compra');\n      resetState();\n    }\n  };\n\n  const resetState = () => {\n    setUserPoints(0);\n    setErrorPayment(\"\");\n    setHasPaymentError(false);\n    setIsRechargePaid(false);\n    setCart([]);\n    setCartTotal(0);\n    setPaymentMethod(\"\");\n    setHasPaymentError(false);\n  };\n\n  useEffect(() => {\n    console.log('THSI IS BOOLEAN RECAHRG', isRechargePaid);\n    requestGetPoints(username);\n\n    if (isRechargePaid === true) {\n      console.log('UPDATING POINTS');\n      requestRecharge(username, cartTotal);\n      setIsRechargePaid(false);\n    }\n  }, [isRechargePaid, cartTotal]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SubNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-wrapper-recargar-saldo\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-wrapper-comprar-saldo\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrapper-seleccionador paquetes\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"saldo-actual-heading\",\n            children: \"1. Recarga Saldo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-saldo-actual\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"saldo-actual-subheading\",\n              children: \"Saldo Actual\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"saldo-actual-big-number\",\n              children: [\"$ \", userPoints, \".00\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"paquetes-de-puntos\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"heading-agregar-puntos\",\n              children: \"Da Click y Agrega Puntos!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-agrega-credito\",\n              onClick: () => {\n                handleProductClick(cart, 100);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"agrega-credito-actual-subheading\",\n                children: \"+ Agregar credito\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"agrega-credito-actual-big-number\",\n                children: \"$ 200.00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-agrega-credito\",\n              onClick: () => {\n                handleProductClick(cart, 101);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"agrega-credito-actual-subheading\",\n                children: \"+ Agregar credito\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"agrega-credito-actual-big-number\",\n                children: \"$ 1000.00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-agrega-credito\",\n              onClick: () => {\n                handleProductClick(cart, 102);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"agrega-credito-actual-subheading\",\n                children: \"+ Agregar credito\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"agrega-credito-actual-big-number\",\n                children: \"$ 10000.00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrapper-checkout-puntos\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"saldo-actual-heading\",\n            children: \"2. Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-saldo-actual\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"saldo-actual-subheading\",\n              children: \"Saldo por recargar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"saldo-actual-big-number\",\n              children: [\"$ \", cartTotal, \".00\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-saldo-actual\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"saldo-actual-subheading\",\n              children: \"Saldo Nuevo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"saldo-actual-big-number\",\n              children: [\"$ \", cartTotal + userPoints, \".00\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"selecciona-metodo-pago-heading\",\n            children: \"Selecciona tu metodo de pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"payment-method-selector-saldo\",\n            onChange: event => {\n              setPaymentMethodSelected(!paymentMethodSelected);\n              setPaymentMethod(event.target.value);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Ninguno\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"tarjeta\",\n              children: \"Tarjeta de credito/debito\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: paymentMethodSelected ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkout-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"metodo-tarjeta-heading\",\n            children: \"Favor de ingresar la informaci\\xF3n de su tarjeta.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"metodo-tarjeta-subheading\",\n            children: \"Numero de Tarjeta, Codigo, Fecha de expiraci\\xF3n, Codigo Postal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"metodo-tarjeta-subheading\",\n            children: \"Aceptamos todo tipo de tarjeta (Visa, AMEX, MasterCard)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(CheckoutStripe2, {\n            setErrorPayment: setErrorPayment,\n            setHasPaymentError: setHasPaymentError,\n            cartTotal: cartTotal,\n            setIsRechargePaid: setIsRechargePaid\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n};\n\n_s(RecargarSaldoPagina, \"b4RAMpHXq0dB7JGBmLO6/Weskb0=\");\n\n_c = RecargarSaldoPagina;\nexport default RecargarSaldoPagina;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecargarSaldoPagina\");","map":{"version":3,"sources":["/home/julianallende/Desktop/Coding/proyectos/master_quiken/proyecto_sapo/client/src/Pages/RecargarSaldoPagina.js"],"names":["React","useState","useEffect","Navbar","SubNavbar","Footer","CheckoutStripe2","AfterpayClearpayMessageElement","RecargarSaldoPagina","paymentMethodSelected","setPaymentMethodSelected","paymentMethod","setPaymentMethod","cartTotal","setCartTotal","cart","setCart","isRechargePaid","setIsRechargePaid","hasPaymentError","setHasPaymentError","errorPayment","setErrorPayment","userPoints","setUserPoints","username","localStorage","getItem","handleProductClick","id","console","log","length","selectedProduct","items","find","product","push","total","requestGetPoints","url","response","fetch","method","headers","body","JSON","stringify","data","json","status","points","requestRecharge","amount","alert","resetState","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport \"./RecargarSaldoPagina.scss\"\nimport Navbar from '../components/Navbar/Navbar'\nimport SubNavbar from '../components/Navbar/SubNavbar'\nimport Footer from '../components/Footer/Footer'\nimport CheckoutStripe2 from '../components/Cart/Checkout2'\nimport { AfterpayClearpayMessageElement } from '@stripe/react-stripe-js'\n\nconst RecargarSaldoPagina = () => {\n    //Initializing Variables and States\n    const [paymentMethodSelected, setPaymentMethodSelected] = useState(false)\n    const [paymentMethod, setPaymentMethod] = useState(\"\")\n    const [cartTotal, setCartTotal] = useState(0)\n    const [cart, setCart] = useState([])\n    const [isRechargePaid, setIsRechargePaid] = useState(false);\n    const [hasPaymentError, setHasPaymentError] = useState(false)\n    const [errorPayment, setErrorPayment] = useState(\"\")\n    const [userPoints, setUserPoints] = useState(0)\n\n    let username = localStorage.getItem('email')\n\n    const handleProductClick = async (cart, id) => {\n        console.log(cart);\n        if (cart.length < 5) {\n            const selectedProduct = await items.find(product => product.id === id)\n            cart.push(selectedProduct) \n            setCartTotal(cartTotal + selectedProduct.total)\n        }\n    }\n\n\n    const items = [\n        {id:100, total: 200},\n        {id:101, total: 1000},\n        {id:102, total: 10000}\n    ]\n\n    const requestGetPoints = async (username) => {\n        const url = 'api/user/getPoints/'\n        console.log(username, 'RUNNING THIS')\n        \n        const response = await fetch(url, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n              },\n            body: JSON.stringify ({\n                'username': username\n            })\n        });\n        \n        const data = await response.json()\n        console.log(data)\n        console.log(response.status, 'STATUS')\n        if (response.status === 200) {\n            setUserPoints(data.data[0].points)\n        }\n        \n        \n    }\n\n    const requestRecharge = async (username, amount) => {\n        const url = 'api/user/updatePoints'\n        console.log(username, 'RUNNING THIS')\n        console.log('AMOUNT', amount);\n        \n        const response = await fetch(url, {\n            method: \"PUT\",\n            headers: {\n                'Content-Type': 'application/json',\n              },\n            body: JSON.stringify ({\n                'username': username,\n                'amount': amount \n            })\n        });\n        \n        const data = await response.json()\n        console.log(data)\n        console.log(response.status, 'STATUS')\n        if (response.status === 200) {\n            console.log(data)\n            alert('Tu recarga fue exitosa. Agradecemos tu compra')\n            resetState()\n        }   \n    }\n\n    const resetState = () => {\n        setUserPoints(0)\n        setErrorPayment(\"\")\n        setHasPaymentError(false)\n        setIsRechargePaid(false)\n        setCart([])\n        setCartTotal(0)\n        setPaymentMethod(\"\")\n        setHasPaymentError(false)\n    }\n\n    \n\n    useEffect(() => {\n        console.log('THSI IS BOOLEAN RECAHRG', isRechargePaid);\n        requestGetPoints(username)\n        if(isRechargePaid === true) {\n            console.log('UPDATING POINTS')\n            requestRecharge(username, cartTotal)\n            setIsRechargePaid(false)\n        }\n        \n    }, [isRechargePaid, cartTotal])\n\n    \n    return (\n        <div>\n            {/* <Navbar/> */}\n            <SubNavbar/>\n            <div className=\"main-wrapper-recargar-saldo\">\n                <div className=\"main-wrapper-comprar-saldo\">\n\n                    <div className=\"wrapper-seleccionador paquetes\">\n                        <h1 className=\"saldo-actual-heading\">1. Recarga Saldo</h1>\n                        \n                        <div className=\"card-saldo-actual\">\n                            <label className=\"saldo-actual-subheading\">Saldo Actual</label>\n                            <h1 className=\"saldo-actual-big-number\">$ {userPoints}.00</h1>  \n                        </div>\n\n                        <div className=\"paquetes-de-puntos\">\n                            <label className=\"heading-agregar-puntos\">Da Click y Agrega Puntos!</label>\n                            \n                            <div className=\"card-agrega-credito\" \n                            onClick={() => {\n                                handleProductClick(cart, 100)\n                            }}>\n                                <label className=\"agrega-credito-actual-subheading\">+ Agregar credito</label>\n                                <h1 className=\"agrega-credito-actual-big-number\">$ 200.00</h1>  \n                            </div>\n                            \n                            <div className=\"card-agrega-credito\"\n                            onClick={() => {\n                                handleProductClick(cart, 101)\n                            }}\n                            >\n                                <label className=\"agrega-credito-actual-subheading\">+ Agregar credito</label>\n                                <h1 className=\"agrega-credito-actual-big-number\">$ 1000.00</h1>  \n                            </div>\n\n                            <div className=\"card-agrega-credito\"\n                            onClick={() => {\n                                handleProductClick(cart, 102)\n                            }}\n                            >\n                                <label className=\"agrega-credito-actual-subheading\">+ Agregar credito</label>\n                                <h1 className=\"agrega-credito-actual-big-number\">$ 10000.00</h1>  \n                            </div>\n                            \n\n                        </div>\n\n                    </div>\n                    \n                    <div className=\"wrapper-checkout-puntos\">\n                    <h1 className=\"saldo-actual-heading\">2. Checkout</h1>\n                        \n                        <div  className=\"card-saldo-actual\">\n                            <label className=\"saldo-actual-subheading\">Saldo por recargar</label>\n                            <h1 className=\"saldo-actual-big-number\">$ {cartTotal}.00</h1>  \n                        </div>\n\n                        <div  className=\"card-saldo-actual\">\n                            <label className=\"saldo-actual-subheading\">Saldo Nuevo</label>\n                            <h1 className=\"saldo-actual-big-number\">$ {cartTotal + userPoints}.00</h1>  \n                        </div>\n                        \n                        <h1 className=\"selecciona-metodo-pago-heading\">Selecciona tu metodo de pago</h1>\n                        \n                        <select className=\"payment-method-selector-saldo\"  onChange={(event) => {\n                            setPaymentMethodSelected(!paymentMethodSelected)\n                            setPaymentMethod(event.target.value)\n                            }}\n                            >\n                            <option value=\"\">Ninguno</option>\n                            <option value=\"tarjeta\">Tarjeta de credito/debito</option>\n                        </select>\n                        \n                    </div>\n                </div>\n                \n                <div>\n                        {\n                        paymentMethodSelected ?\n                            <div className=\"checkout-wrapper\">\n                                <h1 className=\"metodo-tarjeta-heading\">Favor de ingresar la información de su tarjeta.</h1>\n                                <h2 className=\"metodo-tarjeta-subheading\">Numero de Tarjeta, Codigo, Fecha de expiración, Codigo Postal</h2>\n                                <h2 className=\"metodo-tarjeta-subheading\">Aceptamos todo tipo de tarjeta (Visa, AMEX, MasterCard)</h2>\n                                <CheckoutStripe2 setErrorPayment={setErrorPayment} setHasPaymentError={setHasPaymentError} cartTotal={cartTotal} setIsRechargePaid={setIsRechargePaid} />\n                            </div>\n                        :\n                        <div></div>\n                        }\n                        \n                        \n                </div>\n                \n\n            </div>\n            <Footer/>\n        </div>\n    )\n}\n\nexport default RecargarSaldoPagina\n"]},"metadata":{},"sourceType":"module"}