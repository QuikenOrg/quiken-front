{"ast":null,"code":"import _regeneratorRuntime from\"/home/julianallende/Desktop/proyecto_sapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/julianallende/Desktop/proyecto_sapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/julianallende/Desktop/proyecto_sapo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Navbar from'../components/Navbar/Navbar';import Footer from'../components/Footer/Footer';import'./SignInPagina.scss';import{Link,useHistory}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LoginPagina=function LoginPagina(props){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){if(localStorage.getItem('authToken')){history.push(\"/userdashboard\");}},[history]);var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{\"Content-Type\":\"application/json\"}};_context.prev=2;_context.next=5;return axios.post(\"/api/auth/login\",{email:email,password:password},config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(data);localStorage.setItem(\"authToken\",data.token);localStorage.setItem(\"email\",data.user.email);localStorage.setItem(\"username\",data.user.username);history.push(\"/userdashboard\");_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.log(_context.t0);setError(_context.t0.response.data.error);case 18:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function loginHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"page-content-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"signup-main-wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"the-form\",onSubmit:loginHandler,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"main-heading-signup\",children:\"Acesa a tu cuenta\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"main-subheading-signup\",children:\"Y disfruta de los mejores precios env\\xEDos\"}),/*#__PURE__*/_jsx(Link,{className:\"forgot-passwordlink\",to:\"/forgotpassword\",children:\"\\xBFOlvidaste tu contrase\\xF1a?\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"login-screen-title\",children:error}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",required:true,id:\"name\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"text\",placeholder:\"Ingresa tu email\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",required:true,id:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:\"password\",placeholder:\"Ingresa tu contase\\xF1a\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-register\",children:\"Enviar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-sign-in-link\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Ya tienes una cuenta?\"}),/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"\\xA1Da click aqui!\"})]})]})})}),/*#__PURE__*/_jsx(Footer,{})]});};export default LoginPagina;","map":{"version":3,"sources":["/home/julianallende/Desktop/proyecto_sapo/client/src/Pages/SignInPagina.js"],"names":["React","useState","useEffect","Navbar","Footer","Link","useHistory","axios","LoginPagina","props","history","email","setEmail","password","setPassword","error","setError","localStorage","getItem","push","loginHandler","e","preventDefault","config","header","post","data","console","log","setItem","token","user","username","response","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react'\nimport Navbar from '../components/Navbar/Navbar'\nimport Footer from '../components/Footer/Footer'\nimport './SignInPagina.scss'\nimport { Link, useHistory } from 'react-router-dom'\nimport axios from 'axios'\n\n\nconst LoginPagina= (props) => {\n  \n  let history = useHistory();\n  \n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    if (localStorage.getItem('authToken')) {\n      history.push(\"/userdashboard\")\n    }\n  }, [history]);\n\n  const loginHandler = async (e) => {\n    e.preventDefault();\n\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    try {\n      const { data } = await axios.post(\n        \"/api/auth/login\",\n        {\n          email,\n          password,\n        },\n        config\n      );\n      console.log(data)\n\n      localStorage.setItem(\"authToken\", data.token);\n      localStorage.setItem(\"email\", data.user.email);\n      localStorage.setItem(\"username\", data.user.username);\n\n      history.push(\"/userdashboard\");\n    } catch (error) {\n      console.log(error)\n      setError(error.response.data.error);\n    }\n  };\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"page-content-wrapper\">\n        <div className=\"signup-main-wrapper\">\n          <form className=\"the-form\" onSubmit={loginHandler}>\n            <h3 className=\"main-heading-signup\">Acesa a tu cuenta</h3>\n            <h2 className=\"main-subheading-signup\">Y disfruta de los mejores precios envíos</h2>\n            <Link className=\"forgot-passwordlink\" to=\"/forgotpassword\">¿Olvidaste tu contraseña?</Link>\n            {error && <span className=\"login-screen-title\" >{error}</span>}\n            \n            <label className=\"form-label\">Email</label>\n            <input className=\"form-input\" \n                  required \n                  id=\"name\" \n                  value={email} \n                  onChange={(e) => setEmail(e.target.value)} \n                  type=\"text\" \n                  placeholder=\"Ingresa tu email\"/>\n\n            <label className=\"form-label\">Contraseña</label>\n            <input className=\"form-input\" \n                  required \n                  id=\"password\" \n                  value={password} \n                  onChange={(e) => setPassword(e.target.value)} \n                  type=\"password\" \n                  placeholder=\"Ingresa tu contaseña\"/>\n            \n            <button type=\"submit\" className=\"btn-register\">Enviar</button>\n          \n          <div className=\"wrapper-sign-in-link\">\n            <p>Ya tienes una cuenta?</p>\n            <Link to=\"/signin\">¡Da click aqui!</Link>\n          </div>\n          </form>\n                  \n        </div>\n      </div>\n    <Footer/>\n\n    </>\n  )\n}\n\nexport default LoginPagina;"]},"metadata":{},"sourceType":"module"}