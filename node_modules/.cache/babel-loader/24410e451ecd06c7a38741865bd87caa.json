{"ast":null,"code":"import stream from 'stream';\nimport fs from 'fs';\nimport zlib from 'zlib';\nimport CryptoJS from 'crypto-js';\nimport fontkit from 'fontkit';\nimport { EventEmitter } from 'events';\nimport LineBreaker from 'linebreak';\nimport PNG from 'png-js';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = o[Symbol.iterator]();\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n/*\r\nPDFAbstractReference - abstract class for PDF reference\r\n*/\n\n\nvar PDFAbstractReference = /*#__PURE__*/function () {\n  function PDFAbstractReference() {\n    _classCallCheck(this, PDFAbstractReference);\n  }\n\n  _createClass(PDFAbstractReference, [{\n    key: \"toString\",\n    value: function toString() {\n      throw new Error('Must be implemented by subclasses');\n    }\n  }]);\n\n  return PDFAbstractReference;\n}();\n\nvar PDFTree = /*#__PURE__*/function () {\n  function PDFTree() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PDFTree);\n\n    this._items = {}; // disable /Limits output for this tree\n\n    this.limits = typeof options.limits === 'boolean' ? options.limits : true;\n  }\n\n  _createClass(PDFTree, [{\n    key: \"add\",\n    value: function add(key, val) {\n      return this._items[key] = val;\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return this._items[key];\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      var _this = this; // Needs to be sorted by key\n\n\n      var sortedKeys = Object.keys(this._items).sort(function (a, b) {\n        return _this._compareKeys(a, b);\n      });\n      var out = ['<<'];\n\n      if (this.limits && sortedKeys.length > 1) {\n        var first = sortedKeys[0],\n            last = sortedKeys[sortedKeys.length - 1];\n        out.push(\"  /Limits \".concat(PDFObject.convert([this._dataForKey(first), this._dataForKey(last)])));\n      }\n\n      out.push(\"  /\".concat(this._keysName(), \" [\"));\n\n      var _iterator = _createForOfIteratorHelper(sortedKeys),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n          out.push(\"    \".concat(PDFObject.convert(this._dataForKey(key)), \" \").concat(PDFObject.convert(this._items[key])));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      out.push(']');\n      out.push('>>');\n      return out.join('\\n');\n    }\n  }, {\n    key: \"_compareKeys\",\n    value: function _compareKeys()\n    /*a, b*/\n    {\n      throw new Error('Must be implemented by subclasses');\n    }\n  }, {\n    key: \"_keysName\",\n    value: function _keysName() {\n      throw new Error('Must be implemented by subclasses');\n    }\n  }, {\n    key: \"_dataForKey\",\n    value: function _dataForKey()\n    /*k*/\n    {\n      throw new Error('Must be implemented by subclasses');\n    }\n  }]);\n\n  return PDFTree;\n}();\n\nvar pad = function pad(str, length) {\n  return (Array(length + 1).join('0') + str).slice(-length);\n};\n\nvar escapableRe = /[\\n\\r\\t\\b\\f()\\\\]/g;\nvar escapable = {\n  '\\n': '\\\\n',\n  '\\r': '\\\\r',\n  '\\t': '\\\\t',\n  '\\b': '\\\\b',\n  '\\f': '\\\\f',\n  '\\\\': '\\\\\\\\',\n  '(': '\\\\(',\n  ')': '\\\\)'\n}; // Convert little endian UTF-16 to big endian\n\nvar swapBytes = function swapBytes(buff) {\n  var l = buff.length;\n\n  if (l & 0x01) {\n    throw new Error('Buffer length must be even');\n  } else {\n    for (var i = 0, end = l - 1; i < end; i += 2) {\n      var a = buff[i];\n      buff[i] = buff[i + 1];\n      buff[i + 1] = a;\n    }\n  }\n\n  return buff;\n};\n\nvar PDFObject = /*#__PURE__*/function () {\n  function PDFObject() {\n    _classCallCheck(this, PDFObject);\n  }\n\n  _createClass(PDFObject, null, [{\n    key: \"convert\",\n    value: function convert(object) {\n      var encryptFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; // String literals are converted to the PDF name type\n\n      if (typeof object === 'string') {\n        return \"/\".concat(object); // String objects are converted to PDF strings (UTF-16)\n      } else if (object instanceof String) {\n        var string = object; // Detect if this is a unicode string\n\n        var isUnicode = false;\n\n        for (var i = 0, end = string.length; i < end; i++) {\n          if (string.charCodeAt(i) > 0x7f) {\n            isUnicode = true;\n            break;\n          }\n        } // If so, encode it as big endian UTF-16\n\n\n        var stringBuffer;\n\n        if (isUnicode) {\n          stringBuffer = swapBytes(Buffer.from(\"\\uFEFF\".concat(string), 'utf16le'));\n        } else {\n          stringBuffer = Buffer.from(string.valueOf(), 'ascii');\n        } // Encrypt the string when necessary\n\n\n        if (encryptFn) {\n          string = encryptFn(stringBuffer).toString('binary');\n        } else {\n          string = stringBuffer.toString('binary');\n        } // Escape characters as required by the spec\n\n\n        string = string.replace(escapableRe, function (c) {\n          return escapable[c];\n        });\n        return \"(\".concat(string, \")\"); // Buffers are converted to PDF hex strings\n      } else if (Buffer.isBuffer(object)) {\n        return \"<\".concat(object.toString('hex'), \">\");\n      } else if (object instanceof PDFAbstractReference || object instanceof PDFTree) {\n        return object.toString();\n      } else if (object instanceof Date) {\n        var _string = \"D:\".concat(pad(object.getUTCFullYear(), 4)) + pad(object.getUTCMonth() + 1, 2) + pad(object.getUTCDate(), 2) + pad(object.getUTCHours(), 2) + pad(object.getUTCMinutes(), 2) + pad(object.getUTCSeconds(), 2) + 'Z'; // Encrypt the string when necessary\n\n\n        if (encryptFn) {\n          _string = encryptFn(Buffer.from(_string, 'ascii')).toString('binary'); // Escape characters as required by the spec\n\n          _string = _string.replace(escapableRe, function (c) {\n            return escapable[c];\n          });\n        }\n\n        return \"(\".concat(_string, \")\");\n      } else if (Array.isArray(object)) {\n        var items = object.map(function (e) {\n          return PDFObject.convert(e, encryptFn);\n        }).join(' ');\n        return \"[\".concat(items, \"]\");\n      } else if ({}.toString.call(object) === '[object Object]') {\n        var out = ['<<'];\n\n        for (var key in object) {\n          var val = object[key];\n          out.push(\"/\".concat(key, \" \").concat(PDFObject.convert(val, encryptFn)));\n        }\n\n        out.push('>>');\n        return out.join('\\n');\n      } else if (typeof object === 'number') {\n        return PDFObject.number(object);\n      } else {\n        return \"\".concat(object);\n      }\n    }\n  }, {\n    key: \"number\",\n    value: function number(n) {\n      if (n > -1e21 && n < 1e21) {\n        return Math.round(n * 1e6) / 1e6;\n      }\n\n      throw new Error(\"unsupported number: \".concat(n));\n    }\n  }]);\n\n  return PDFObject;\n}();\n\nvar PDFReference = /*#__PURE__*/function (_PDFAbstractReference) {\n  _inherits(PDFReference, _PDFAbstractReference);\n\n  var _super = _createSuper(PDFReference);\n\n  function PDFReference(document, id) {\n    var _this;\n\n    var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, PDFReference);\n\n    _this = _super.call(this);\n    _this.document = document;\n    _this.id = id;\n    _this.data = data;\n    _this.gen = 0;\n    _this.compress = _this.document.compress && !_this.data.Filter;\n    _this.uncompressedLength = 0;\n    _this.buffer = [];\n    return _this;\n  }\n\n  _createClass(PDFReference, [{\n    key: \"write\",\n    value: function write(chunk) {\n      if (!Buffer.isBuffer(chunk)) {\n        chunk = Buffer.from(chunk + '\\n', 'binary');\n      }\n\n      this.uncompressedLength += chunk.length;\n\n      if (this.data.Length == null) {\n        this.data.Length = 0;\n      }\n\n      this.buffer.push(chunk);\n      this.data.Length += chunk.length;\n\n      if (this.compress) {\n        return this.data.Filter = 'FlateDecode';\n      }\n    }\n  }, {\n    key: \"end\",\n    value: function end(chunk) {\n      if (chunk) {\n        this.write(chunk);\n      }\n\n      return this.finalize();\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      this.offset = this.document._offset;\n      var encryptFn = this.document._security ? this.document._security.getEncryptFn(this.id, this.gen) : null;\n\n      if (this.buffer.length) {\n        this.buffer = Buffer.concat(this.buffer);\n\n        if (this.compress) {\n          this.buffer = zlib.deflateSync(this.buffer);\n        }\n\n        if (encryptFn) {\n          this.buffer = encryptFn(this.buffer);\n        }\n\n        this.data.Length = this.buffer.length;\n      }\n\n      this.document._write(\"\".concat(this.id, \" \").concat(this.gen, \" obj\"));\n\n      this.document._write(PDFObject.convert(this.data, encryptFn));\n\n      if (this.buffer.length) {\n        this.document._write('stream');\n\n        this.document._write(this.buffer);\n\n        this.buffer = []; // free up memory\n\n        this.document._write('\\nendstream');\n      }\n\n      this.document._write('endobj');\n\n      this.document._refEnd(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.id, \" \").concat(this.gen, \" R\");\n    }\n  }]);\n\n  return PDFReference;\n}(PDFAbstractReference);\n/*\r\nPDFPage - represents a single page in the PDF document\r\nBy Devon Govett\r\n*/\n\n\nvar DEFAULT_MARGINS = {\n  top: 72,\n  left: 72,\n  bottom: 72,\n  right: 72\n};\nvar SIZES = {\n  '4A0': [4767.87, 6740.79],\n  '2A0': [3370.39, 4767.87],\n  A0: [2383.94, 3370.39],\n  A1: [1683.78, 2383.94],\n  A2: [1190.55, 1683.78],\n  A3: [841.89, 1190.55],\n  A4: [595.28, 841.89],\n  A5: [419.53, 595.28],\n  A6: [297.64, 419.53],\n  A7: [209.76, 297.64],\n  A8: [147.4, 209.76],\n  A9: [104.88, 147.4],\n  A10: [73.7, 104.88],\n  B0: [2834.65, 4008.19],\n  B1: [2004.09, 2834.65],\n  B2: [1417.32, 2004.09],\n  B3: [1000.63, 1417.32],\n  B4: [708.66, 1000.63],\n  B5: [498.9, 708.66],\n  B6: [354.33, 498.9],\n  B7: [249.45, 354.33],\n  B8: [175.75, 249.45],\n  B9: [124.72, 175.75],\n  B10: [87.87, 124.72],\n  C0: [2599.37, 3676.54],\n  C1: [1836.85, 2599.37],\n  C2: [1298.27, 1836.85],\n  C3: [918.43, 1298.27],\n  C4: [649.13, 918.43],\n  C5: [459.21, 649.13],\n  C6: [323.15, 459.21],\n  C7: [229.61, 323.15],\n  C8: [161.57, 229.61],\n  C9: [113.39, 161.57],\n  C10: [79.37, 113.39],\n  RA0: [2437.8, 3458.27],\n  RA1: [1729.13, 2437.8],\n  RA2: [1218.9, 1729.13],\n  RA3: [864.57, 1218.9],\n  RA4: [609.45, 864.57],\n  SRA0: [2551.18, 3628.35],\n  SRA1: [1814.17, 2551.18],\n  SRA2: [1275.59, 1814.17],\n  SRA3: [907.09, 1275.59],\n  SRA4: [637.8, 907.09],\n  EXECUTIVE: [521.86, 756.0],\n  FOLIO: [612.0, 936.0],\n  LEGAL: [612.0, 1008.0],\n  LETTER: [612.0, 792.0],\n  TABLOID: [792.0, 1224.0]\n};\n\nvar PDFPage = /*#__PURE__*/function () {\n  function PDFPage(document) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PDFPage);\n\n    this.document = document;\n    this.size = options.size || 'letter';\n    this.layout = options.layout || 'portrait'; // process margins\n\n    if (typeof options.margin === 'number') {\n      this.margins = {\n        top: options.margin,\n        left: options.margin,\n        bottom: options.margin,\n        right: options.margin\n      }; // default to 1 inch margins\n    } else {\n      this.margins = options.margins || DEFAULT_MARGINS;\n    } // calculate page dimensions\n\n\n    var dimensions = Array.isArray(this.size) ? this.size : SIZES[this.size.toUpperCase()];\n    this.width = dimensions[this.layout === 'portrait' ? 0 : 1];\n    this.height = dimensions[this.layout === 'portrait' ? 1 : 0];\n    this.content = this.document.ref(); // Initialize the Font, XObject, and ExtGState dictionaries\n\n    this.resources = this.document.ref({\n      ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI']\n    }); // The page dictionary\n\n    this.dictionary = this.document.ref({\n      Type: 'Page',\n      Parent: this.document._root.data.Pages,\n      MediaBox: [0, 0, this.width, this.height],\n      Contents: this.content,\n      Resources: this.resources\n    });\n    this.markings = [];\n  } // Lazily create these objects\n\n\n  _createClass(PDFPage, [{\n    key: \"maxY\",\n    value: function maxY() {\n      return this.height - this.margins.bottom;\n    }\n  }, {\n    key: \"write\",\n    value: function write(chunk) {\n      return this.content.write(chunk);\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      this.dictionary.end();\n      this.resources.end();\n      return this.content.end();\n    }\n  }, {\n    key: \"fonts\",\n    get: function get() {\n      var data = this.resources.data;\n      return data.Font != null ? data.Font : data.Font = {};\n    }\n  }, {\n    key: \"xobjects\",\n    get: function get() {\n      var data = this.resources.data;\n      return data.XObject != null ? data.XObject : data.XObject = {};\n    }\n  }, {\n    key: \"ext_gstates\",\n    get: function get() {\n      var data = this.resources.data;\n      return data.ExtGState != null ? data.ExtGState : data.ExtGState = {};\n    }\n  }, {\n    key: \"patterns\",\n    get: function get() {\n      var data = this.resources.data;\n      return data.Pattern != null ? data.Pattern : data.Pattern = {};\n    }\n  }, {\n    key: \"annotations\",\n    get: function get() {\n      var data = this.dictionary.data;\n      return data.Annots != null ? data.Annots : data.Annots = [];\n    }\n  }, {\n    key: \"structParentTreeKey\",\n    get: function get() {\n      var data = this.dictionary.data;\n      return data.StructParents != null ? data.StructParents : data.StructParents = this.document.createStructParentTreeNextKey();\n    }\n  }]);\n\n  return PDFPage;\n}();\n\nvar PDFNameTree = /*#__PURE__*/function (_PDFTree) {\n  _inherits(PDFNameTree, _PDFTree);\n\n  var _super = _createSuper(PDFNameTree);\n\n  function PDFNameTree() {\n    _classCallCheck(this, PDFNameTree);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PDFNameTree, [{\n    key: \"_compareKeys\",\n    value: function _compareKeys(a, b) {\n      return a.localeCompare(b);\n    }\n  }, {\n    key: \"_keysName\",\n    value: function _keysName() {\n      return \"Names\";\n    }\n  }, {\n    key: \"_dataForKey\",\n    value: function _dataForKey(k) {\n      return new String(k);\n    }\n  }]);\n\n  return PDFNameTree;\n}(PDFTree);\n/**\r\n * Check if value is in a range group.\r\n * @param {number} value\r\n * @param {number[]} rangeGroup\r\n * @returns {boolean}\r\n */\n\n\nfunction inRange(value, rangeGroup) {\n  if (value < rangeGroup[0]) return false;\n  var startRange = 0;\n  var endRange = rangeGroup.length / 2;\n\n  while (startRange <= endRange) {\n    var middleRange = Math.floor((startRange + endRange) / 2); // actual array index\n\n    var arrayIndex = middleRange * 2; // Check if value is in range pointed by actual index\n\n    if (value >= rangeGroup[arrayIndex] && value <= rangeGroup[arrayIndex + 1]) {\n      return true;\n    }\n\n    if (value > rangeGroup[arrayIndex + 1]) {\n      // Search Right Side Of Array\n      startRange = middleRange + 1;\n    } else {\n      // Search Left Side Of Array\n      endRange = middleRange - 1;\n    }\n  }\n\n  return false;\n}\n/**\r\n * A.1 Unassigned code points in Unicode 3.2\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-A.1\r\n */\n\n\nvar unassigned_code_points = [0x0221, 0x0221, 0x0234, 0x024f, 0x02ae, 0x02af, 0x02ef, 0x02ff, 0x0350, 0x035f, 0x0370, 0x0373, 0x0376, 0x0379, 0x037b, 0x037d, 0x037f, 0x0383, 0x038b, 0x038b, 0x038d, 0x038d, 0x03a2, 0x03a2, 0x03cf, 0x03cf, 0x03f7, 0x03ff, 0x0487, 0x0487, 0x04cf, 0x04cf, 0x04f6, 0x04f7, 0x04fa, 0x04ff, 0x0510, 0x0530, 0x0557, 0x0558, 0x0560, 0x0560, 0x0588, 0x0588, 0x058b, 0x0590, 0x05a2, 0x05a2, 0x05ba, 0x05ba, 0x05c5, 0x05cf, 0x05eb, 0x05ef, 0x05f5, 0x060b, 0x060d, 0x061a, 0x061c, 0x061e, 0x0620, 0x0620, 0x063b, 0x063f, 0x0656, 0x065f, 0x06ee, 0x06ef, 0x06ff, 0x06ff, 0x070e, 0x070e, 0x072d, 0x072f, 0x074b, 0x077f, 0x07b2, 0x0900, 0x0904, 0x0904, 0x093a, 0x093b, 0x094e, 0x094f, 0x0955, 0x0957, 0x0971, 0x0980, 0x0984, 0x0984, 0x098d, 0x098e, 0x0991, 0x0992, 0x09a9, 0x09a9, 0x09b1, 0x09b1, 0x09b3, 0x09b5, 0x09ba, 0x09bb, 0x09bd, 0x09bd, 0x09c5, 0x09c6, 0x09c9, 0x09ca, 0x09ce, 0x09d6, 0x09d8, 0x09db, 0x09de, 0x09de, 0x09e4, 0x09e5, 0x09fb, 0x0a01, 0x0a03, 0x0a04, 0x0a0b, 0x0a0e, 0x0a11, 0x0a12, 0x0a29, 0x0a29, 0x0a31, 0x0a31, 0x0a34, 0x0a34, 0x0a37, 0x0a37, 0x0a3a, 0x0a3b, 0x0a3d, 0x0a3d, 0x0a43, 0x0a46, 0x0a49, 0x0a4a, 0x0a4e, 0x0a58, 0x0a5d, 0x0a5d, 0x0a5f, 0x0a65, 0x0a75, 0x0a80, 0x0a84, 0x0a84, 0x0a8c, 0x0a8c, 0x0a8e, 0x0a8e, 0x0a92, 0x0a92, 0x0aa9, 0x0aa9, 0x0ab1, 0x0ab1, 0x0ab4, 0x0ab4, 0x0aba, 0x0abb, 0x0ac6, 0x0ac6, 0x0aca, 0x0aca, 0x0ace, 0x0acf, 0x0ad1, 0x0adf, 0x0ae1, 0x0ae5, 0x0af0, 0x0b00, 0x0b04, 0x0b04, 0x0b0d, 0x0b0e, 0x0b11, 0x0b12, 0x0b29, 0x0b29, 0x0b31, 0x0b31, 0x0b34, 0x0b35, 0x0b3a, 0x0b3b, 0x0b44, 0x0b46, 0x0b49, 0x0b4a, 0x0b4e, 0x0b55, 0x0b58, 0x0b5b, 0x0b5e, 0x0b5e, 0x0b62, 0x0b65, 0x0b71, 0x0b81, 0x0b84, 0x0b84, 0x0b8b, 0x0b8d, 0x0b91, 0x0b91, 0x0b96, 0x0b98, 0x0b9b, 0x0b9b, 0x0b9d, 0x0b9d, 0x0ba0, 0x0ba2, 0x0ba5, 0x0ba7, 0x0bab, 0x0bad, 0x0bb6, 0x0bb6, 0x0bba, 0x0bbd, 0x0bc3, 0x0bc5, 0x0bc9, 0x0bc9, 0x0bce, 0x0bd6, 0x0bd8, 0x0be6, 0x0bf3, 0x0c00, 0x0c04, 0x0c04, 0x0c0d, 0x0c0d, 0x0c11, 0x0c11, 0x0c29, 0x0c29, 0x0c34, 0x0c34, 0x0c3a, 0x0c3d, 0x0c45, 0x0c45, 0x0c49, 0x0c49, 0x0c4e, 0x0c54, 0x0c57, 0x0c5f, 0x0c62, 0x0c65, 0x0c70, 0x0c81, 0x0c84, 0x0c84, 0x0c8d, 0x0c8d, 0x0c91, 0x0c91, 0x0ca9, 0x0ca9, 0x0cb4, 0x0cb4, 0x0cba, 0x0cbd, 0x0cc5, 0x0cc5, 0x0cc9, 0x0cc9, 0x0cce, 0x0cd4, 0x0cd7, 0x0cdd, 0x0cdf, 0x0cdf, 0x0ce2, 0x0ce5, 0x0cf0, 0x0d01, 0x0d04, 0x0d04, 0x0d0d, 0x0d0d, 0x0d11, 0x0d11, 0x0d29, 0x0d29, 0x0d3a, 0x0d3d, 0x0d44, 0x0d45, 0x0d49, 0x0d49, 0x0d4e, 0x0d56, 0x0d58, 0x0d5f, 0x0d62, 0x0d65, 0x0d70, 0x0d81, 0x0d84, 0x0d84, 0x0d97, 0x0d99, 0x0db2, 0x0db2, 0x0dbc, 0x0dbc, 0x0dbe, 0x0dbf, 0x0dc7, 0x0dc9, 0x0dcb, 0x0dce, 0x0dd5, 0x0dd5, 0x0dd7, 0x0dd7, 0x0de0, 0x0df1, 0x0df5, 0x0e00, 0x0e3b, 0x0e3e, 0x0e5c, 0x0e80, 0x0e83, 0x0e83, 0x0e85, 0x0e86, 0x0e89, 0x0e89, 0x0e8b, 0x0e8c, 0x0e8e, 0x0e93, 0x0e98, 0x0e98, 0x0ea0, 0x0ea0, 0x0ea4, 0x0ea4, 0x0ea6, 0x0ea6, 0x0ea8, 0x0ea9, 0x0eac, 0x0eac, 0x0eba, 0x0eba, 0x0ebe, 0x0ebf, 0x0ec5, 0x0ec5, 0x0ec7, 0x0ec7, 0x0ece, 0x0ecf, 0x0eda, 0x0edb, 0x0ede, 0x0eff, 0x0f48, 0x0f48, 0x0f6b, 0x0f70, 0x0f8c, 0x0f8f, 0x0f98, 0x0f98, 0x0fbd, 0x0fbd, 0x0fcd, 0x0fce, 0x0fd0, 0x0fff, 0x1022, 0x1022, 0x1028, 0x1028, 0x102b, 0x102b, 0x1033, 0x1035, 0x103a, 0x103f, 0x105a, 0x109f, 0x10c6, 0x10cf, 0x10f9, 0x10fa, 0x10fc, 0x10ff, 0x115a, 0x115e, 0x11a3, 0x11a7, 0x11fa, 0x11ff, 0x1207, 0x1207, 0x1247, 0x1247, 0x1249, 0x1249, 0x124e, 0x124f, 0x1257, 0x1257, 0x1259, 0x1259, 0x125e, 0x125f, 0x1287, 0x1287, 0x1289, 0x1289, 0x128e, 0x128f, 0x12af, 0x12af, 0x12b1, 0x12b1, 0x12b6, 0x12b7, 0x12bf, 0x12bf, 0x12c1, 0x12c1, 0x12c6, 0x12c7, 0x12cf, 0x12cf, 0x12d7, 0x12d7, 0x12ef, 0x12ef, 0x130f, 0x130f, 0x1311, 0x1311, 0x1316, 0x1317, 0x131f, 0x131f, 0x1347, 0x1347, 0x135b, 0x1360, 0x137d, 0x139f, 0x13f5, 0x1400, 0x1677, 0x167f, 0x169d, 0x169f, 0x16f1, 0x16ff, 0x170d, 0x170d, 0x1715, 0x171f, 0x1737, 0x173f, 0x1754, 0x175f, 0x176d, 0x176d, 0x1771, 0x1771, 0x1774, 0x177f, 0x17dd, 0x17df, 0x17ea, 0x17ff, 0x180f, 0x180f, 0x181a, 0x181f, 0x1878, 0x187f, 0x18aa, 0x1dff, 0x1e9c, 0x1e9f, 0x1efa, 0x1eff, 0x1f16, 0x1f17, 0x1f1e, 0x1f1f, 0x1f46, 0x1f47, 0x1f4e, 0x1f4f, 0x1f58, 0x1f58, 0x1f5a, 0x1f5a, 0x1f5c, 0x1f5c, 0x1f5e, 0x1f5e, 0x1f7e, 0x1f7f, 0x1fb5, 0x1fb5, 0x1fc5, 0x1fc5, 0x1fd4, 0x1fd5, 0x1fdc, 0x1fdc, 0x1ff0, 0x1ff1, 0x1ff5, 0x1ff5, 0x1fff, 0x1fff, 0x2053, 0x2056, 0x2058, 0x205e, 0x2064, 0x2069, 0x2072, 0x2073, 0x208f, 0x209f, 0x20b2, 0x20cf, 0x20eb, 0x20ff, 0x213b, 0x213c, 0x214c, 0x2152, 0x2184, 0x218f, 0x23cf, 0x23ff, 0x2427, 0x243f, 0x244b, 0x245f, 0x24ff, 0x24ff, 0x2614, 0x2615, 0x2618, 0x2618, 0x267e, 0x267f, 0x268a, 0x2700, 0x2705, 0x2705, 0x270a, 0x270b, 0x2728, 0x2728, 0x274c, 0x274c, 0x274e, 0x274e, 0x2753, 0x2755, 0x2757, 0x2757, 0x275f, 0x2760, 0x2795, 0x2797, 0x27b0, 0x27b0, 0x27bf, 0x27cf, 0x27ec, 0x27ef, 0x2b00, 0x2e7f, 0x2e9a, 0x2e9a, 0x2ef4, 0x2eff, 0x2fd6, 0x2fef, 0x2ffc, 0x2fff, 0x3040, 0x3040, 0x3097, 0x3098, 0x3100, 0x3104, 0x312d, 0x3130, 0x318f, 0x318f, 0x31b8, 0x31ef, 0x321d, 0x321f, 0x3244, 0x3250, 0x327c, 0x327e, 0x32cc, 0x32cf, 0x32ff, 0x32ff, 0x3377, 0x337a, 0x33de, 0x33df, 0x33ff, 0x33ff, 0x4db6, 0x4dff, 0x9fa6, 0x9fff, 0xa48d, 0xa48f, 0xa4c7, 0xabff, 0xd7a4, 0xd7ff, 0xfa2e, 0xfa2f, 0xfa6b, 0xfaff, 0xfb07, 0xfb12, 0xfb18, 0xfb1c, 0xfb37, 0xfb37, 0xfb3d, 0xfb3d, 0xfb3f, 0xfb3f, 0xfb42, 0xfb42, 0xfb45, 0xfb45, 0xfbb2, 0xfbd2, 0xfd40, 0xfd4f, 0xfd90, 0xfd91, 0xfdc8, 0xfdcf, 0xfdfd, 0xfdff, 0xfe10, 0xfe1f, 0xfe24, 0xfe2f, 0xfe47, 0xfe48, 0xfe53, 0xfe53, 0xfe67, 0xfe67, 0xfe6c, 0xfe6f, 0xfe75, 0xfe75, 0xfefd, 0xfefe, 0xff00, 0xff00, 0xffbf, 0xffc1, 0xffc8, 0xffc9, 0xffd0, 0xffd1, 0xffd8, 0xffd9, 0xffdd, 0xffdf, 0xffe7, 0xffe7, 0xffef, 0xfff8, 0x10000, 0x102ff, 0x1031f, 0x1031f, 0x10324, 0x1032f, 0x1034b, 0x103ff, 0x10426, 0x10427, 0x1044e, 0x1cfff, 0x1d0f6, 0x1d0ff, 0x1d127, 0x1d129, 0x1d1de, 0x1d3ff, 0x1d455, 0x1d455, 0x1d49d, 0x1d49d, 0x1d4a0, 0x1d4a1, 0x1d4a3, 0x1d4a4, 0x1d4a7, 0x1d4a8, 0x1d4ad, 0x1d4ad, 0x1d4ba, 0x1d4ba, 0x1d4bc, 0x1d4bc, 0x1d4c1, 0x1d4c1, 0x1d4c4, 0x1d4c4, 0x1d506, 0x1d506, 0x1d50b, 0x1d50c, 0x1d515, 0x1d515, 0x1d51d, 0x1d51d, 0x1d53a, 0x1d53a, 0x1d53f, 0x1d53f, 0x1d545, 0x1d545, 0x1d547, 0x1d549, 0x1d551, 0x1d551, 0x1d6a4, 0x1d6a7, 0x1d7ca, 0x1d7cd, 0x1d800, 0x1fffd, 0x2a6d7, 0x2f7ff, 0x2fa1e, 0x2fffd, 0x30000, 0x3fffd, 0x40000, 0x4fffd, 0x50000, 0x5fffd, 0x60000, 0x6fffd, 0x70000, 0x7fffd, 0x80000, 0x8fffd, 0x90000, 0x9fffd, 0xa0000, 0xafffd, 0xb0000, 0xbfffd, 0xc0000, 0xcfffd, 0xd0000, 0xdfffd, 0xe0000, 0xe0000, 0xe0002, 0xe001f, 0xe0080, 0xefffd]; // prettier-ignore-end\n\nvar isUnassignedCodePoint = function isUnassignedCodePoint(character) {\n  return inRange(character, unassigned_code_points);\n}; // prettier-ignore-start\n\n/**\r\n * B.1 Commonly mapped to nothing\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-B.1\r\n */\n\n\nvar commonly_mapped_to_nothing = [0x00ad, 0x00ad, 0x034f, 0x034f, 0x1806, 0x1806, 0x180b, 0x180b, 0x180c, 0x180c, 0x180d, 0x180d, 0x200b, 0x200b, 0x200c, 0x200c, 0x200d, 0x200d, 0x2060, 0x2060, 0xfe00, 0xfe00, 0xfe01, 0xfe01, 0xfe02, 0xfe02, 0xfe03, 0xfe03, 0xfe04, 0xfe04, 0xfe05, 0xfe05, 0xfe06, 0xfe06, 0xfe07, 0xfe07, 0xfe08, 0xfe08, 0xfe09, 0xfe09, 0xfe0a, 0xfe0a, 0xfe0b, 0xfe0b, 0xfe0c, 0xfe0c, 0xfe0d, 0xfe0d, 0xfe0e, 0xfe0e, 0xfe0f, 0xfe0f, 0xfeff, 0xfeff]; // prettier-ignore-end\n\nvar isCommonlyMappedToNothing = function isCommonlyMappedToNothing(character) {\n  return inRange(character, commonly_mapped_to_nothing);\n}; // prettier-ignore-start\n\n/**\r\n * C.1.2 Non-ASCII space characters\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.1.2\r\n */\n\n\nvar non_ASCII_space_characters = [0x00a0, 0x00a0\n/* NO-BREAK SPACE */\n, 0x1680, 0x1680\n/* OGHAM SPACE MARK */\n, 0x2000, 0x2000\n/* EN QUAD */\n, 0x2001, 0x2001\n/* EM QUAD */\n, 0x2002, 0x2002\n/* EN SPACE */\n, 0x2003, 0x2003\n/* EM SPACE */\n, 0x2004, 0x2004\n/* THREE-PER-EM SPACE */\n, 0x2005, 0x2005\n/* FOUR-PER-EM SPACE */\n, 0x2006, 0x2006\n/* SIX-PER-EM SPACE */\n, 0x2007, 0x2007\n/* FIGURE SPACE */\n, 0x2008, 0x2008\n/* PUNCTUATION SPACE */\n, 0x2009, 0x2009\n/* THIN SPACE */\n, 0x200a, 0x200a\n/* HAIR SPACE */\n, 0x200b, 0x200b\n/* ZERO WIDTH SPACE */\n, 0x202f, 0x202f\n/* NARROW NO-BREAK SPACE */\n, 0x205f, 0x205f\n/* MEDIUM MATHEMATICAL SPACE */\n, 0x3000, 0x3000\n/* IDEOGRAPHIC SPACE */\n]; // prettier-ignore-end\n\nvar isNonASCIISpaceCharacter = function isNonASCIISpaceCharacter(character) {\n  return inRange(character, non_ASCII_space_characters);\n}; // prettier-ignore-start\n\n\nvar non_ASCII_controls_characters = [\n/**\r\n * C.2.2 Non-ASCII control characters\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.2.2\r\n */\n0x0080, 0x009f\n/* [CONTROL CHARACTERS] */\n, 0x06dd, 0x06dd\n/* ARABIC END OF AYAH */\n, 0x070f, 0x070f\n/* SYRIAC ABBREVIATION MARK */\n, 0x180e, 0x180e\n/* MONGOLIAN VOWEL SEPARATOR */\n, 0x200c, 0x200c\n/* ZERO WIDTH NON-JOINER */\n, 0x200d, 0x200d\n/* ZERO WIDTH JOINER */\n, 0x2028, 0x2028\n/* LINE SEPARATOR */\n, 0x2029, 0x2029\n/* PARAGRAPH SEPARATOR */\n, 0x2060, 0x2060\n/* WORD JOINER */\n, 0x2061, 0x2061\n/* FUNCTION APPLICATION */\n, 0x2062, 0x2062\n/* INVISIBLE TIMES */\n, 0x2063, 0x2063\n/* INVISIBLE SEPARATOR */\n, 0x206a, 0x206f\n/* [CONTROL CHARACTERS] */\n, 0xfeff, 0xfeff\n/* ZERO WIDTH NO-BREAK SPACE */\n, 0xfff9, 0xfffc\n/* [CONTROL CHARACTERS] */\n, 0x1d173, 0x1d17a\n/* [MUSICAL CONTROL CHARACTERS] */\n];\nvar non_character_codepoints = [\n/**\r\n * C.4 Non-character code points\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.4\r\n */\n0xfdd0, 0xfdef\n/* [NONCHARACTER CODE POINTS] */\n, 0xfffe, 0xffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x1fffe, 0x1ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x2fffe, 0x2ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x3fffe, 0x3ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x4fffe, 0x4ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x5fffe, 0x5ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x6fffe, 0x6ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x7fffe, 0x7ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x8fffe, 0x8ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x9fffe, 0x9ffff\n/* [NONCHARACTER CODE POINTS] */\n, 0xafffe, 0xaffff\n/* [NONCHARACTER CODE POINTS] */\n, 0xbfffe, 0xbffff\n/* [NONCHARACTER CODE POINTS] */\n, 0xcfffe, 0xcffff\n/* [NONCHARACTER CODE POINTS] */\n, 0xdfffe, 0xdffff\n/* [NONCHARACTER CODE POINTS] */\n, 0xefffe, 0xeffff\n/* [NONCHARACTER CODE POINTS] */\n, 0x10fffe, 0x10ffff\n/* [NONCHARACTER CODE POINTS] */\n];\n/**\r\n * 2.3.  Prohibited Output\r\n */\n\nvar prohibited_characters = [\n/**\r\n * C.2.1 ASCII control characters\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.2.1\r\n */\n0, 0x001f\n/* [CONTROL CHARACTERS] */\n, 0x007f, 0x007f\n/* DELETE */\n,\n/**\r\n * C.8 Change display properties or are deprecated\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.8\r\n */\n0x0340, 0x0340\n/* COMBINING GRAVE TONE MARK */\n, 0x0341, 0x0341\n/* COMBINING ACUTE TONE MARK */\n, 0x200e, 0x200e\n/* LEFT-TO-RIGHT MARK */\n, 0x200f, 0x200f\n/* RIGHT-TO-LEFT MARK */\n, 0x202a, 0x202a\n/* LEFT-TO-RIGHT EMBEDDING */\n, 0x202b, 0x202b\n/* RIGHT-TO-LEFT EMBEDDING */\n, 0x202c, 0x202c\n/* POP DIRECTIONAL FORMATTING */\n, 0x202d, 0x202d\n/* LEFT-TO-RIGHT OVERRIDE */\n, 0x202e, 0x202e\n/* RIGHT-TO-LEFT OVERRIDE */\n, 0x206a, 0x206a\n/* INHIBIT SYMMETRIC SWAPPING */\n, 0x206b, 0x206b\n/* ACTIVATE SYMMETRIC SWAPPING */\n, 0x206c, 0x206c\n/* INHIBIT ARABIC FORM SHAPING */\n, 0x206d, 0x206d\n/* ACTIVATE ARABIC FORM SHAPING */\n, 0x206e, 0x206e\n/* NATIONAL DIGIT SHAPES */\n, 0x206f, 0x206f\n/* NOMINAL DIGIT SHAPES */\n,\n/**\r\n * C.7 Inappropriate for canonical representation\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.7\r\n */\n0x2ff0, 0x2ffb\n/* [IDEOGRAPHIC DESCRIPTION CHARACTERS] */\n,\n/**\r\n * C.5 Surrogate codes\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.5\r\n */\n0xd800, 0xdfff,\n/**\r\n * C.3 Private use\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.3\r\n */\n0xe000, 0xf8ff\n/* [PRIVATE USE, PLANE 0] */\n,\n/**\r\n * C.6 Inappropriate for plain text\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.6\r\n */\n0xfff9, 0xfff9\n/* INTERLINEAR ANNOTATION ANCHOR */\n, 0xfffa, 0xfffa\n/* INTERLINEAR ANNOTATION SEPARATOR */\n, 0xfffb, 0xfffb\n/* INTERLINEAR ANNOTATION TERMINATOR */\n, 0xfffc, 0xfffc\n/* OBJECT REPLACEMENT CHARACTER */\n, 0xfffd, 0xfffd\n/* REPLACEMENT CHARACTER */\n,\n/**\r\n * C.9 Tagging characters\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.9\r\n */\n0xe0001, 0xe0001\n/* LANGUAGE TAG */\n, 0xe0020, 0xe007f\n/* [TAGGING CHARACTERS] */\n,\n/**\r\n * C.3 Private use\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.3\r\n */\n0xf0000, 0xffffd\n/* [PRIVATE USE, PLANE 15] */\n, 0x100000, 0x10fffd\n/* [PRIVATE USE, PLANE 16] */\n]; // prettier-ignore-end\n\nvar isProhibitedCharacter = function isProhibitedCharacter(character) {\n  return inRange(character, non_ASCII_space_characters) || inRange(character, prohibited_characters) || inRange(character, non_ASCII_controls_characters) || inRange(character, non_character_codepoints);\n}; // prettier-ignore-start\n\n/**\r\n * D.1 Characters with bidirectional property \"R\" or \"AL\"\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-D.1\r\n */\n\n\nvar bidirectional_r_al = [0x05be, 0x05be, 0x05c0, 0x05c0, 0x05c3, 0x05c3, 0x05d0, 0x05ea, 0x05f0, 0x05f4, 0x061b, 0x061b, 0x061f, 0x061f, 0x0621, 0x063a, 0x0640, 0x064a, 0x066d, 0x066f, 0x0671, 0x06d5, 0x06dd, 0x06dd, 0x06e5, 0x06e6, 0x06fa, 0x06fe, 0x0700, 0x070d, 0x0710, 0x0710, 0x0712, 0x072c, 0x0780, 0x07a5, 0x07b1, 0x07b1, 0x200f, 0x200f, 0xfb1d, 0xfb1d, 0xfb1f, 0xfb28, 0xfb2a, 0xfb36, 0xfb38, 0xfb3c, 0xfb3e, 0xfb3e, 0xfb40, 0xfb41, 0xfb43, 0xfb44, 0xfb46, 0xfbb1, 0xfbd3, 0xfd3d, 0xfd50, 0xfd8f, 0xfd92, 0xfdc7, 0xfdf0, 0xfdfc, 0xfe70, 0xfe74, 0xfe76, 0xfefc]; // prettier-ignore-end\n\nvar isBidirectionalRAL = function isBidirectionalRAL(character) {\n  return inRange(character, bidirectional_r_al);\n}; // prettier-ignore-start\n\n/**\r\n * D.2 Characters with bidirectional property \"L\"\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-D.2\r\n */\n\n\nvar bidirectional_l = [0x0041, 0x005a, 0x0061, 0x007a, 0x00aa, 0x00aa, 0x00b5, 0x00b5, 0x00ba, 0x00ba, 0x00c0, 0x00d6, 0x00d8, 0x00f6, 0x00f8, 0x0220, 0x0222, 0x0233, 0x0250, 0x02ad, 0x02b0, 0x02b8, 0x02bb, 0x02c1, 0x02d0, 0x02d1, 0x02e0, 0x02e4, 0x02ee, 0x02ee, 0x037a, 0x037a, 0x0386, 0x0386, 0x0388, 0x038a, 0x038c, 0x038c, 0x038e, 0x03a1, 0x03a3, 0x03ce, 0x03d0, 0x03f5, 0x0400, 0x0482, 0x048a, 0x04ce, 0x04d0, 0x04f5, 0x04f8, 0x04f9, 0x0500, 0x050f, 0x0531, 0x0556, 0x0559, 0x055f, 0x0561, 0x0587, 0x0589, 0x0589, 0x0903, 0x0903, 0x0905, 0x0939, 0x093d, 0x0940, 0x0949, 0x094c, 0x0950, 0x0950, 0x0958, 0x0961, 0x0964, 0x0970, 0x0982, 0x0983, 0x0985, 0x098c, 0x098f, 0x0990, 0x0993, 0x09a8, 0x09aa, 0x09b0, 0x09b2, 0x09b2, 0x09b6, 0x09b9, 0x09be, 0x09c0, 0x09c7, 0x09c8, 0x09cb, 0x09cc, 0x09d7, 0x09d7, 0x09dc, 0x09dd, 0x09df, 0x09e1, 0x09e6, 0x09f1, 0x09f4, 0x09fa, 0x0a05, 0x0a0a, 0x0a0f, 0x0a10, 0x0a13, 0x0a28, 0x0a2a, 0x0a30, 0x0a32, 0x0a33, 0x0a35, 0x0a36, 0x0a38, 0x0a39, 0x0a3e, 0x0a40, 0x0a59, 0x0a5c, 0x0a5e, 0x0a5e, 0x0a66, 0x0a6f, 0x0a72, 0x0a74, 0x0a83, 0x0a83, 0x0a85, 0x0a8b, 0x0a8d, 0x0a8d, 0x0a8f, 0x0a91, 0x0a93, 0x0aa8, 0x0aaa, 0x0ab0, 0x0ab2, 0x0ab3, 0x0ab5, 0x0ab9, 0x0abd, 0x0ac0, 0x0ac9, 0x0ac9, 0x0acb, 0x0acc, 0x0ad0, 0x0ad0, 0x0ae0, 0x0ae0, 0x0ae6, 0x0aef, 0x0b02, 0x0b03, 0x0b05, 0x0b0c, 0x0b0f, 0x0b10, 0x0b13, 0x0b28, 0x0b2a, 0x0b30, 0x0b32, 0x0b33, 0x0b36, 0x0b39, 0x0b3d, 0x0b3e, 0x0b40, 0x0b40, 0x0b47, 0x0b48, 0x0b4b, 0x0b4c, 0x0b57, 0x0b57, 0x0b5c, 0x0b5d, 0x0b5f, 0x0b61, 0x0b66, 0x0b70, 0x0b83, 0x0b83, 0x0b85, 0x0b8a, 0x0b8e, 0x0b90, 0x0b92, 0x0b95, 0x0b99, 0x0b9a, 0x0b9c, 0x0b9c, 0x0b9e, 0x0b9f, 0x0ba3, 0x0ba4, 0x0ba8, 0x0baa, 0x0bae, 0x0bb5, 0x0bb7, 0x0bb9, 0x0bbe, 0x0bbf, 0x0bc1, 0x0bc2, 0x0bc6, 0x0bc8, 0x0bca, 0x0bcc, 0x0bd7, 0x0bd7, 0x0be7, 0x0bf2, 0x0c01, 0x0c03, 0x0c05, 0x0c0c, 0x0c0e, 0x0c10, 0x0c12, 0x0c28, 0x0c2a, 0x0c33, 0x0c35, 0x0c39, 0x0c41, 0x0c44, 0x0c60, 0x0c61, 0x0c66, 0x0c6f, 0x0c82, 0x0c83, 0x0c85, 0x0c8c, 0x0c8e, 0x0c90, 0x0c92, 0x0ca8, 0x0caa, 0x0cb3, 0x0cb5, 0x0cb9, 0x0cbe, 0x0cbe, 0x0cc0, 0x0cc4, 0x0cc7, 0x0cc8, 0x0cca, 0x0ccb, 0x0cd5, 0x0cd6, 0x0cde, 0x0cde, 0x0ce0, 0x0ce1, 0x0ce6, 0x0cef, 0x0d02, 0x0d03, 0x0d05, 0x0d0c, 0x0d0e, 0x0d10, 0x0d12, 0x0d28, 0x0d2a, 0x0d39, 0x0d3e, 0x0d40, 0x0d46, 0x0d48, 0x0d4a, 0x0d4c, 0x0d57, 0x0d57, 0x0d60, 0x0d61, 0x0d66, 0x0d6f, 0x0d82, 0x0d83, 0x0d85, 0x0d96, 0x0d9a, 0x0db1, 0x0db3, 0x0dbb, 0x0dbd, 0x0dbd, 0x0dc0, 0x0dc6, 0x0dcf, 0x0dd1, 0x0dd8, 0x0ddf, 0x0df2, 0x0df4, 0x0e01, 0x0e30, 0x0e32, 0x0e33, 0x0e40, 0x0e46, 0x0e4f, 0x0e5b, 0x0e81, 0x0e82, 0x0e84, 0x0e84, 0x0e87, 0x0e88, 0x0e8a, 0x0e8a, 0x0e8d, 0x0e8d, 0x0e94, 0x0e97, 0x0e99, 0x0e9f, 0x0ea1, 0x0ea3, 0x0ea5, 0x0ea5, 0x0ea7, 0x0ea7, 0x0eaa, 0x0eab, 0x0ead, 0x0eb0, 0x0eb2, 0x0eb3, 0x0ebd, 0x0ebd, 0x0ec0, 0x0ec4, 0x0ec6, 0x0ec6, 0x0ed0, 0x0ed9, 0x0edc, 0x0edd, 0x0f00, 0x0f17, 0x0f1a, 0x0f34, 0x0f36, 0x0f36, 0x0f38, 0x0f38, 0x0f3e, 0x0f47, 0x0f49, 0x0f6a, 0x0f7f, 0x0f7f, 0x0f85, 0x0f85, 0x0f88, 0x0f8b, 0x0fbe, 0x0fc5, 0x0fc7, 0x0fcc, 0x0fcf, 0x0fcf, 0x1000, 0x1021, 0x1023, 0x1027, 0x1029, 0x102a, 0x102c, 0x102c, 0x1031, 0x1031, 0x1038, 0x1038, 0x1040, 0x1057, 0x10a0, 0x10c5, 0x10d0, 0x10f8, 0x10fb, 0x10fb, 0x1100, 0x1159, 0x115f, 0x11a2, 0x11a8, 0x11f9, 0x1200, 0x1206, 0x1208, 0x1246, 0x1248, 0x1248, 0x124a, 0x124d, 0x1250, 0x1256, 0x1258, 0x1258, 0x125a, 0x125d, 0x1260, 0x1286, 0x1288, 0x1288, 0x128a, 0x128d, 0x1290, 0x12ae, 0x12b0, 0x12b0, 0x12b2, 0x12b5, 0x12b8, 0x12be, 0x12c0, 0x12c0, 0x12c2, 0x12c5, 0x12c8, 0x12ce, 0x12d0, 0x12d6, 0x12d8, 0x12ee, 0x12f0, 0x130e, 0x1310, 0x1310, 0x1312, 0x1315, 0x1318, 0x131e, 0x1320, 0x1346, 0x1348, 0x135a, 0x1361, 0x137c, 0x13a0, 0x13f4, 0x1401, 0x1676, 0x1681, 0x169a, 0x16a0, 0x16f0, 0x1700, 0x170c, 0x170e, 0x1711, 0x1720, 0x1731, 0x1735, 0x1736, 0x1740, 0x1751, 0x1760, 0x176c, 0x176e, 0x1770, 0x1780, 0x17b6, 0x17be, 0x17c5, 0x17c7, 0x17c8, 0x17d4, 0x17da, 0x17dc, 0x17dc, 0x17e0, 0x17e9, 0x1810, 0x1819, 0x1820, 0x1877, 0x1880, 0x18a8, 0x1e00, 0x1e9b, 0x1ea0, 0x1ef9, 0x1f00, 0x1f15, 0x1f18, 0x1f1d, 0x1f20, 0x1f45, 0x1f48, 0x1f4d, 0x1f50, 0x1f57, 0x1f59, 0x1f59, 0x1f5b, 0x1f5b, 0x1f5d, 0x1f5d, 0x1f5f, 0x1f7d, 0x1f80, 0x1fb4, 0x1fb6, 0x1fbc, 0x1fbe, 0x1fbe, 0x1fc2, 0x1fc4, 0x1fc6, 0x1fcc, 0x1fd0, 0x1fd3, 0x1fd6, 0x1fdb, 0x1fe0, 0x1fec, 0x1ff2, 0x1ff4, 0x1ff6, 0x1ffc, 0x200e, 0x200e, 0x2071, 0x2071, 0x207f, 0x207f, 0x2102, 0x2102, 0x2107, 0x2107, 0x210a, 0x2113, 0x2115, 0x2115, 0x2119, 0x211d, 0x2124, 0x2124, 0x2126, 0x2126, 0x2128, 0x2128, 0x212a, 0x212d, 0x212f, 0x2131, 0x2133, 0x2139, 0x213d, 0x213f, 0x2145, 0x2149, 0x2160, 0x2183, 0x2336, 0x237a, 0x2395, 0x2395, 0x249c, 0x24e9, 0x3005, 0x3007, 0x3021, 0x3029, 0x3031, 0x3035, 0x3038, 0x303c, 0x3041, 0x3096, 0x309d, 0x309f, 0x30a1, 0x30fa, 0x30fc, 0x30ff, 0x3105, 0x312c, 0x3131, 0x318e, 0x3190, 0x31b7, 0x31f0, 0x321c, 0x3220, 0x3243, 0x3260, 0x327b, 0x327f, 0x32b0, 0x32c0, 0x32cb, 0x32d0, 0x32fe, 0x3300, 0x3376, 0x337b, 0x33dd, 0x33e0, 0x33fe, 0x3400, 0x4db5, 0x4e00, 0x9fa5, 0xa000, 0xa48c, 0xac00, 0xd7a3, 0xd800, 0xfa2d, 0xfa30, 0xfa6a, 0xfb00, 0xfb06, 0xfb13, 0xfb17, 0xff21, 0xff3a, 0xff41, 0xff5a, 0xff66, 0xffbe, 0xffc2, 0xffc7, 0xffca, 0xffcf, 0xffd2, 0xffd7, 0xffda, 0xffdc, 0x10300, 0x1031e, 0x10320, 0x10323, 0x10330, 0x1034a, 0x10400, 0x10425, 0x10428, 0x1044d, 0x1d000, 0x1d0f5, 0x1d100, 0x1d126, 0x1d12a, 0x1d166, 0x1d16a, 0x1d172, 0x1d183, 0x1d184, 0x1d18c, 0x1d1a9, 0x1d1ae, 0x1d1dd, 0x1d400, 0x1d454, 0x1d456, 0x1d49c, 0x1d49e, 0x1d49f, 0x1d4a2, 0x1d4a2, 0x1d4a5, 0x1d4a6, 0x1d4a9, 0x1d4ac, 0x1d4ae, 0x1d4b9, 0x1d4bb, 0x1d4bb, 0x1d4bd, 0x1d4c0, 0x1d4c2, 0x1d4c3, 0x1d4c5, 0x1d505, 0x1d507, 0x1d50a, 0x1d50d, 0x1d514, 0x1d516, 0x1d51c, 0x1d51e, 0x1d539, 0x1d53b, 0x1d53e, 0x1d540, 0x1d544, 0x1d546, 0x1d546, 0x1d54a, 0x1d550, 0x1d552, 0x1d6a3, 0x1d6a8, 0x1d7c9, 0x20000, 0x2a6d6, 0x2f800, 0x2fa1d, 0xf0000, 0xffffd, 0x100000, 0x10fffd]; // prettier-ignore-end\n\nvar isBidirectionalL = function isBidirectionalL(character) {\n  return inRange(character, bidirectional_l);\n};\n/**\r\n * non-ASCII space characters [StringPrep, C.1.2] that can be\r\n * mapped to SPACE (U+0020)\r\n */\n\n\nvar mapping2space = isNonASCIISpaceCharacter;\n/**\r\n * the \"commonly mapped to nothing\" characters [StringPrep, B.1]\r\n * that can be mapped to nothing.\r\n */\n\nvar mapping2nothing = isCommonlyMappedToNothing; // utils\n\nvar getCodePoint = function getCodePoint(character) {\n  return character.codePointAt(0);\n};\n\nvar first = function first(x) {\n  return x[0];\n};\n\nvar last = function last(x) {\n  return x[x.length - 1];\n};\n/**\r\n * Convert provided string into an array of Unicode Code Points.\r\n * Based on https://stackoverflow.com/a/21409165/1556249\r\n * and https://www.npmjs.com/package/code-point-at.\r\n * @param {string} input\r\n * @returns {number[]}\r\n */\n\n\nfunction toCodePoints(input) {\n  var codepoints = [];\n  var size = input.length;\n\n  for (var i = 0; i < size; i += 1) {\n    var before = input.charCodeAt(i);\n\n    if (before >= 0xd800 && before <= 0xdbff && size > i + 1) {\n      var next = input.charCodeAt(i + 1);\n\n      if (next >= 0xdc00 && next <= 0xdfff) {\n        codepoints.push((before - 0xd800) * 0x400 + next - 0xdc00 + 0x10000);\n        i += 1;\n        continue;\n      }\n    }\n\n    codepoints.push(before);\n  }\n\n  return codepoints;\n}\n/**\r\n * SASLprep.\r\n * @param {string} input\r\n * @param {Object} opts\r\n * @param {boolean} opts.allowUnassigned\r\n * @returns {string}\r\n */\n\n\nfunction saslprep(input) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (typeof input !== 'string') {\n    throw new TypeError('Expected string.');\n  }\n\n  if (input.length === 0) {\n    return '';\n  } // 1. Map\n\n\n  var mapped_input = toCodePoints(input) // 1.1 mapping to space\n  .map(function (character) {\n    return mapping2space(character) ? 0x20 : character;\n  }) // 1.2 mapping to nothing\n  .filter(function (character) {\n    return !mapping2nothing(character);\n  }); // 2. Normalize\n\n  var normalized_input = String.fromCodePoint.apply(null, mapped_input).normalize('NFKC');\n  var normalized_map = toCodePoints(normalized_input); // 3. Prohibit\n\n  var hasProhibited = normalized_map.some(isProhibitedCharacter);\n\n  if (hasProhibited) {\n    throw new Error('Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3');\n  } // Unassigned Code Points\n\n\n  if (opts.allowUnassigned !== true) {\n    var hasUnassigned = normalized_map.some(isUnassignedCodePoint);\n\n    if (hasUnassigned) {\n      throw new Error('Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5');\n    }\n  } // 4. check bidi\n\n\n  var hasBidiRAL = normalized_map.some(isBidirectionalRAL);\n  var hasBidiL = normalized_map.some(isBidirectionalL); // 4.1 If a string contains any RandALCat character, the string MUST NOT\n  // contain any LCat character.\n\n  if (hasBidiRAL && hasBidiL) {\n    throw new Error('String must not contain RandALCat and LCat at the same time,' + ' see https://tools.ietf.org/html/rfc3454#section-6');\n  }\n  /**\r\n   * 4.2 If a string contains any RandALCat character, a RandALCat\r\n   * character MUST be the first character of the string, and a\r\n   * RandALCat character MUST be the last character of the string.\r\n   */\n\n\n  var isFirstBidiRAL = isBidirectionalRAL(getCodePoint(first(normalized_input)));\n  var isLastBidiRAL = isBidirectionalRAL(getCodePoint(last(normalized_input)));\n\n  if (hasBidiRAL && !(isFirstBidiRAL && isLastBidiRAL)) {\n    throw new Error('Bidirectional RandALCat character must be the first and the last' + ' character of the string, see https://tools.ietf.org/html/rfc3454#section-6');\n  }\n\n  return normalized_input;\n}\n\nvar PDFSecurity = /*#__PURE__*/function () {\n  _createClass(PDFSecurity, null, [{\n    key: \"generateFileID\",\n    value: function generateFileID() {\n      var info = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var infoStr = \"\".concat(info.CreationDate.getTime(), \"\\n\");\n\n      for (var key in info) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (!info.hasOwnProperty(key)) {\n          continue;\n        }\n\n        infoStr += \"\".concat(key, \": \").concat(info[key].valueOf(), \"\\n\");\n      }\n\n      return wordArrayToBuffer(CryptoJS.MD5(infoStr));\n    }\n  }, {\n    key: \"generateRandomWordArray\",\n    value: function generateRandomWordArray(bytes) {\n      return CryptoJS.lib.WordArray.random(bytes);\n    }\n  }, {\n    key: \"create\",\n    value: function create(document) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!options.ownerPassword && !options.userPassword) {\n        return null;\n      }\n\n      return new PDFSecurity(document, options);\n    }\n  }]);\n\n  function PDFSecurity(document) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PDFSecurity);\n\n    if (!options.ownerPassword && !options.userPassword) {\n      throw new Error('None of owner password and user password is defined.');\n    }\n\n    this.document = document;\n\n    this._setupEncryption(options);\n  }\n\n  _createClass(PDFSecurity, [{\n    key: \"_setupEncryption\",\n    value: function _setupEncryption(options) {\n      switch (options.pdfVersion) {\n        case '1.4':\n        case '1.5':\n          this.version = 2;\n          break;\n\n        case '1.6':\n        case '1.7':\n          this.version = 4;\n          break;\n\n        case '1.7ext3':\n          this.version = 5;\n          break;\n\n        default:\n          this.version = 1;\n          break;\n      }\n\n      var encDict = {\n        Filter: 'Standard'\n      };\n\n      switch (this.version) {\n        case 1:\n        case 2:\n        case 4:\n          this._setupEncryptionV1V2V4(this.version, encDict, options);\n\n          break;\n\n        case 5:\n          this._setupEncryptionV5(encDict, options);\n\n          break;\n      }\n\n      this.dictionary = this.document.ref(encDict);\n    }\n  }, {\n    key: \"_setupEncryptionV1V2V4\",\n    value: function _setupEncryptionV1V2V4(v, encDict, options) {\n      var r, permissions;\n\n      switch (v) {\n        case 1:\n          r = 2;\n          this.keyBits = 40;\n          permissions = getPermissionsR2(options.permissions);\n          break;\n\n        case 2:\n          r = 3;\n          this.keyBits = 128;\n          permissions = getPermissionsR3(options.permissions);\n          break;\n\n        case 4:\n          r = 4;\n          this.keyBits = 128;\n          permissions = getPermissionsR3(options.permissions);\n          break;\n      }\n\n      var paddedUserPassword = processPasswordR2R3R4(options.userPassword);\n      var paddedOwnerPassword = options.ownerPassword ? processPasswordR2R3R4(options.ownerPassword) : paddedUserPassword;\n      var ownerPasswordEntry = getOwnerPasswordR2R3R4(r, this.keyBits, paddedUserPassword, paddedOwnerPassword);\n      this.encryptionKey = getEncryptionKeyR2R3R4(r, this.keyBits, this.document._id, paddedUserPassword, ownerPasswordEntry, permissions);\n      var userPasswordEntry;\n\n      if (r === 2) {\n        userPasswordEntry = getUserPasswordR2(this.encryptionKey);\n      } else {\n        userPasswordEntry = getUserPasswordR3R4(this.document._id, this.encryptionKey);\n      }\n\n      encDict.V = v;\n\n      if (v >= 2) {\n        encDict.Length = this.keyBits;\n      }\n\n      if (v === 4) {\n        encDict.CF = {\n          StdCF: {\n            AuthEvent: 'DocOpen',\n            CFM: 'AESV2',\n            Length: this.keyBits / 8\n          }\n        };\n        encDict.StmF = 'StdCF';\n        encDict.StrF = 'StdCF';\n      }\n\n      encDict.R = r;\n      encDict.O = wordArrayToBuffer(ownerPasswordEntry);\n      encDict.U = wordArrayToBuffer(userPasswordEntry);\n      encDict.P = permissions;\n    }\n  }, {\n    key: \"_setupEncryptionV5\",\n    value: function _setupEncryptionV5(encDict, options) {\n      this.keyBits = 256;\n      var permissions = getPermissionsR3(options.permissions);\n      var processedUserPassword = processPasswordR5(options.userPassword);\n      var processedOwnerPassword = options.ownerPassword ? processPasswordR5(options.ownerPassword) : processedUserPassword;\n      this.encryptionKey = getEncryptionKeyR5(PDFSecurity.generateRandomWordArray);\n      var userPasswordEntry = getUserPasswordR5(processedUserPassword, PDFSecurity.generateRandomWordArray);\n      var userKeySalt = CryptoJS.lib.WordArray.create(userPasswordEntry.words.slice(10, 12), 8);\n      var userEncryptionKeyEntry = getUserEncryptionKeyR5(processedUserPassword, userKeySalt, this.encryptionKey);\n      var ownerPasswordEntry = getOwnerPasswordR5(processedOwnerPassword, userPasswordEntry, PDFSecurity.generateRandomWordArray);\n      var ownerKeySalt = CryptoJS.lib.WordArray.create(ownerPasswordEntry.words.slice(10, 12), 8);\n      var ownerEncryptionKeyEntry = getOwnerEncryptionKeyR5(processedOwnerPassword, ownerKeySalt, userPasswordEntry, this.encryptionKey);\n      var permsEntry = getEncryptedPermissionsR5(permissions, this.encryptionKey, PDFSecurity.generateRandomWordArray);\n      encDict.V = 5;\n      encDict.Length = this.keyBits;\n      encDict.CF = {\n        StdCF: {\n          AuthEvent: 'DocOpen',\n          CFM: 'AESV3',\n          Length: this.keyBits / 8\n        }\n      };\n      encDict.StmF = 'StdCF';\n      encDict.StrF = 'StdCF';\n      encDict.R = 5;\n      encDict.O = wordArrayToBuffer(ownerPasswordEntry);\n      encDict.OE = wordArrayToBuffer(ownerEncryptionKeyEntry);\n      encDict.U = wordArrayToBuffer(userPasswordEntry);\n      encDict.UE = wordArrayToBuffer(userEncryptionKeyEntry);\n      encDict.P = permissions;\n      encDict.Perms = wordArrayToBuffer(permsEntry);\n    }\n  }, {\n    key: \"getEncryptFn\",\n    value: function getEncryptFn(obj, gen) {\n      var digest;\n\n      if (this.version < 5) {\n        digest = this.encryptionKey.clone().concat(CryptoJS.lib.WordArray.create([(obj & 0xff) << 24 | (obj & 0xff00) << 8 | obj >> 8 & 0xff00 | gen & 0xff, (gen & 0xff00) << 16], 5));\n      }\n\n      if (this.version === 1 || this.version === 2) {\n        var _key = CryptoJS.MD5(digest);\n\n        _key.sigBytes = Math.min(16, this.keyBits / 8 + 5);\n        return function (buffer) {\n          return wordArrayToBuffer(CryptoJS.RC4.encrypt(CryptoJS.lib.WordArray.create(buffer), _key).ciphertext);\n        };\n      }\n\n      var key;\n\n      if (this.version === 4) {\n        key = CryptoJS.MD5(digest.concat(CryptoJS.lib.WordArray.create([0x73416c54], 4)));\n      } else {\n        key = this.encryptionKey;\n      }\n\n      var iv = PDFSecurity.generateRandomWordArray(16);\n      var options = {\n        mode: CryptoJS.mode.CBC,\n        padding: CryptoJS.pad.Pkcs7,\n        iv: iv\n      };\n      return function (buffer) {\n        return wordArrayToBuffer(iv.clone().concat(CryptoJS.AES.encrypt(CryptoJS.lib.WordArray.create(buffer), key, options).ciphertext));\n      };\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      this.dictionary.end();\n    }\n  }]);\n\n  return PDFSecurity;\n}();\n\nfunction getPermissionsR2() {\n  var permissionObject = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var permissions = 0xffffffc0 >> 0;\n\n  if (permissionObject.printing) {\n    permissions |= 4;\n  }\n\n  if (permissionObject.modifying) {\n    permissions |= 8;\n  }\n\n  if (permissionObject.copying) {\n    permissions |= 16;\n  }\n\n  if (permissionObject.annotating) {\n    permissions |= 32;\n  }\n\n  return permissions;\n}\n\nfunction getPermissionsR3() {\n  var permissionObject = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var permissions = 0xfffff0c0 >> 0;\n\n  if (permissionObject.printing === 'lowResolution') {\n    permissions |= 4;\n  }\n\n  if (permissionObject.printing === 'highResolution') {\n    permissions |= 2052;\n  }\n\n  if (permissionObject.modifying) {\n    permissions |= 8;\n  }\n\n  if (permissionObject.copying) {\n    permissions |= 16;\n  }\n\n  if (permissionObject.annotating) {\n    permissions |= 32;\n  }\n\n  if (permissionObject.fillingForms) {\n    permissions |= 256;\n  }\n\n  if (permissionObject.contentAccessibility) {\n    permissions |= 512;\n  }\n\n  if (permissionObject.documentAssembly) {\n    permissions |= 1024;\n  }\n\n  return permissions;\n}\n\nfunction getUserPasswordR2(encryptionKey) {\n  return CryptoJS.RC4.encrypt(processPasswordR2R3R4(), encryptionKey).ciphertext;\n}\n\nfunction getUserPasswordR3R4(documentId, encryptionKey) {\n  var key = encryptionKey.clone();\n  var cipher = CryptoJS.MD5(processPasswordR2R3R4().concat(CryptoJS.lib.WordArray.create(documentId)));\n\n  for (var i = 0; i < 20; i++) {\n    var xorRound = Math.ceil(key.sigBytes / 4);\n\n    for (var j = 0; j < xorRound; j++) {\n      key.words[j] = encryptionKey.words[j] ^ (i | i << 8 | i << 16 | i << 24);\n    }\n\n    cipher = CryptoJS.RC4.encrypt(cipher, key).ciphertext;\n  }\n\n  return cipher.concat(CryptoJS.lib.WordArray.create(null, 16));\n}\n\nfunction getOwnerPasswordR2R3R4(r, keyBits, paddedUserPassword, paddedOwnerPassword) {\n  var digest = paddedOwnerPassword;\n  var round = r >= 3 ? 51 : 1;\n\n  for (var i = 0; i < round; i++) {\n    digest = CryptoJS.MD5(digest);\n  }\n\n  var key = digest.clone();\n  key.sigBytes = keyBits / 8;\n  var cipher = paddedUserPassword;\n  round = r >= 3 ? 20 : 1;\n\n  for (var _i = 0; _i < round; _i++) {\n    var xorRound = Math.ceil(key.sigBytes / 4);\n\n    for (var j = 0; j < xorRound; j++) {\n      key.words[j] = digest.words[j] ^ (_i | _i << 8 | _i << 16 | _i << 24);\n    }\n\n    cipher = CryptoJS.RC4.encrypt(cipher, key).ciphertext;\n  }\n\n  return cipher;\n}\n\nfunction getEncryptionKeyR2R3R4(r, keyBits, documentId, paddedUserPassword, ownerPasswordEntry, permissions) {\n  var key = paddedUserPassword.clone().concat(ownerPasswordEntry).concat(CryptoJS.lib.WordArray.create([lsbFirstWord(permissions)], 4)).concat(CryptoJS.lib.WordArray.create(documentId));\n  var round = r >= 3 ? 51 : 1;\n\n  for (var i = 0; i < round; i++) {\n    key = CryptoJS.MD5(key);\n    key.sigBytes = keyBits / 8;\n  }\n\n  return key;\n}\n\nfunction getUserPasswordR5(processedUserPassword, generateRandomWordArray) {\n  var validationSalt = generateRandomWordArray(8);\n  var keySalt = generateRandomWordArray(8);\n  return CryptoJS.SHA256(processedUserPassword.clone().concat(validationSalt)).concat(validationSalt).concat(keySalt);\n}\n\nfunction getUserEncryptionKeyR5(processedUserPassword, userKeySalt, encryptionKey) {\n  var key = CryptoJS.SHA256(processedUserPassword.clone().concat(userKeySalt));\n  var options = {\n    mode: CryptoJS.mode.CBC,\n    padding: CryptoJS.pad.NoPadding,\n    iv: CryptoJS.lib.WordArray.create(null, 16)\n  };\n  return CryptoJS.AES.encrypt(encryptionKey, key, options).ciphertext;\n}\n\nfunction getOwnerPasswordR5(processedOwnerPassword, userPasswordEntry, generateRandomWordArray) {\n  var validationSalt = generateRandomWordArray(8);\n  var keySalt = generateRandomWordArray(8);\n  return CryptoJS.SHA256(processedOwnerPassword.clone().concat(validationSalt).concat(userPasswordEntry)).concat(validationSalt).concat(keySalt);\n}\n\nfunction getOwnerEncryptionKeyR5(processedOwnerPassword, ownerKeySalt, userPasswordEntry, encryptionKey) {\n  var key = CryptoJS.SHA256(processedOwnerPassword.clone().concat(ownerKeySalt).concat(userPasswordEntry));\n  var options = {\n    mode: CryptoJS.mode.CBC,\n    padding: CryptoJS.pad.NoPadding,\n    iv: CryptoJS.lib.WordArray.create(null, 16)\n  };\n  return CryptoJS.AES.encrypt(encryptionKey, key, options).ciphertext;\n}\n\nfunction getEncryptionKeyR5(generateRandomWordArray) {\n  return generateRandomWordArray(32);\n}\n\nfunction getEncryptedPermissionsR5(permissions, encryptionKey, generateRandomWordArray) {\n  var cipher = CryptoJS.lib.WordArray.create([lsbFirstWord(permissions), 0xffffffff, 0x54616462], 12).concat(generateRandomWordArray(4));\n  var options = {\n    mode: CryptoJS.mode.ECB,\n    padding: CryptoJS.pad.NoPadding\n  };\n  return CryptoJS.AES.encrypt(cipher, encryptionKey, options).ciphertext;\n}\n\nfunction processPasswordR2R3R4() {\n  var password = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var out = Buffer.alloc(32);\n  var length = password.length;\n  var index = 0;\n\n  while (index < length && index < 32) {\n    var code = password.charCodeAt(index);\n\n    if (code > 0xff) {\n      throw new Error('Password contains one or more invalid characters.');\n    }\n\n    out[index] = code;\n    index++;\n  }\n\n  while (index < 32) {\n    out[index] = PASSWORD_PADDING[index - length];\n    index++;\n  }\n\n  return CryptoJS.lib.WordArray.create(out);\n}\n\nfunction processPasswordR5() {\n  var password = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  password = unescape(encodeURIComponent(saslprep(password)));\n  var length = Math.min(127, password.length);\n  var out = Buffer.alloc(length);\n\n  for (var i = 0; i < length; i++) {\n    out[i] = password.charCodeAt(i);\n  }\n\n  return CryptoJS.lib.WordArray.create(out);\n}\n\nfunction lsbFirstWord(data) {\n  return (data & 0xff) << 24 | (data & 0xff00) << 8 | data >> 8 & 0xff00 | data >> 24 & 0xff;\n}\n\nfunction wordArrayToBuffer(wordArray) {\n  var byteArray = [];\n\n  for (var i = 0; i < wordArray.sigBytes; i++) {\n    byteArray.push(wordArray.words[Math.floor(i / 4)] >> 8 * (3 - i % 4) & 0xff);\n  }\n\n  return Buffer.from(byteArray);\n}\n\nvar PASSWORD_PADDING = [0x28, 0xbf, 0x4e, 0x5e, 0x4e, 0x75, 0x8a, 0x41, 0x64, 0x00, 0x4e, 0x56, 0xff, 0xfa, 0x01, 0x08, 0x2e, 0x2e, 0x00, 0xb6, 0xd0, 0x68, 0x3e, 0x80, 0x2f, 0x0c, 0xa9, 0xfe, 0x64, 0x53, 0x69, 0x7a];\nvar number = PDFObject.number;\n\nvar PDFGradient = /*#__PURE__*/function () {\n  function PDFGradient(doc) {\n    _classCallCheck(this, PDFGradient);\n\n    this.doc = doc;\n    this.stops = [];\n    this.embedded = false;\n    this.transform = [1, 0, 0, 1, 0, 0];\n  }\n\n  _createClass(PDFGradient, [{\n    key: \"stop\",\n    value: function stop(pos, color, opacity) {\n      if (opacity == null) {\n        opacity = 1;\n      }\n\n      color = this.doc._normalizeColor(color);\n\n      if (this.stops.length === 0) {\n        if (color.length === 3) {\n          this._colorSpace = 'DeviceRGB';\n        } else if (color.length === 4) {\n          this._colorSpace = 'DeviceCMYK';\n        } else if (color.length === 1) {\n          this._colorSpace = 'DeviceGray';\n        } else {\n          throw new Error('Unknown color space');\n        }\n      } else if (this._colorSpace === 'DeviceRGB' && color.length !== 3 || this._colorSpace === 'DeviceCMYK' && color.length !== 4 || this._colorSpace === 'DeviceGray' && color.length !== 1) {\n        throw new Error('All gradient stops must use the same color space');\n      }\n\n      opacity = Math.max(0, Math.min(1, opacity));\n      this.stops.push([pos, color, opacity]);\n      return this;\n    }\n  }, {\n    key: \"setTransform\",\n    value: function setTransform(m11, m12, m21, m22, dx, dy) {\n      this.transform = [m11, m12, m21, m22, dx, dy];\n      return this;\n    }\n  }, {\n    key: \"embed\",\n    value: function embed(m) {\n      var fn;\n      var stopsLength = this.stops.length;\n\n      if (stopsLength === 0) {\n        return;\n      }\n\n      this.embedded = true;\n      this.matrix = m; // if the last stop comes before 100%, add a copy at 100%\n\n      var last = this.stops[stopsLength - 1];\n\n      if (last[0] < 1) {\n        this.stops.push([1, last[1], last[2]]);\n      }\n\n      var bounds = [];\n      var encode = [];\n      var stops = [];\n\n      for (var i = 0; i < stopsLength - 1; i++) {\n        encode.push(0, 1);\n\n        if (i + 2 !== stopsLength) {\n          bounds.push(this.stops[i + 1][0]);\n        }\n\n        fn = this.doc.ref({\n          FunctionType: 2,\n          Domain: [0, 1],\n          C0: this.stops[i + 0][1],\n          C1: this.stops[i + 1][1],\n          N: 1\n        });\n        stops.push(fn);\n        fn.end();\n      } // if there are only two stops, we don't need a stitching function\n\n\n      if (stopsLength === 1) {\n        fn = stops[0];\n      } else {\n        fn = this.doc.ref({\n          FunctionType: 3,\n          // stitching function\n          Domain: [0, 1],\n          Functions: stops,\n          Bounds: bounds,\n          Encode: encode\n        });\n        fn.end();\n      }\n\n      this.id = \"Sh\".concat(++this.doc._gradCount);\n      var shader = this.shader(fn);\n      shader.end();\n      var pattern = this.doc.ref({\n        Type: 'Pattern',\n        PatternType: 2,\n        Shading: shader,\n        Matrix: this.matrix.map(number)\n      });\n      pattern.end();\n\n      if (this.stops.some(function (stop) {\n        return stop[2] < 1;\n      })) {\n        var grad = this.opacityGradient();\n        grad._colorSpace = 'DeviceGray';\n\n        var _iterator = _createForOfIteratorHelper(this.stops),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var stop = _step.value;\n            grad.stop(stop[0], [stop[2]]);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        grad = grad.embed(this.matrix);\n        var pageBBox = [0, 0, this.doc.page.width, this.doc.page.height];\n        var form = this.doc.ref({\n          Type: 'XObject',\n          Subtype: 'Form',\n          FormType: 1,\n          BBox: pageBBox,\n          Group: {\n            Type: 'Group',\n            S: 'Transparency',\n            CS: 'DeviceGray'\n          },\n          Resources: {\n            ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI'],\n            Pattern: {\n              Sh1: grad\n            }\n          }\n        });\n        form.write('/Pattern cs /Sh1 scn');\n        form.end(\"\".concat(pageBBox.join(' '), \" re f\"));\n        var gstate = this.doc.ref({\n          Type: 'ExtGState',\n          SMask: {\n            Type: 'Mask',\n            S: 'Luminosity',\n            G: form\n          }\n        });\n        gstate.end();\n        var opacityPattern = this.doc.ref({\n          Type: 'Pattern',\n          PatternType: 1,\n          PaintType: 1,\n          TilingType: 2,\n          BBox: pageBBox,\n          XStep: pageBBox[2],\n          YStep: pageBBox[3],\n          Resources: {\n            ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI'],\n            Pattern: {\n              Sh1: pattern\n            },\n            ExtGState: {\n              Gs1: gstate\n            }\n          }\n        });\n        opacityPattern.write('/Gs1 gs /Pattern cs /Sh1 scn');\n        opacityPattern.end(\"\".concat(pageBBox.join(' '), \" re f\"));\n        this.doc.page.patterns[this.id] = opacityPattern;\n      } else {\n        this.doc.page.patterns[this.id] = pattern;\n      }\n\n      return pattern;\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(op) {\n      // apply gradient transform to existing document ctm\n      var _this$doc$_ctm = _slicedToArray(this.doc._ctm, 6),\n          m0 = _this$doc$_ctm[0],\n          m1 = _this$doc$_ctm[1],\n          m2 = _this$doc$_ctm[2],\n          m3 = _this$doc$_ctm[3],\n          m4 = _this$doc$_ctm[4],\n          m5 = _this$doc$_ctm[5];\n\n      var _this$transform = _slicedToArray(this.transform, 6),\n          m11 = _this$transform[0],\n          m12 = _this$transform[1],\n          m21 = _this$transform[2],\n          m22 = _this$transform[3],\n          dx = _this$transform[4],\n          dy = _this$transform[5];\n\n      var m = [m0 * m11 + m2 * m12, m1 * m11 + m3 * m12, m0 * m21 + m2 * m22, m1 * m21 + m3 * m22, m0 * dx + m2 * dy + m4, m1 * dx + m3 * dy + m5];\n\n      if (!this.embedded || m.join(' ') !== this.matrix.join(' ')) {\n        this.embed(m);\n      }\n\n      return this.doc.addContent(\"/\".concat(this.id, \" \").concat(op));\n    }\n  }]);\n\n  return PDFGradient;\n}();\n\nvar PDFLinearGradient = /*#__PURE__*/function (_PDFGradient) {\n  _inherits(PDFLinearGradient, _PDFGradient);\n\n  var _super = _createSuper(PDFLinearGradient);\n\n  function PDFLinearGradient(doc, x1, y1, x2, y2) {\n    var _this;\n\n    _classCallCheck(this, PDFLinearGradient);\n\n    _this = _super.call(this, doc);\n    _this.x1 = x1;\n    _this.y1 = y1;\n    _this.x2 = x2;\n    _this.y2 = y2;\n    return _this;\n  }\n\n  _createClass(PDFLinearGradient, [{\n    key: \"shader\",\n    value: function shader(fn) {\n      return this.doc.ref({\n        ShadingType: 2,\n        ColorSpace: this._colorSpace,\n        Coords: [this.x1, this.y1, this.x2, this.y2],\n        Function: fn,\n        Extend: [true, true]\n      });\n    }\n  }, {\n    key: \"opacityGradient\",\n    value: function opacityGradient() {\n      return new PDFLinearGradient(this.doc, this.x1, this.y1, this.x2, this.y2);\n    }\n  }]);\n\n  return PDFLinearGradient;\n}(PDFGradient);\n\nvar PDFRadialGradient = /*#__PURE__*/function (_PDFGradient2) {\n  _inherits(PDFRadialGradient, _PDFGradient2);\n\n  var _super2 = _createSuper(PDFRadialGradient);\n\n  function PDFRadialGradient(doc, x1, y1, r1, x2, y2, r2) {\n    var _this2;\n\n    _classCallCheck(this, PDFRadialGradient);\n\n    _this2 = _super2.call(this, doc);\n    _this2.doc = doc;\n    _this2.x1 = x1;\n    _this2.y1 = y1;\n    _this2.r1 = r1;\n    _this2.x2 = x2;\n    _this2.y2 = y2;\n    _this2.r2 = r2;\n    return _this2;\n  }\n\n  _createClass(PDFRadialGradient, [{\n    key: \"shader\",\n    value: function shader(fn) {\n      return this.doc.ref({\n        ShadingType: 3,\n        ColorSpace: this._colorSpace,\n        Coords: [this.x1, this.y1, this.r1, this.x2, this.y2, this.r2],\n        Function: fn,\n        Extend: [true, true]\n      });\n    }\n  }, {\n    key: \"opacityGradient\",\n    value: function opacityGradient() {\n      return new PDFRadialGradient(this.doc, this.x1, this.y1, this.r1, this.x2, this.y2, this.r2);\n    }\n  }]);\n\n  return PDFRadialGradient;\n}(PDFGradient);\n\nvar Gradient = {\n  PDFGradient: PDFGradient,\n  PDFLinearGradient: PDFLinearGradient,\n  PDFRadialGradient: PDFRadialGradient\n};\nvar PDFGradient$1 = Gradient.PDFGradient,\n    PDFLinearGradient$1 = Gradient.PDFLinearGradient,\n    PDFRadialGradient$1 = Gradient.PDFRadialGradient;\nvar ColorMixin = {\n  initColor: function initColor() {\n    // The opacity dictionaries\n    this._opacityRegistry = {};\n    this._opacityCount = 0;\n    return this._gradCount = 0;\n  },\n  _normalizeColor: function _normalizeColor(color) {\n    if (color instanceof PDFGradient$1) {\n      return color;\n    }\n\n    if (typeof color === 'string') {\n      if (color.charAt(0) === '#') {\n        if (color.length === 4) {\n          color = color.replace(/#([0-9A-F])([0-9A-F])([0-9A-F])/i, '#$1$1$2$2$3$3');\n        }\n\n        var hex = parseInt(color.slice(1), 16);\n        color = [hex >> 16, hex >> 8 & 0xff, hex & 0xff];\n      } else if (namedColors[color]) {\n        color = namedColors[color];\n      }\n    }\n\n    if (Array.isArray(color)) {\n      // RGB\n      if (color.length === 3) {\n        color = color.map(function (part) {\n          return part / 255;\n        }); // CMYK\n      } else if (color.length === 4) {\n        color = color.map(function (part) {\n          return part / 100;\n        });\n      }\n\n      return color;\n    }\n\n    return null;\n  },\n  _setColor: function _setColor(color, stroke) {\n    color = this._normalizeColor(color);\n\n    if (!color) {\n      return false;\n    }\n\n    var op = stroke ? 'SCN' : 'scn';\n\n    if (color instanceof PDFGradient$1) {\n      this._setColorSpace('Pattern', stroke);\n\n      color.apply(op);\n    } else {\n      var space = color.length === 4 ? 'DeviceCMYK' : 'DeviceRGB';\n\n      this._setColorSpace(space, stroke);\n\n      color = color.join(' ');\n      this.addContent(\"\".concat(color, \" \").concat(op));\n    }\n\n    return true;\n  },\n  _setColorSpace: function _setColorSpace(space, stroke) {\n    var op = stroke ? 'CS' : 'cs';\n    return this.addContent(\"/\".concat(space, \" \").concat(op));\n  },\n  fillColor: function fillColor(color, opacity) {\n    var set = this._setColor(color, false);\n\n    if (set) {\n      this.fillOpacity(opacity);\n    } // save this for text wrapper, which needs to reset\n    // the fill color on new pages\n\n\n    this._fillColor = [color, opacity];\n    return this;\n  },\n  strokeColor: function strokeColor(color, opacity) {\n    var set = this._setColor(color, true);\n\n    if (set) {\n      this.strokeOpacity(opacity);\n    }\n\n    return this;\n  },\n  opacity: function opacity(_opacity) {\n    this._doOpacity(_opacity, _opacity);\n\n    return this;\n  },\n  fillOpacity: function fillOpacity(opacity) {\n    this._doOpacity(opacity, null);\n\n    return this;\n  },\n  strokeOpacity: function strokeOpacity(opacity) {\n    this._doOpacity(null, opacity);\n\n    return this;\n  },\n  _doOpacity: function _doOpacity(fillOpacity, strokeOpacity) {\n    var dictionary, name;\n\n    if (fillOpacity == null && strokeOpacity == null) {\n      return;\n    }\n\n    if (fillOpacity != null) {\n      fillOpacity = Math.max(0, Math.min(1, fillOpacity));\n    }\n\n    if (strokeOpacity != null) {\n      strokeOpacity = Math.max(0, Math.min(1, strokeOpacity));\n    }\n\n    var key = \"\".concat(fillOpacity, \"_\").concat(strokeOpacity);\n\n    if (this._opacityRegistry[key]) {\n      var _this$_opacityRegistr = _slicedToArray(this._opacityRegistry[key], 2);\n\n      dictionary = _this$_opacityRegistr[0];\n      name = _this$_opacityRegistr[1];\n    } else {\n      dictionary = {\n        Type: 'ExtGState'\n      };\n\n      if (fillOpacity != null) {\n        dictionary.ca = fillOpacity;\n      }\n\n      if (strokeOpacity != null) {\n        dictionary.CA = strokeOpacity;\n      }\n\n      dictionary = this.ref(dictionary);\n      dictionary.end();\n      var id = ++this._opacityCount;\n      name = \"Gs\".concat(id);\n      this._opacityRegistry[key] = [dictionary, name];\n    }\n\n    this.page.ext_gstates[name] = dictionary;\n    return this.addContent(\"/\".concat(name, \" gs\"));\n  },\n  linearGradient: function linearGradient(x1, y1, x2, y2) {\n    return new PDFLinearGradient$1(this, x1, y1, x2, y2);\n  },\n  radialGradient: function radialGradient(x1, y1, r1, x2, y2, r2) {\n    return new PDFRadialGradient$1(this, x1, y1, r1, x2, y2, r2);\n  }\n};\nvar namedColors = {\n  aliceblue: [240, 248, 255],\n  antiquewhite: [250, 235, 215],\n  aqua: [0, 255, 255],\n  aquamarine: [127, 255, 212],\n  azure: [240, 255, 255],\n  beige: [245, 245, 220],\n  bisque: [255, 228, 196],\n  black: [0, 0, 0],\n  blanchedalmond: [255, 235, 205],\n  blue: [0, 0, 255],\n  blueviolet: [138, 43, 226],\n  brown: [165, 42, 42],\n  burlywood: [222, 184, 135],\n  cadetblue: [95, 158, 160],\n  chartreuse: [127, 255, 0],\n  chocolate: [210, 105, 30],\n  coral: [255, 127, 80],\n  cornflowerblue: [100, 149, 237],\n  cornsilk: [255, 248, 220],\n  crimson: [220, 20, 60],\n  cyan: [0, 255, 255],\n  darkblue: [0, 0, 139],\n  darkcyan: [0, 139, 139],\n  darkgoldenrod: [184, 134, 11],\n  darkgray: [169, 169, 169],\n  darkgreen: [0, 100, 0],\n  darkgrey: [169, 169, 169],\n  darkkhaki: [189, 183, 107],\n  darkmagenta: [139, 0, 139],\n  darkolivegreen: [85, 107, 47],\n  darkorange: [255, 140, 0],\n  darkorchid: [153, 50, 204],\n  darkred: [139, 0, 0],\n  darksalmon: [233, 150, 122],\n  darkseagreen: [143, 188, 143],\n  darkslateblue: [72, 61, 139],\n  darkslategray: [47, 79, 79],\n  darkslategrey: [47, 79, 79],\n  darkturquoise: [0, 206, 209],\n  darkviolet: [148, 0, 211],\n  deeppink: [255, 20, 147],\n  deepskyblue: [0, 191, 255],\n  dimgray: [105, 105, 105],\n  dimgrey: [105, 105, 105],\n  dodgerblue: [30, 144, 255],\n  firebrick: [178, 34, 34],\n  floralwhite: [255, 250, 240],\n  forestgreen: [34, 139, 34],\n  fuchsia: [255, 0, 255],\n  gainsboro: [220, 220, 220],\n  ghostwhite: [248, 248, 255],\n  gold: [255, 215, 0],\n  goldenrod: [218, 165, 32],\n  gray: [128, 128, 128],\n  grey: [128, 128, 128],\n  green: [0, 128, 0],\n  greenyellow: [173, 255, 47],\n  honeydew: [240, 255, 240],\n  hotpink: [255, 105, 180],\n  indianred: [205, 92, 92],\n  indigo: [75, 0, 130],\n  ivory: [255, 255, 240],\n  khaki: [240, 230, 140],\n  lavender: [230, 230, 250],\n  lavenderblush: [255, 240, 245],\n  lawngreen: [124, 252, 0],\n  lemonchiffon: [255, 250, 205],\n  lightblue: [173, 216, 230],\n  lightcoral: [240, 128, 128],\n  lightcyan: [224, 255, 255],\n  lightgoldenrodyellow: [250, 250, 210],\n  lightgray: [211, 211, 211],\n  lightgreen: [144, 238, 144],\n  lightgrey: [211, 211, 211],\n  lightpink: [255, 182, 193],\n  lightsalmon: [255, 160, 122],\n  lightseagreen: [32, 178, 170],\n  lightskyblue: [135, 206, 250],\n  lightslategray: [119, 136, 153],\n  lightslategrey: [119, 136, 153],\n  lightsteelblue: [176, 196, 222],\n  lightyellow: [255, 255, 224],\n  lime: [0, 255, 0],\n  limegreen: [50, 205, 50],\n  linen: [250, 240, 230],\n  magenta: [255, 0, 255],\n  maroon: [128, 0, 0],\n  mediumaquamarine: [102, 205, 170],\n  mediumblue: [0, 0, 205],\n  mediumorchid: [186, 85, 211],\n  mediumpurple: [147, 112, 219],\n  mediumseagreen: [60, 179, 113],\n  mediumslateblue: [123, 104, 238],\n  mediumspringgreen: [0, 250, 154],\n  mediumturquoise: [72, 209, 204],\n  mediumvioletred: [199, 21, 133],\n  midnightblue: [25, 25, 112],\n  mintcream: [245, 255, 250],\n  mistyrose: [255, 228, 225],\n  moccasin: [255, 228, 181],\n  navajowhite: [255, 222, 173],\n  navy: [0, 0, 128],\n  oldlace: [253, 245, 230],\n  olive: [128, 128, 0],\n  olivedrab: [107, 142, 35],\n  orange: [255, 165, 0],\n  orangered: [255, 69, 0],\n  orchid: [218, 112, 214],\n  palegoldenrod: [238, 232, 170],\n  palegreen: [152, 251, 152],\n  paleturquoise: [175, 238, 238],\n  palevioletred: [219, 112, 147],\n  papayawhip: [255, 239, 213],\n  peachpuff: [255, 218, 185],\n  peru: [205, 133, 63],\n  pink: [255, 192, 203],\n  plum: [221, 160, 221],\n  powderblue: [176, 224, 230],\n  purple: [128, 0, 128],\n  red: [255, 0, 0],\n  rosybrown: [188, 143, 143],\n  royalblue: [65, 105, 225],\n  saddlebrown: [139, 69, 19],\n  salmon: [250, 128, 114],\n  sandybrown: [244, 164, 96],\n  seagreen: [46, 139, 87],\n  seashell: [255, 245, 238],\n  sienna: [160, 82, 45],\n  silver: [192, 192, 192],\n  skyblue: [135, 206, 235],\n  slateblue: [106, 90, 205],\n  slategray: [112, 128, 144],\n  slategrey: [112, 128, 144],\n  snow: [255, 250, 250],\n  springgreen: [0, 255, 127],\n  steelblue: [70, 130, 180],\n  tan: [210, 180, 140],\n  teal: [0, 128, 128],\n  thistle: [216, 191, 216],\n  tomato: [255, 99, 71],\n  turquoise: [64, 224, 208],\n  violet: [238, 130, 238],\n  wheat: [245, 222, 179],\n  white: [255, 255, 255],\n  whitesmoke: [245, 245, 245],\n  yellow: [255, 255, 0],\n  yellowgreen: [154, 205, 50]\n};\nvar cx, cy, px, py, sx, sy;\ncx = cy = px = py = sx = sy = 0;\nvar parameters = {\n  A: 7,\n  a: 7,\n  C: 6,\n  c: 6,\n  H: 1,\n  h: 1,\n  L: 2,\n  l: 2,\n  M: 2,\n  m: 2,\n  Q: 4,\n  q: 4,\n  S: 4,\n  s: 4,\n  T: 2,\n  t: 2,\n  V: 1,\n  v: 1,\n  Z: 0,\n  z: 0\n};\n\nvar parse = function parse(path) {\n  var cmd;\n  var ret = [];\n  var args = [];\n  var curArg = '';\n  var foundDecimal = false;\n  var params = 0;\n\n  var _iterator = _createForOfIteratorHelper(path),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var c = _step.value;\n\n      if (parameters[c] != null) {\n        params = parameters[c];\n\n        if (cmd) {\n          // save existing command\n          if (curArg.length > 0) {\n            args[args.length] = +curArg;\n          }\n\n          ret[ret.length] = {\n            cmd: cmd,\n            args: args\n          };\n          args = [];\n          curArg = '';\n          foundDecimal = false;\n        }\n\n        cmd = c;\n      } else if ([' ', ','].includes(c) || c === '-' && curArg.length > 0 && curArg[curArg.length - 1] !== 'e' || c === '.' && foundDecimal) {\n        if (curArg.length === 0) {\n          continue;\n        }\n\n        if (args.length === params) {\n          // handle reused commands\n          ret[ret.length] = {\n            cmd: cmd,\n            args: args\n          };\n          args = [+curArg]; // handle assumed commands\n\n          if (cmd === 'M') {\n            cmd = 'L';\n          }\n\n          if (cmd === 'm') {\n            cmd = 'l';\n          }\n        } else {\n          args[args.length] = +curArg;\n        }\n\n        foundDecimal = c === '.'; // fix for negative numbers or repeated decimals with no delimeter between commands\n\n        curArg = ['-', '.'].includes(c) ? c : '';\n      } else {\n        curArg += c;\n\n        if (c === '.') {\n          foundDecimal = true;\n        }\n      }\n    } // add the last command\n\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  if (curArg.length > 0) {\n    if (args.length === params) {\n      // handle reused commands\n      ret[ret.length] = {\n        cmd: cmd,\n        args: args\n      };\n      args = [+curArg]; // handle assumed commands\n\n      if (cmd === 'M') {\n        cmd = 'L';\n      }\n\n      if (cmd === 'm') {\n        cmd = 'l';\n      }\n    } else {\n      args[args.length] = +curArg;\n    }\n  }\n\n  ret[ret.length] = {\n    cmd: cmd,\n    args: args\n  };\n  return ret;\n};\n\nvar _apply = function apply(commands, doc) {\n  // current point, control point, and subpath starting point\n  cx = cy = px = py = sx = sy = 0; // run the commands\n\n  for (var i = 0; i < commands.length; i++) {\n    var c = commands[i];\n\n    if (typeof runners[c.cmd] === 'function') {\n      runners[c.cmd](doc, c.args);\n    }\n  }\n};\n\nvar runners = {\n  M: function M(doc, a) {\n    cx = a[0];\n    cy = a[1];\n    px = py = null;\n    sx = cx;\n    sy = cy;\n    return doc.moveTo(cx, cy);\n  },\n  m: function m(doc, a) {\n    cx += a[0];\n    cy += a[1];\n    px = py = null;\n    sx = cx;\n    sy = cy;\n    return doc.moveTo(cx, cy);\n  },\n  C: function C(doc, a) {\n    cx = a[4];\n    cy = a[5];\n    px = a[2];\n    py = a[3];\n    return doc.bezierCurveTo.apply(doc, _toConsumableArray(a));\n  },\n  c: function c(doc, a) {\n    doc.bezierCurveTo(a[0] + cx, a[1] + cy, a[2] + cx, a[3] + cy, a[4] + cx, a[5] + cy);\n    px = cx + a[2];\n    py = cy + a[3];\n    cx += a[4];\n    return cy += a[5];\n  },\n  S: function S(doc, a) {\n    if (px === null) {\n      px = cx;\n      py = cy;\n    }\n\n    doc.bezierCurveTo(cx - (px - cx), cy - (py - cy), a[0], a[1], a[2], a[3]);\n    px = a[0];\n    py = a[1];\n    cx = a[2];\n    return cy = a[3];\n  },\n  s: function s(doc, a) {\n    if (px === null) {\n      px = cx;\n      py = cy;\n    }\n\n    doc.bezierCurveTo(cx - (px - cx), cy - (py - cy), cx + a[0], cy + a[1], cx + a[2], cy + a[3]);\n    px = cx + a[0];\n    py = cy + a[1];\n    cx += a[2];\n    return cy += a[3];\n  },\n  Q: function Q(doc, a) {\n    px = a[0];\n    py = a[1];\n    cx = a[2];\n    cy = a[3];\n    return doc.quadraticCurveTo(a[0], a[1], cx, cy);\n  },\n  q: function q(doc, a) {\n    doc.quadraticCurveTo(a[0] + cx, a[1] + cy, a[2] + cx, a[3] + cy);\n    px = cx + a[0];\n    py = cy + a[1];\n    cx += a[2];\n    return cy += a[3];\n  },\n  T: function T(doc, a) {\n    if (px === null) {\n      px = cx;\n      py = cy;\n    } else {\n      px = cx - (px - cx);\n      py = cy - (py - cy);\n    }\n\n    doc.quadraticCurveTo(px, py, a[0], a[1]);\n    px = cx - (px - cx);\n    py = cy - (py - cy);\n    cx = a[0];\n    return cy = a[1];\n  },\n  t: function t(doc, a) {\n    if (px === null) {\n      px = cx;\n      py = cy;\n    } else {\n      px = cx - (px - cx);\n      py = cy - (py - cy);\n    }\n\n    doc.quadraticCurveTo(px, py, cx + a[0], cy + a[1]);\n    cx += a[0];\n    return cy += a[1];\n  },\n  A: function A(doc, a) {\n    solveArc(doc, cx, cy, a);\n    cx = a[5];\n    return cy = a[6];\n  },\n  a: function a(doc, _a) {\n    _a[5] += cx;\n    _a[6] += cy;\n    solveArc(doc, cx, cy, _a);\n    cx = _a[5];\n    return cy = _a[6];\n  },\n  L: function L(doc, a) {\n    cx = a[0];\n    cy = a[1];\n    px = py = null;\n    return doc.lineTo(cx, cy);\n  },\n  l: function l(doc, a) {\n    cx += a[0];\n    cy += a[1];\n    px = py = null;\n    return doc.lineTo(cx, cy);\n  },\n  H: function H(doc, a) {\n    cx = a[0];\n    px = py = null;\n    return doc.lineTo(cx, cy);\n  },\n  h: function h(doc, a) {\n    cx += a[0];\n    px = py = null;\n    return doc.lineTo(cx, cy);\n  },\n  V: function V(doc, a) {\n    cy = a[0];\n    px = py = null;\n    return doc.lineTo(cx, cy);\n  },\n  v: function v(doc, a) {\n    cy += a[0];\n    px = py = null;\n    return doc.lineTo(cx, cy);\n  },\n  Z: function Z(doc) {\n    doc.closePath();\n    cx = sx;\n    return cy = sy;\n  },\n  z: function z(doc) {\n    doc.closePath();\n    cx = sx;\n    return cy = sy;\n  }\n};\n\nvar solveArc = function solveArc(doc, x, y, coords) {\n  var _coords = _slicedToArray(coords, 7),\n      rx = _coords[0],\n      ry = _coords[1],\n      rot = _coords[2],\n      large = _coords[3],\n      sweep = _coords[4],\n      ex = _coords[5],\n      ey = _coords[6];\n\n  var segs = arcToSegments(ex, ey, rx, ry, large, sweep, rot, x, y);\n\n  var _iterator2 = _createForOfIteratorHelper(segs),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var seg = _step2.value;\n      var bez = segmentToBezier.apply(void 0, _toConsumableArray(seg));\n      doc.bezierCurveTo.apply(doc, _toConsumableArray(bez));\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n}; // from Inkscape svgtopdf, thanks!\n\n\nvar arcToSegments = function arcToSegments(x, y, rx, ry, large, sweep, rotateX, ox, oy) {\n  var th = rotateX * (Math.PI / 180);\n  var sin_th = Math.sin(th);\n  var cos_th = Math.cos(th);\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  px = cos_th * (ox - x) * 0.5 + sin_th * (oy - y) * 0.5;\n  py = cos_th * (oy - y) * 0.5 - sin_th * (ox - x) * 0.5;\n  var pl = px * px / (rx * rx) + py * py / (ry * ry);\n\n  if (pl > 1) {\n    pl = Math.sqrt(pl);\n    rx *= pl;\n    ry *= pl;\n  }\n\n  var a00 = cos_th / rx;\n  var a01 = sin_th / rx;\n  var a10 = -sin_th / ry;\n  var a11 = cos_th / ry;\n  var x0 = a00 * ox + a01 * oy;\n  var y0 = a10 * ox + a11 * oy;\n  var x1 = a00 * x + a01 * y;\n  var y1 = a10 * x + a11 * y;\n  var d = (x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0);\n  var sfactor_sq = 1 / d - 0.25;\n\n  if (sfactor_sq < 0) {\n    sfactor_sq = 0;\n  }\n\n  var sfactor = Math.sqrt(sfactor_sq);\n\n  if (sweep === large) {\n    sfactor = -sfactor;\n  }\n\n  var xc = 0.5 * (x0 + x1) - sfactor * (y1 - y0);\n  var yc = 0.5 * (y0 + y1) + sfactor * (x1 - x0);\n  var th0 = Math.atan2(y0 - yc, x0 - xc);\n  var th1 = Math.atan2(y1 - yc, x1 - xc);\n  var th_arc = th1 - th0;\n\n  if (th_arc < 0 && sweep === 1) {\n    th_arc += 2 * Math.PI;\n  } else if (th_arc > 0 && sweep === 0) {\n    th_arc -= 2 * Math.PI;\n  }\n\n  var segments = Math.ceil(Math.abs(th_arc / (Math.PI * 0.5 + 0.001)));\n  var result = [];\n\n  for (var i = 0; i < segments; i++) {\n    var th2 = th0 + i * th_arc / segments;\n    var th3 = th0 + (i + 1) * th_arc / segments;\n    result[i] = [xc, yc, th2, th3, rx, ry, sin_th, cos_th];\n  }\n\n  return result;\n};\n\nvar segmentToBezier = function segmentToBezier(cx, cy, th0, th1, rx, ry, sin_th, cos_th) {\n  var a00 = cos_th * rx;\n  var a01 = -sin_th * ry;\n  var a10 = sin_th * rx;\n  var a11 = cos_th * ry;\n  var th_half = 0.5 * (th1 - th0);\n  var t = 8 / 3 * Math.sin(th_half * 0.5) * Math.sin(th_half * 0.5) / Math.sin(th_half);\n  var x1 = cx + Math.cos(th0) - t * Math.sin(th0);\n  var y1 = cy + Math.sin(th0) + t * Math.cos(th0);\n  var x3 = cx + Math.cos(th1);\n  var y3 = cy + Math.sin(th1);\n  var x2 = x3 + t * Math.sin(th1);\n  var y2 = y3 - t * Math.cos(th1);\n  return [a00 * x1 + a01 * y1, a10 * x1 + a11 * y1, a00 * x2 + a01 * y2, a10 * x2 + a11 * y2, a00 * x3 + a01 * y3, a10 * x3 + a11 * y3];\n};\n\nvar SVGPath = /*#__PURE__*/function () {\n  function SVGPath() {\n    _classCallCheck(this, SVGPath);\n  }\n\n  _createClass(SVGPath, null, [{\n    key: \"apply\",\n    value: function apply(doc, path) {\n      var commands = parse(path);\n\n      _apply(commands, doc);\n    }\n  }]);\n\n  return SVGPath;\n}();\n\nvar number$1 = PDFObject.number; // This constant is used to approximate a symmetrical arc using a cubic\n// Bezier curve.\n\nvar KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\nvar VectorMixin = {\n  initVector: function initVector() {\n    this._ctm = [1, 0, 0, 1, 0, 0]; // current transformation matrix\n\n    return this._ctmStack = [];\n  },\n  save: function save() {\n    this._ctmStack.push(this._ctm.slice()); // TODO: save/restore colorspace and styles so not setting it unnessesarily all the time?\n\n\n    return this.addContent('q');\n  },\n  restore: function restore() {\n    this._ctm = this._ctmStack.pop() || [1, 0, 0, 1, 0, 0];\n    return this.addContent('Q');\n  },\n  closePath: function closePath() {\n    return this.addContent('h');\n  },\n  lineWidth: function lineWidth(w) {\n    return this.addContent(\"\".concat(number$1(w), \" w\"));\n  },\n  _CAP_STYLES: {\n    BUTT: 0,\n    ROUND: 1,\n    SQUARE: 2\n  },\n  lineCap: function lineCap(c) {\n    if (typeof c === 'string') {\n      c = this._CAP_STYLES[c.toUpperCase()];\n    }\n\n    return this.addContent(\"\".concat(c, \" J\"));\n  },\n  _JOIN_STYLES: {\n    MITER: 0,\n    ROUND: 1,\n    BEVEL: 2\n  },\n  lineJoin: function lineJoin(j) {\n    if (typeof j === 'string') {\n      j = this._JOIN_STYLES[j.toUpperCase()];\n    }\n\n    return this.addContent(\"\".concat(j, \" j\"));\n  },\n  miterLimit: function miterLimit(m) {\n    return this.addContent(\"\".concat(number$1(m), \" M\"));\n  },\n  dash: function dash(length) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var originalLength = length;\n\n    if (!Array.isArray(length)) {\n      length = [length, options.space || length];\n    }\n\n    var valid = length.every(function (x) {\n      return Number.isFinite(x) && x > 0;\n    });\n\n    if (!valid) {\n      throw new Error(\"dash(\".concat(JSON.stringify(originalLength), \", \").concat(JSON.stringify(options), \") invalid, lengths must be numeric and greater than zero\"));\n    }\n\n    length = length.map(number$1).join(' ');\n    return this.addContent(\"[\".concat(length, \"] \").concat(number$1(options.phase || 0), \" d\"));\n  },\n  undash: function undash() {\n    return this.addContent('[] 0 d');\n  },\n  moveTo: function moveTo(x, y) {\n    return this.addContent(\"\".concat(number$1(x), \" \").concat(number$1(y), \" m\"));\n  },\n  lineTo: function lineTo(x, y) {\n    return this.addContent(\"\".concat(number$1(x), \" \").concat(number$1(y), \" l\"));\n  },\n  bezierCurveTo: function bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n    return this.addContent(\"\".concat(number$1(cp1x), \" \").concat(number$1(cp1y), \" \").concat(number$1(cp2x), \" \").concat(number$1(cp2y), \" \").concat(number$1(x), \" \").concat(number$1(y), \" c\"));\n  },\n  quadraticCurveTo: function quadraticCurveTo(cpx, cpy, x, y) {\n    return this.addContent(\"\".concat(number$1(cpx), \" \").concat(number$1(cpy), \" \").concat(number$1(x), \" \").concat(number$1(y), \" v\"));\n  },\n  rect: function rect(x, y, w, h) {\n    return this.addContent(\"\".concat(number$1(x), \" \").concat(number$1(y), \" \").concat(number$1(w), \" \").concat(number$1(h), \" re\"));\n  },\n  roundedRect: function roundedRect(x, y, w, h, r) {\n    if (r == null) {\n      r = 0;\n    }\n\n    r = Math.min(r, 0.5 * w, 0.5 * h); // amount to inset control points from corners (see `ellipse`)\n\n    var c = r * (1.0 - KAPPA);\n    this.moveTo(x + r, y);\n    this.lineTo(x + w - r, y);\n    this.bezierCurveTo(x + w - c, y, x + w, y + c, x + w, y + r);\n    this.lineTo(x + w, y + h - r);\n    this.bezierCurveTo(x + w, y + h - c, x + w - c, y + h, x + w - r, y + h);\n    this.lineTo(x + r, y + h);\n    this.bezierCurveTo(x + c, y + h, x, y + h - c, x, y + h - r);\n    this.lineTo(x, y + r);\n    this.bezierCurveTo(x, y + c, x + c, y, x + r, y);\n    return this.closePath();\n  },\n  ellipse: function ellipse(x, y, r1, r2) {\n    // based on http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas/2173084#2173084\n    if (r2 == null) {\n      r2 = r1;\n    }\n\n    x -= r1;\n    y -= r2;\n    var ox = r1 * KAPPA;\n    var oy = r2 * KAPPA;\n    var xe = x + r1 * 2;\n    var ye = y + r2 * 2;\n    var xm = x + r1;\n    var ym = y + r2;\n    this.moveTo(x, ym);\n    this.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n    this.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n    this.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n    this.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n    return this.closePath();\n  },\n  circle: function circle(x, y, radius) {\n    return this.ellipse(x, y, radius);\n  },\n  arc: function arc(x, y, radius, startAngle, endAngle, anticlockwise) {\n    if (anticlockwise == null) {\n      anticlockwise = false;\n    }\n\n    var TWO_PI = 2.0 * Math.PI;\n    var HALF_PI = 0.5 * Math.PI;\n    var deltaAng = endAngle - startAngle;\n\n    if (Math.abs(deltaAng) > TWO_PI) {\n      // draw only full circle if more than that is specified\n      deltaAng = TWO_PI;\n    } else if (deltaAng !== 0 && anticlockwise !== deltaAng < 0) {\n      // necessary to flip direction of rendering\n      var dir = anticlockwise ? -1 : 1;\n      deltaAng = dir * TWO_PI + deltaAng;\n    }\n\n    var numSegs = Math.ceil(Math.abs(deltaAng) / HALF_PI);\n    var segAng = deltaAng / numSegs;\n    var handleLen = segAng / HALF_PI * KAPPA * radius;\n    var curAng = startAngle; // component distances between anchor point and control point\n\n    var deltaCx = -Math.sin(curAng) * handleLen;\n    var deltaCy = Math.cos(curAng) * handleLen; // anchor point\n\n    var ax = x + Math.cos(curAng) * radius;\n    var ay = y + Math.sin(curAng) * radius; // calculate and render segments\n\n    this.moveTo(ax, ay);\n\n    for (var segIdx = 0; segIdx < numSegs; segIdx++) {\n      // starting control point\n      var cp1x = ax + deltaCx;\n      var cp1y = ay + deltaCy; // step angle\n\n      curAng += segAng; // next anchor point\n\n      ax = x + Math.cos(curAng) * radius;\n      ay = y + Math.sin(curAng) * radius; // next control point delta\n\n      deltaCx = -Math.sin(curAng) * handleLen;\n      deltaCy = Math.cos(curAng) * handleLen; // ending control point\n\n      var cp2x = ax - deltaCx;\n      var cp2y = ay - deltaCy; // render segment\n\n      this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, ax, ay);\n    }\n\n    return this;\n  },\n  polygon: function polygon() {\n    for (var _len = arguments.length, points = new Array(_len), _key = 0; _key < _len; _key++) {\n      points[_key] = arguments[_key];\n    }\n\n    this.moveTo.apply(this, _toConsumableArray(points.shift() || []));\n\n    for (var _i = 0, _points = points; _i < _points.length; _i++) {\n      var point = _points[_i];\n      this.lineTo.apply(this, _toConsumableArray(point || []));\n    }\n\n    return this.closePath();\n  },\n  path: function path(_path) {\n    SVGPath.apply(this, _path);\n    return this;\n  },\n  _windingRule: function _windingRule(rule) {\n    if (/even-?odd/.test(rule)) {\n      return '*';\n    }\n\n    return '';\n  },\n  fill: function fill(color, rule) {\n    if (/(even-?odd)|(non-?zero)/.test(color)) {\n      rule = color;\n      color = null;\n    }\n\n    if (color) {\n      this.fillColor(color);\n    }\n\n    return this.addContent(\"f\".concat(this._windingRule(rule)));\n  },\n  stroke: function stroke(color) {\n    if (color) {\n      this.strokeColor(color);\n    }\n\n    return this.addContent('S');\n  },\n  fillAndStroke: function fillAndStroke(fillColor, strokeColor, rule) {\n    if (strokeColor == null) {\n      strokeColor = fillColor;\n    }\n\n    var isFillRule = /(even-?odd)|(non-?zero)/;\n\n    if (isFillRule.test(fillColor)) {\n      rule = fillColor;\n      fillColor = null;\n    }\n\n    if (isFillRule.test(strokeColor)) {\n      rule = strokeColor;\n      strokeColor = fillColor;\n    }\n\n    if (fillColor) {\n      this.fillColor(fillColor);\n      this.strokeColor(strokeColor);\n    }\n\n    return this.addContent(\"B\".concat(this._windingRule(rule)));\n  },\n  clip: function clip(rule) {\n    return this.addContent(\"W\".concat(this._windingRule(rule), \" n\"));\n  },\n  transform: function transform(m11, m12, m21, m22, dx, dy) {\n    // keep track of the current transformation matrix\n    var m = this._ctm;\n\n    var _m = _slicedToArray(m, 6),\n        m0 = _m[0],\n        m1 = _m[1],\n        m2 = _m[2],\n        m3 = _m[3],\n        m4 = _m[4],\n        m5 = _m[5];\n\n    m[0] = m0 * m11 + m2 * m12;\n    m[1] = m1 * m11 + m3 * m12;\n    m[2] = m0 * m21 + m2 * m22;\n    m[3] = m1 * m21 + m3 * m22;\n    m[4] = m0 * dx + m2 * dy + m4;\n    m[5] = m1 * dx + m3 * dy + m5;\n    var values = [m11, m12, m21, m22, dx, dy].map(function (v) {\n      return number$1(v);\n    }).join(' ');\n    return this.addContent(\"\".concat(values, \" cm\"));\n  },\n  translate: function translate(x, y) {\n    return this.transform(1, 0, 0, 1, x, y);\n  },\n  rotate: function rotate(angle) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var y;\n    var rad = angle * Math.PI / 180;\n    var cos = Math.cos(rad);\n    var sin = Math.sin(rad);\n    var x = y = 0;\n\n    if (options.origin != null) {\n      var _options$origin = _slicedToArray(options.origin, 2);\n\n      x = _options$origin[0];\n      y = _options$origin[1];\n      var x1 = x * cos - y * sin;\n      var y1 = x * sin + y * cos;\n      x -= x1;\n      y -= y1;\n    }\n\n    return this.transform(cos, sin, -sin, cos, x, y);\n  },\n  scale: function scale(xFactor, yFactor) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var y;\n\n    if (yFactor == null) {\n      yFactor = xFactor;\n    }\n\n    if (typeof yFactor === 'object') {\n      options = yFactor;\n      yFactor = xFactor;\n    }\n\n    var x = y = 0;\n\n    if (options.origin != null) {\n      var _options$origin2 = _slicedToArray(options.origin, 2);\n\n      x = _options$origin2[0];\n      y = _options$origin2[1];\n      x -= xFactor * x;\n      y -= yFactor * y;\n    }\n\n    return this.transform(xFactor, 0, 0, yFactor, x, y);\n  }\n};\nvar WIN_ANSI_MAP = {\n  402: 131,\n  8211: 150,\n  8212: 151,\n  8216: 145,\n  8217: 146,\n  8218: 130,\n  8220: 147,\n  8221: 148,\n  8222: 132,\n  8224: 134,\n  8225: 135,\n  8226: 149,\n  8230: 133,\n  8364: 128,\n  8240: 137,\n  8249: 139,\n  8250: 155,\n  710: 136,\n  8482: 153,\n  338: 140,\n  339: 156,\n  732: 152,\n  352: 138,\n  353: 154,\n  376: 159,\n  381: 142,\n  382: 158\n};\nvar characters = \".notdef       .notdef        .notdef        .notdef\\n.notdef       .notdef        .notdef        .notdef\\n.notdef       .notdef        .notdef        .notdef\\n.notdef       .notdef        .notdef        .notdef\\n.notdef       .notdef        .notdef        .notdef\\n.notdef       .notdef        .notdef        .notdef\\n.notdef       .notdef        .notdef        .notdef\\n.notdef       .notdef        .notdef        .notdef\\n  \\nspace         exclam         quotedbl       numbersign\\ndollar        percent        ampersand      quotesingle\\nparenleft     parenright     asterisk       plus\\ncomma         hyphen         period         slash\\nzero          one            two            three\\nfour          five           six            seven\\neight         nine           colon          semicolon\\nless          equal          greater        question\\n  \\nat            A              B              C\\nD             E              F              G\\nH             I              J              K\\nL             M              N              O\\nP             Q              R              S\\nT             U              V              W\\nX             Y              Z              bracketleft\\nbackslash     bracketright   asciicircum    underscore\\n  \\ngrave         a              b              c\\nd             e              f              g\\nh             i              j              k\\nl             m              n              o\\np             q              r              s\\nt             u              v              w\\nx             y              z              braceleft\\nbar           braceright     asciitilde     .notdef\\n  \\nEuro          .notdef        quotesinglbase florin\\nquotedblbase  ellipsis       dagger         daggerdbl\\ncircumflex    perthousand    Scaron         guilsinglleft\\nOE            .notdef        Zcaron         .notdef\\n.notdef       quoteleft      quoteright     quotedblleft\\nquotedblright bullet         endash         emdash\\ntilde         trademark      scaron         guilsinglright\\noe            .notdef        zcaron         ydieresis\\n  \\nspace         exclamdown     cent           sterling\\ncurrency      yen            brokenbar      section\\ndieresis      copyright      ordfeminine    guillemotleft\\nlogicalnot    hyphen         registered     macron\\ndegree        plusminus      twosuperior    threesuperior\\nacute         mu             paragraph      periodcentered\\ncedilla       onesuperior    ordmasculine   guillemotright\\nonequarter    onehalf        threequarters  questiondown\\n  \\nAgrave        Aacute         Acircumflex    Atilde\\nAdieresis     Aring          AE             Ccedilla\\nEgrave        Eacute         Ecircumflex    Edieresis\\nIgrave        Iacute         Icircumflex    Idieresis\\nEth           Ntilde         Ograve         Oacute\\nOcircumflex   Otilde         Odieresis      multiply\\nOslash        Ugrave         Uacute         Ucircumflex\\nUdieresis     Yacute         Thorn          germandbls\\n  \\nagrave        aacute         acircumflex    atilde\\nadieresis     aring          ae             ccedilla\\negrave        eacute         ecircumflex    edieresis\\nigrave        iacute         icircumflex    idieresis\\neth           ntilde         ograve         oacute\\nocircumflex   otilde         odieresis      divide\\noslash        ugrave         uacute         ucircumflex\\nudieresis     yacute         thorn          ydieresis\".split(/\\s+/);\n\nvar AFMFont = /*#__PURE__*/function () {\n  _createClass(AFMFont, null, [{\n    key: \"open\",\n    value: function open(filename) {\n      return new AFMFont(fs.readFileSync(filename, 'utf8'));\n    }\n  }]);\n\n  function AFMFont(contents) {\n    _classCallCheck(this, AFMFont);\n\n    this.contents = contents;\n    this.attributes = {};\n    this.glyphWidths = {};\n    this.boundingBoxes = {};\n    this.kernPairs = {};\n    this.parse(); // todo: remove charWidths since appears to not be used\n\n    this.charWidths = new Array(256);\n\n    for (var char = 0; char <= 255; char++) {\n      this.charWidths[char] = this.glyphWidths[characters[char]];\n    }\n\n    this.bbox = this.attributes['FontBBox'].split(/\\s+/).map(function (e) {\n      return +e;\n    });\n    this.ascender = +(this.attributes['Ascender'] || 0);\n    this.descender = +(this.attributes['Descender'] || 0);\n    this.xHeight = +(this.attributes['XHeight'] || 0);\n    this.capHeight = +(this.attributes['CapHeight'] || 0);\n    this.lineGap = this.bbox[3] - this.bbox[1] - (this.ascender - this.descender);\n  }\n\n  _createClass(AFMFont, [{\n    key: \"parse\",\n    value: function parse() {\n      var section = '';\n\n      var _iterator = _createForOfIteratorHelper(this.contents.split('\\n')),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var line = _step.value;\n          var match;\n          var a;\n\n          if (match = line.match(/^Start(\\w+)/)) {\n            section = match[1];\n            continue;\n          } else if (match = line.match(/^End(\\w+)/)) {\n            section = '';\n            continue;\n          }\n\n          switch (section) {\n            case 'FontMetrics':\n              match = line.match(/(^\\w+)\\s+(.*)/);\n              var key = match[1];\n              var value = match[2];\n\n              if (a = this.attributes[key]) {\n                if (!Array.isArray(a)) {\n                  a = this.attributes[key] = [a];\n                }\n\n                a.push(value);\n              } else {\n                this.attributes[key] = value;\n              }\n\n              break;\n\n            case 'CharMetrics':\n              if (!/^CH?\\s/.test(line)) {\n                continue;\n              }\n\n              var name = line.match(/\\bN\\s+(\\.?\\w+)\\s*;/)[1];\n              this.glyphWidths[name] = +line.match(/\\bWX\\s+(\\d+)\\s*;/)[1];\n              break;\n\n            case 'KernPairs':\n              match = line.match(/^KPX\\s+(\\.?\\w+)\\s+(\\.?\\w+)\\s+(-?\\d+)/);\n\n              if (match) {\n                this.kernPairs[match[1] + '\\0' + match[2]] = parseInt(match[3]);\n              }\n\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"encodeText\",\n    value: function encodeText(text) {\n      var res = [];\n\n      for (var i = 0, len = text.length; i < len; i++) {\n        var char = text.charCodeAt(i);\n        char = WIN_ANSI_MAP[char] || char;\n        res.push(char.toString(16));\n      }\n\n      return res;\n    }\n  }, {\n    key: \"glyphsForString\",\n    value: function glyphsForString(string) {\n      var glyphs = [];\n\n      for (var i = 0, len = string.length; i < len; i++) {\n        var charCode = string.charCodeAt(i);\n        glyphs.push(this.characterToGlyph(charCode));\n      }\n\n      return glyphs;\n    }\n  }, {\n    key: \"characterToGlyph\",\n    value: function characterToGlyph(character) {\n      return characters[WIN_ANSI_MAP[character] || character] || '.notdef';\n    }\n  }, {\n    key: \"widthOfGlyph\",\n    value: function widthOfGlyph(glyph) {\n      return this.glyphWidths[glyph] || 0;\n    }\n  }, {\n    key: \"getKernPair\",\n    value: function getKernPair(left, right) {\n      return this.kernPairs[left + '\\0' + right] || 0;\n    }\n  }, {\n    key: \"advancesForGlyphs\",\n    value: function advancesForGlyphs(glyphs) {\n      var advances = [];\n\n      for (var index = 0; index < glyphs.length; index++) {\n        var left = glyphs[index];\n        var right = glyphs[index + 1];\n        advances.push(this.widthOfGlyph(left) + this.getKernPair(left, right));\n      }\n\n      return advances;\n    }\n  }]);\n\n  return AFMFont;\n}();\n\nvar PDFFont = /*#__PURE__*/function () {\n  function PDFFont() {\n    _classCallCheck(this, PDFFont);\n  }\n\n  _createClass(PDFFont, [{\n    key: \"encode\",\n    value: function encode() {\n      throw new Error('Must be implemented by subclasses');\n    }\n  }, {\n    key: \"widthOfString\",\n    value: function widthOfString() {\n      throw new Error('Must be implemented by subclasses');\n    }\n  }, {\n    key: \"ref\",\n    value: function ref() {\n      return this.dictionary != null ? this.dictionary : this.dictionary = this.document.ref();\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      if (this.embedded || this.dictionary == null) {\n        return;\n      }\n\n      this.embed();\n      return this.embedded = true;\n    }\n  }, {\n    key: \"embed\",\n    value: function embed() {\n      throw new Error('Must be implemented by subclasses');\n    }\n  }, {\n    key: \"lineHeight\",\n    value: function lineHeight(size, includeGap) {\n      if (includeGap == null) {\n        includeGap = false;\n      }\n\n      var gap = includeGap ? this.lineGap : 0;\n      return (this.ascender + gap - this.descender) / 1000 * size;\n    }\n  }]);\n\n  return PDFFont;\n}();\n\nvar STANDARD_FONTS = {\n  Courier: function Courier() {\n    return fs.readFileSync(__dirname + '/data/Courier.afm', 'utf8');\n  },\n  'Courier-Bold': function CourierBold() {\n    return fs.readFileSync(__dirname + '/data/Courier-Bold.afm', 'utf8');\n  },\n  'Courier-Oblique': function CourierOblique() {\n    return fs.readFileSync(__dirname + '/data/Courier-Oblique.afm', 'utf8');\n  },\n  'Courier-BoldOblique': function CourierBoldOblique() {\n    return fs.readFileSync(__dirname + '/data/Courier-BoldOblique.afm', 'utf8');\n  },\n  Helvetica: function Helvetica() {\n    return fs.readFileSync(__dirname + '/data/Helvetica.afm', 'utf8');\n  },\n  'Helvetica-Bold': function HelveticaBold() {\n    return fs.readFileSync(__dirname + '/data/Helvetica-Bold.afm', 'utf8');\n  },\n  'Helvetica-Oblique': function HelveticaOblique() {\n    return fs.readFileSync(__dirname + '/data/Helvetica-Oblique.afm', 'utf8');\n  },\n  'Helvetica-BoldOblique': function HelveticaBoldOblique() {\n    return fs.readFileSync(__dirname + '/data/Helvetica-BoldOblique.afm', 'utf8');\n  },\n  'Times-Roman': function TimesRoman() {\n    return fs.readFileSync(__dirname + '/data/Times-Roman.afm', 'utf8');\n  },\n  'Times-Bold': function TimesBold() {\n    return fs.readFileSync(__dirname + '/data/Times-Bold.afm', 'utf8');\n  },\n  'Times-Italic': function TimesItalic() {\n    return fs.readFileSync(__dirname + '/data/Times-Italic.afm', 'utf8');\n  },\n  'Times-BoldItalic': function TimesBoldItalic() {\n    return fs.readFileSync(__dirname + '/data/Times-BoldItalic.afm', 'utf8');\n  },\n  Symbol: function Symbol() {\n    return fs.readFileSync(__dirname + '/data/Symbol.afm', 'utf8');\n  },\n  ZapfDingbats: function ZapfDingbats() {\n    return fs.readFileSync(__dirname + '/data/ZapfDingbats.afm', 'utf8');\n  }\n};\n\nvar StandardFont = /*#__PURE__*/function (_PDFFont) {\n  _inherits(StandardFont, _PDFFont);\n\n  var _super = _createSuper(StandardFont);\n\n  function StandardFont(document, name, id) {\n    var _this;\n\n    _classCallCheck(this, StandardFont);\n\n    _this = _super.call(this);\n    _this.document = document;\n    _this.name = name;\n    _this.id = id;\n    _this.font = new AFMFont(STANDARD_FONTS[_this.name]());\n    var _this$font = _this.font;\n    _this.ascender = _this$font.ascender;\n    _this.descender = _this$font.descender;\n    _this.bbox = _this$font.bbox;\n    _this.lineGap = _this$font.lineGap;\n    _this.xHeight = _this$font.xHeight;\n    _this.capHeight = _this$font.capHeight;\n    return _this;\n  }\n\n  _createClass(StandardFont, [{\n    key: \"embed\",\n    value: function embed() {\n      this.dictionary.data = {\n        Type: 'Font',\n        BaseFont: this.name,\n        Subtype: 'Type1',\n        Encoding: 'WinAnsiEncoding'\n      };\n      return this.dictionary.end();\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(text) {\n      var encoded = this.font.encodeText(text);\n      var glyphs = this.font.glyphsForString(\"\".concat(text));\n      var advances = this.font.advancesForGlyphs(glyphs);\n      var positions = [];\n\n      for (var i = 0; i < glyphs.length; i++) {\n        var glyph = glyphs[i];\n        positions.push({\n          xAdvance: advances[i],\n          yAdvance: 0,\n          xOffset: 0,\n          yOffset: 0,\n          advanceWidth: this.font.widthOfGlyph(glyph)\n        });\n      }\n\n      return [encoded, positions];\n    }\n  }, {\n    key: \"widthOfString\",\n    value: function widthOfString(string, size) {\n      var glyphs = this.font.glyphsForString(\"\".concat(string));\n      var advances = this.font.advancesForGlyphs(glyphs);\n      var width = 0;\n\n      var _iterator = _createForOfIteratorHelper(advances),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var advance = _step.value;\n          width += advance;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var scale = size / 1000;\n      return width * scale;\n    }\n  }], [{\n    key: \"isStandardFont\",\n    value: function isStandardFont(name) {\n      return name in STANDARD_FONTS;\n    }\n  }]);\n\n  return StandardFont;\n}(PDFFont);\n\nvar toHex = function toHex(num) {\n  return \"0000\".concat(num.toString(16)).slice(-4);\n};\n\nvar EmbeddedFont = /*#__PURE__*/function (_PDFFont) {\n  _inherits(EmbeddedFont, _PDFFont);\n\n  var _super = _createSuper(EmbeddedFont);\n\n  function EmbeddedFont(document, font, id) {\n    var _this;\n\n    _classCallCheck(this, EmbeddedFont);\n\n    _this = _super.call(this);\n    _this.document = document;\n    _this.font = font;\n    _this.id = id;\n    _this.subset = _this.font.createSubset();\n    _this.unicode = [[0]];\n    _this.widths = [_this.font.getGlyph(0).advanceWidth];\n    _this.name = _this.font.postscriptName;\n    _this.scale = 1000 / _this.font.unitsPerEm;\n    _this.ascender = _this.font.ascent * _this.scale;\n    _this.descender = _this.font.descent * _this.scale;\n    _this.xHeight = _this.font.xHeight * _this.scale;\n    _this.capHeight = _this.font.capHeight * _this.scale;\n    _this.lineGap = _this.font.lineGap * _this.scale;\n    _this.bbox = _this.font.bbox;\n\n    if (document.options.fontLayoutCache !== false) {\n      _this.layoutCache = Object.create(null);\n    }\n\n    return _this;\n  }\n\n  _createClass(EmbeddedFont, [{\n    key: \"layoutRun\",\n    value: function layoutRun(text, features) {\n      var run = this.font.layout(text, features); // Normalize position values\n\n      for (var i = 0; i < run.positions.length; i++) {\n        var position = run.positions[i];\n\n        for (var key in position) {\n          position[key] *= this.scale;\n        }\n\n        position.advanceWidth = run.glyphs[i].advanceWidth * this.scale;\n      }\n\n      return run;\n    }\n  }, {\n    key: \"layoutCached\",\n    value: function layoutCached(text) {\n      if (!this.layoutCache) {\n        return this.layoutRun(text);\n      }\n\n      var cached;\n\n      if (cached = this.layoutCache[text]) {\n        return cached;\n      }\n\n      var run = this.layoutRun(text);\n      this.layoutCache[text] = run;\n      return run;\n    }\n  }, {\n    key: \"layout\",\n    value: function layout(text, features, onlyWidth) {\n      // Skip the cache if any user defined features are applied\n      if (features) {\n        return this.layoutRun(text, features);\n      }\n\n      var glyphs = onlyWidth ? null : [];\n      var positions = onlyWidth ? null : [];\n      var advanceWidth = 0; // Split the string by words to increase cache efficiency.\n      // For this purpose, spaces and tabs are a good enough delimeter.\n\n      var last = 0;\n      var index = 0;\n\n      while (index <= text.length) {\n        var needle;\n\n        if (index === text.length && last < index || (needle = text.charAt(index), [' ', '\\t'].includes(needle))) {\n          var run = this.layoutCached(text.slice(last, ++index));\n\n          if (!onlyWidth) {\n            glyphs = glyphs.concat(run.glyphs);\n            positions = positions.concat(run.positions);\n          }\n\n          advanceWidth += run.advanceWidth;\n          last = index;\n        } else {\n          index++;\n        }\n      }\n\n      return {\n        glyphs: glyphs,\n        positions: positions,\n        advanceWidth: advanceWidth\n      };\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(text, features) {\n      var _this$layout = this.layout(text, features),\n          glyphs = _this$layout.glyphs,\n          positions = _this$layout.positions;\n\n      var res = [];\n\n      for (var i = 0; i < glyphs.length; i++) {\n        var glyph = glyphs[i];\n        var gid = this.subset.includeGlyph(glyph.id);\n        res.push(\"0000\".concat(gid.toString(16)).slice(-4));\n\n        if (this.widths[gid] == null) {\n          this.widths[gid] = glyph.advanceWidth * this.scale;\n        }\n\n        if (this.unicode[gid] == null) {\n          this.unicode[gid] = glyph.codePoints;\n        }\n      }\n\n      return [res, positions];\n    }\n  }, {\n    key: \"widthOfString\",\n    value: function widthOfString(string, size, features) {\n      var width = this.layout(string, features, true).advanceWidth;\n      var scale = size / 1000;\n      return width * scale;\n    }\n  }, {\n    key: \"embed\",\n    value: function embed() {\n      var _this2 = this;\n\n      var isCFF = this.subset.cff != null;\n      var fontFile = this.document.ref();\n\n      if (isCFF) {\n        fontFile.data.Subtype = 'CIDFontType0C';\n      }\n\n      this.subset.encodeStream().on('data', function (data) {\n        return fontFile.write(data);\n      }).on('end', function () {\n        return fontFile.end();\n      });\n      var familyClass = ((this.font['OS/2'] != null ? this.font['OS/2'].sFamilyClass : undefined) || 0) >> 8;\n      var flags = 0;\n\n      if (this.font.post.isFixedPitch) {\n        flags |= 1 << 0;\n      }\n\n      if (1 <= familyClass && familyClass <= 7) {\n        flags |= 1 << 1;\n      }\n\n      flags |= 1 << 2; // assume the font uses non-latin characters\n\n      if (familyClass === 10) {\n        flags |= 1 << 3;\n      }\n\n      if (this.font.head.macStyle.italic) {\n        flags |= 1 << 6;\n      } // generate a tag (6 uppercase letters. 17 is the char code offset from '0' to 'A'. 73 will map to 'Z')\n\n\n      var tag = [1, 2, 3, 4, 5, 6].map(function (i) {\n        return String.fromCharCode((_this2.id.charCodeAt(i) || 73) + 17);\n      }).join('');\n      var name = tag + '+' + this.font.postscriptName;\n      var bbox = this.font.bbox;\n      var descriptor = this.document.ref({\n        Type: 'FontDescriptor',\n        FontName: name,\n        Flags: flags,\n        FontBBox: [bbox.minX * this.scale, bbox.minY * this.scale, bbox.maxX * this.scale, bbox.maxY * this.scale],\n        ItalicAngle: this.font.italicAngle,\n        Ascent: this.ascender,\n        Descent: this.descender,\n        CapHeight: (this.font.capHeight || this.font.ascent) * this.scale,\n        XHeight: (this.font.xHeight || 0) * this.scale,\n        StemV: 0\n      }); // not sure how to calculate this\n\n      if (isCFF) {\n        descriptor.data.FontFile3 = fontFile;\n      } else {\n        descriptor.data.FontFile2 = fontFile;\n      }\n\n      descriptor.end();\n      var descendantFontData = {\n        Type: 'Font',\n        Subtype: 'CIDFontType0',\n        BaseFont: name,\n        CIDSystemInfo: {\n          Registry: new String('Adobe'),\n          Ordering: new String('Identity'),\n          Supplement: 0\n        },\n        FontDescriptor: descriptor,\n        W: [0, this.widths]\n      };\n\n      if (!isCFF) {\n        descendantFontData.Subtype = 'CIDFontType2';\n        descendantFontData.CIDToGIDMap = 'Identity';\n      }\n\n      var descendantFont = this.document.ref(descendantFontData);\n      descendantFont.end();\n      this.dictionary.data = {\n        Type: 'Font',\n        Subtype: 'Type0',\n        BaseFont: name,\n        Encoding: 'Identity-H',\n        DescendantFonts: [descendantFont],\n        ToUnicode: this.toUnicodeCmap()\n      };\n      return this.dictionary.end();\n    } // Maps the glyph ids encoded in the PDF back to unicode strings\n    // Because of ligature substitutions and the like, there may be one or more\n    // unicode characters represented by each glyph.\n\n  }, {\n    key: \"toUnicodeCmap\",\n    value: function toUnicodeCmap() {\n      var cmap = this.document.ref();\n      var entries = [];\n\n      var _iterator = _createForOfIteratorHelper(this.unicode),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var codePoints = _step.value;\n          var encoded = []; // encode codePoints to utf16\n\n          var _iterator2 = _createForOfIteratorHelper(codePoints),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var value = _step2.value;\n\n              if (value > 0xffff) {\n                value -= 0x10000;\n                encoded.push(toHex(value >>> 10 & 0x3ff | 0xd800));\n                value = 0xdc00 | value & 0x3ff;\n              }\n\n              encoded.push(toHex(value));\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          entries.push(\"<\".concat(encoded.join(' '), \">\"));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      cmap.end(\"/CIDInit /ProcSet findresource begin\\n12 dict begin\\nbegincmap\\n/CIDSystemInfo <<\\n  /Registry (Adobe)\\n  /Ordering (UCS)\\n  /Supplement 0\\n>> def\\n/CMapName /Adobe-Identity-UCS def\\n/CMapType 2 def\\n1 begincodespacerange\\n<0000><ffff>\\nendcodespacerange\\n1 beginbfrange\\n<0000> <\".concat(toHex(entries.length - 1), \"> [\").concat(entries.join(' '), \"]\\nendbfrange\\nendcmap\\nCMapName currentdict /CMap defineresource pop\\nend\\nend\"));\n      return cmap;\n    }\n  }]);\n\n  return EmbeddedFont;\n}(PDFFont);\n\nvar PDFFontFactory = /*#__PURE__*/function () {\n  function PDFFontFactory() {\n    _classCallCheck(this, PDFFontFactory);\n  }\n\n  _createClass(PDFFontFactory, null, [{\n    key: \"open\",\n    value: function open(document, src, family, id) {\n      var font;\n\n      if (typeof src === 'string') {\n        if (StandardFont.isStandardFont(src)) {\n          return new StandardFont(document, src, id);\n        }\n\n        src = fs.readFileSync(src);\n      }\n\n      if (Buffer.isBuffer(src)) {\n        font = fontkit.create(src, family);\n      } else if (src instanceof Uint8Array) {\n        font = fontkit.create(Buffer.from(src), family);\n      } else if (src instanceof ArrayBuffer) {\n        font = fontkit.create(Buffer.from(new Uint8Array(src)), family);\n      }\n\n      if (font == null) {\n        throw new Error('Not a supported font format or standard PDF font.');\n      }\n\n      return new EmbeddedFont(document, font, id);\n    }\n  }]);\n\n  return PDFFontFactory;\n}();\n\nvar FontsMixin = {\n  initFonts: function initFonts() {\n    var defaultFont = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Helvetica'; // Lookup table for embedded fonts\n\n    this._fontFamilies = {};\n    this._fontCount = 0; // Font state\n\n    this._fontSize = 12;\n    this._font = null;\n    this._registeredFonts = {}; // Set the default font\n\n    if (defaultFont) {\n      this.font(defaultFont);\n    }\n  },\n  font: function font(src, family, size) {\n    var cacheKey, font;\n\n    if (typeof family === 'number') {\n      size = family;\n      family = null;\n    } // check registered fonts if src is a string\n\n\n    if (typeof src === 'string' && this._registeredFonts[src]) {\n      cacheKey = src;\n      var _this$_registeredFont = this._registeredFonts[src];\n      src = _this$_registeredFont.src;\n      family = _this$_registeredFont.family;\n    } else {\n      cacheKey = family || src;\n\n      if (typeof cacheKey !== 'string') {\n        cacheKey = null;\n      }\n    }\n\n    if (size != null) {\n      this.fontSize(size);\n    } // fast path: check if the font is already in the PDF\n\n\n    if (font = this._fontFamilies[cacheKey]) {\n      this._font = font;\n      return this;\n    } // load the font\n\n\n    var id = \"F\".concat(++this._fontCount);\n    this._font = PDFFontFactory.open(this, src, family, id); // check for existing font familes with the same name already in the PDF\n    // useful if the font was passed as a buffer\n\n    if (font = this._fontFamilies[this._font.name]) {\n      this._font = font;\n      return this;\n    } // save the font for reuse later\n\n\n    if (cacheKey) {\n      this._fontFamilies[cacheKey] = this._font;\n    }\n\n    if (this._font.name) {\n      this._fontFamilies[this._font.name] = this._font;\n    }\n\n    return this;\n  },\n  fontSize: function fontSize(_fontSize) {\n    this._fontSize = _fontSize;\n    return this;\n  },\n  currentLineHeight: function currentLineHeight(includeGap) {\n    if (includeGap == null) {\n      includeGap = false;\n    }\n\n    return this._font.lineHeight(this._fontSize, includeGap);\n  },\n  registerFont: function registerFont(name, src, family) {\n    this._registeredFonts[name] = {\n      src: src,\n      family: family\n    };\n    return this;\n  }\n};\n\nvar LineWrapper = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(LineWrapper, _EventEmitter);\n\n  var _super = _createSuper(LineWrapper);\n\n  function LineWrapper(document, options) {\n    var _this;\n\n    _classCallCheck(this, LineWrapper);\n\n    _this = _super.call(this);\n    _this.document = document;\n    _this.indent = options.indent || 0;\n    _this.characterSpacing = options.characterSpacing || 0;\n    _this.wordSpacing = options.wordSpacing === 0;\n    _this.columns = options.columns || 1;\n    _this.columnGap = options.columnGap != null ? options.columnGap : 18; // 1/4 inch\n\n    _this.lineWidth = (options.width - _this.columnGap * (_this.columns - 1)) / _this.columns;\n    _this.spaceLeft = _this.lineWidth;\n    _this.startX = _this.document.x;\n    _this.startY = _this.document.y;\n    _this.column = 1;\n    _this.ellipsis = options.ellipsis;\n    _this.continuedX = 0;\n    _this.features = options.features; // calculate the maximum Y position the text can appear at\n\n    if (options.height != null) {\n      _this.height = options.height;\n      _this.maxY = _this.startY + options.height;\n    } else {\n      _this.maxY = _this.document.page.maxY();\n    } // handle paragraph indents\n\n\n    _this.on('firstLine', function (options) {\n      // if this is the first line of the text segment, and\n      // we're continuing where we left off, indent that much\n      // otherwise use the user specified indent option\n      var indent = _this.continuedX || _this.indent;\n      _this.document.x += indent;\n      _this.lineWidth -= indent;\n      return _this.once('line', function () {\n        _this.document.x -= indent;\n        _this.lineWidth += indent;\n\n        if (options.continued && !_this.continuedX) {\n          _this.continuedX = _this.indent;\n        }\n\n        if (!options.continued) {\n          return _this.continuedX = 0;\n        }\n      });\n    }); // handle left aligning last lines of paragraphs\n\n\n    _this.on('lastLine', function (options) {\n      var align = options.align;\n\n      if (align === 'justify') {\n        options.align = 'left';\n      }\n\n      _this.lastLine = true;\n      return _this.once('line', function () {\n        _this.document.y += options.paragraphGap || 0;\n        options.align = align;\n        return _this.lastLine = false;\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(LineWrapper, [{\n    key: \"wordWidth\",\n    value: function wordWidth(word) {\n      return this.document.widthOfString(word, this) + this.characterSpacing + this.wordSpacing;\n    }\n  }, {\n    key: \"eachWord\",\n    value: function eachWord(text, fn) {\n      // setup a unicode line breaker\n      var bk;\n      var breaker = new LineBreaker(text);\n      var last = null;\n      var wordWidths = Object.create(null);\n\n      while (bk = breaker.nextBreak()) {\n        var shouldContinue;\n        var word = text.slice((last != null ? last.position : undefined) || 0, bk.position);\n        var w = wordWidths[word] != null ? wordWidths[word] : wordWidths[word] = this.wordWidth(word); // if the word is longer than the whole line, chop it up\n        // TODO: break by grapheme clusters, not JS string characters\n\n        if (w > this.lineWidth + this.continuedX) {\n          // make some fake break objects\n          var lbk = last;\n          var fbk = {};\n\n          while (word.length) {\n            // fit as much of the word as possible into the space we have\n            var l, mightGrow;\n\n            if (w > this.spaceLeft) {\n              // start our check at the end of our available space - this method is faster than a loop of each character and it resolves\n              // an issue with long loops when processing massive words, such as a huge number of spaces\n              l = Math.ceil(this.spaceLeft / (w / word.length));\n              w = this.wordWidth(word.slice(0, l));\n              mightGrow = w <= this.spaceLeft && l < word.length;\n            } else {\n              l = word.length;\n            }\n\n            var mustShrink = w > this.spaceLeft && l > 0; // shrink or grow word as necessary after our near-guess above\n\n            while (mustShrink || mightGrow) {\n              if (mustShrink) {\n                w = this.wordWidth(word.slice(0, --l));\n                mustShrink = w > this.spaceLeft && l > 0;\n              } else {\n                w = this.wordWidth(word.slice(0, ++l));\n                mustShrink = w > this.spaceLeft && l > 0;\n                mightGrow = w <= this.spaceLeft && l < word.length;\n              }\n            } // check for the edge case where a single character cannot fit into a line.\n\n\n            if (l === 0 && this.spaceLeft === this.lineWidth) {\n              l = 1;\n            } // send a required break unless this is the last piece and a linebreak is not specified\n\n\n            fbk.required = bk.required || l < word.length;\n            shouldContinue = fn(word.slice(0, l), w, fbk, lbk);\n            lbk = {\n              required: false\n            }; // get the remaining piece of the word\n\n            word = word.slice(l);\n            w = this.wordWidth(word);\n\n            if (shouldContinue === false) {\n              break;\n            }\n          }\n        } else {\n          // otherwise just emit the break as it was given to us\n          shouldContinue = fn(word, w, bk, last);\n        }\n\n        if (shouldContinue === false) {\n          break;\n        }\n\n        last = bk;\n      }\n    }\n  }, {\n    key: \"wrap\",\n    value: function wrap(text, options) {\n      var _this2 = this; // override options from previous continued fragments\n\n\n      if (options.indent != null) {\n        this.indent = options.indent;\n      }\n\n      if (options.characterSpacing != null) {\n        this.characterSpacing = options.characterSpacing;\n      }\n\n      if (options.wordSpacing != null) {\n        this.wordSpacing = options.wordSpacing;\n      }\n\n      if (options.ellipsis != null) {\n        this.ellipsis = options.ellipsis;\n      } // make sure we're actually on the page\n      // and that the first line of is never by\n      // itself at the bottom of a page (orphans)\n\n\n      var nextY = this.document.y + this.document.currentLineHeight(true);\n\n      if (this.document.y > this.maxY || nextY > this.maxY) {\n        this.nextSection();\n      }\n\n      var buffer = '';\n      var textWidth = 0;\n      var wc = 0;\n      var lc = 0;\n      var y = this.document.y; // used to reset Y pos if options.continued (below)\n\n      var emitLine = function emitLine() {\n        options.textWidth = textWidth + _this2.wordSpacing * (wc - 1);\n        options.wordCount = wc;\n        options.lineWidth = _this2.lineWidth;\n        y = _this2.document.y;\n\n        _this2.emit('line', buffer, options, _this2);\n\n        return lc++;\n      };\n\n      this.emit('sectionStart', options, this);\n      this.eachWord(text, function (word, w, bk, last) {\n        if (last == null || last.required) {\n          _this2.emit('firstLine', options, _this2);\n\n          _this2.spaceLeft = _this2.lineWidth;\n        }\n\n        if (w <= _this2.spaceLeft) {\n          buffer += word;\n          textWidth += w;\n          wc++;\n        }\n\n        if (bk.required || w > _this2.spaceLeft) {\n          // if the user specified a max height and an ellipsis, and is about to pass the\n          // max height and max columns after the next line, append the ellipsis\n          var lh = _this2.document.currentLineHeight(true);\n\n          if (_this2.height != null && _this2.ellipsis && _this2.document.y + lh * 2 > _this2.maxY && _this2.column >= _this2.columns) {\n            if (_this2.ellipsis === true) {\n              _this2.ellipsis = '…';\n            } // map default ellipsis character\n\n\n            buffer = buffer.replace(/\\s+$/, '');\n            textWidth = _this2.wordWidth(buffer + _this2.ellipsis); // remove characters from the buffer until the ellipsis fits\n            // to avoid infinite loop need to stop while-loop if buffer is empty string\n\n            while (buffer && textWidth > _this2.lineWidth) {\n              buffer = buffer.slice(0, -1).replace(/\\s+$/, '');\n              textWidth = _this2.wordWidth(buffer + _this2.ellipsis);\n            } // need to add ellipsis only if there is enough space for it\n\n\n            if (textWidth <= _this2.lineWidth) {\n              buffer = buffer + _this2.ellipsis;\n            }\n\n            textWidth = _this2.wordWidth(buffer);\n          }\n\n          if (bk.required) {\n            if (w > _this2.spaceLeft) {\n              emitLine();\n              buffer = word;\n              textWidth = w;\n              wc = 1;\n            }\n\n            _this2.emit('lastLine', options, _this2);\n          }\n\n          emitLine(); // if we've reached the edge of the page,\n          // continue on a new page or column\n\n          if (_this2.document.y + lh > _this2.maxY) {\n            var shouldContinue = _this2.nextSection(); // stop if we reached the maximum height\n\n\n            if (!shouldContinue) {\n              wc = 0;\n              buffer = '';\n              return false;\n            }\n          } // reset the space left and buffer\n\n\n          if (bk.required) {\n            _this2.spaceLeft = _this2.lineWidth;\n            buffer = '';\n            textWidth = 0;\n            return wc = 0;\n          } else {\n            // reset the space left and buffer\n            _this2.spaceLeft = _this2.lineWidth - w;\n            buffer = word;\n            textWidth = w;\n            return wc = 1;\n          }\n        } else {\n          return _this2.spaceLeft -= w;\n        }\n      });\n\n      if (wc > 0) {\n        this.emit('lastLine', options, this);\n        emitLine();\n      }\n\n      this.emit('sectionEnd', options, this); // if the wrap is set to be continued, save the X position\n      // to start the first line of the next segment at, and reset\n      // the y position\n\n      if (options.continued === true) {\n        if (lc > 1) {\n          this.continuedX = 0;\n        }\n\n        this.continuedX += options.textWidth || 0;\n        return this.document.y = y;\n      } else {\n        return this.document.x = this.startX;\n      }\n    }\n  }, {\n    key: \"nextSection\",\n    value: function nextSection(options) {\n      this.emit('sectionEnd', options, this);\n\n      if (++this.column > this.columns) {\n        // if a max height was specified by the user, we're done.\n        // otherwise, the default is to make a new page at the bottom.\n        if (this.height != null) {\n          return false;\n        }\n\n        this.document.continueOnNewPage();\n        this.column = 1;\n        this.startY = this.document.page.margins.top;\n        this.maxY = this.document.page.maxY();\n        this.document.x = this.startX;\n\n        if (this.document._fillColor) {\n          var _this$document;\n\n          (_this$document = this.document).fillColor.apply(_this$document, _toConsumableArray(this.document._fillColor));\n        }\n\n        this.emit('pageBreak', options, this);\n      } else {\n        this.document.x += this.lineWidth + this.columnGap;\n        this.document.y = this.startY;\n        this.emit('columnBreak', options, this);\n      }\n\n      this.emit('sectionStart', options, this);\n      return true;\n    }\n  }]);\n\n  return LineWrapper;\n}(EventEmitter);\n\nvar number$2 = PDFObject.number;\nvar TextMixin = {\n  initText: function initText() {\n    this._line = this._line.bind(this); // Current coordinates\n\n    this.x = 0;\n    this.y = 0;\n    return this._lineGap = 0;\n  },\n  lineGap: function lineGap(_lineGap) {\n    this._lineGap = _lineGap;\n    return this;\n  },\n  moveDown: function moveDown(lines) {\n    if (lines == null) {\n      lines = 1;\n    }\n\n    this.y += this.currentLineHeight(true) * lines + this._lineGap;\n    return this;\n  },\n  moveUp: function moveUp(lines) {\n    if (lines == null) {\n      lines = 1;\n    }\n\n    this.y -= this.currentLineHeight(true) * lines + this._lineGap;\n    return this;\n  },\n  _text: function _text(text, x, y, options, lineCallback) {\n    var _this = this;\n\n    options = this._initOptions(x, y, options); // Convert text to a string\n\n    text = text == null ? '' : \"\".concat(text); // if the wordSpacing option is specified, remove multiple consecutive spaces\n\n    if (options.wordSpacing) {\n      text = text.replace(/\\s{2,}/g, ' ');\n    }\n\n    var addStructure = function addStructure() {\n      if (options.structParent) {\n        options.structParent.add(_this.struct(options.structType || 'P', [_this.markStructureContent(options.structType || 'P')]));\n      }\n    }; // word wrapping\n\n\n    if (options.width) {\n      var wrapper = this._wrapper;\n\n      if (!wrapper) {\n        wrapper = new LineWrapper(this, options);\n        wrapper.on('line', lineCallback);\n        wrapper.on('firstLine', addStructure);\n      }\n\n      this._wrapper = options.continued ? wrapper : null;\n      this._textOptions = options.continued ? options : null;\n      wrapper.wrap(text, options); // render paragraphs as single lines\n    } else {\n      var _iterator = _createForOfIteratorHelper(text.split('\\n')),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var line = _step.value;\n          addStructure();\n          lineCallback(line, options);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n\n    return this;\n  },\n  text: function text(_text2, x, y, options) {\n    return this._text(_text2, x, y, options, this._line);\n  },\n  widthOfString: function widthOfString(string) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this._font.widthOfString(string, this._fontSize, options.features) + (options.characterSpacing || 0) * (string.length - 1);\n  },\n  heightOfString: function heightOfString(text, options) {\n    var _this2 = this;\n\n    var x = this.x,\n        y = this.y;\n    options = this._initOptions(options);\n    options.height = Infinity; // don't break pages\n\n    var lineGap = options.lineGap || this._lineGap || 0;\n\n    this._text(text, this.x, this.y, options, function () {\n      return _this2.y += _this2.currentLineHeight(true) + lineGap;\n    });\n\n    var height = this.y - y;\n    this.x = x;\n    this.y = y;\n    return height;\n  },\n  list: function list(_list, x, y, options, wrapper) {\n    var _this3 = this;\n\n    options = this._initOptions(x, y, options);\n    var listType = options.listType || 'bullet';\n    var unit = Math.round(this._font.ascender / 1000 * this._fontSize);\n    var midLine = unit / 2;\n    var r = options.bulletRadius || unit / 3;\n    var indent = options.textIndent || (listType === 'bullet' ? r * 5 : unit * 2);\n    var itemIndent = options.bulletIndent || (listType === 'bullet' ? r * 8 : unit * 2);\n    var level = 1;\n    var items = [];\n    var levels = [];\n    var numbers = [];\n\n    var flatten = function flatten(list) {\n      var n = 1;\n\n      for (var _i = 0; _i < list.length; _i++) {\n        var item = list[_i];\n\n        if (Array.isArray(item)) {\n          level++;\n          flatten(item);\n          level--;\n        } else {\n          items.push(item);\n          levels.push(level);\n\n          if (listType !== 'bullet') {\n            numbers.push(n++);\n          }\n        }\n      }\n    };\n\n    flatten(_list);\n\n    var label = function label(n) {\n      switch (listType) {\n        case 'numbered':\n          return \"\".concat(n, \".\");\n\n        case 'lettered':\n          var letter = String.fromCharCode((n - 1) % 26 + 65);\n          var times = Math.floor((n - 1) / 26 + 1);\n          var text = Array(times + 1).join(letter);\n          return \"\".concat(text, \".\");\n      }\n    };\n\n    wrapper = new LineWrapper(this, options);\n    wrapper.on('line', this._line);\n    level = 1;\n    var i = 0;\n    wrapper.on('firstLine', function () {\n      var item, itemType, labelType, bodyType;\n\n      if (options.structParent) {\n        if (options.structTypes) {\n          var _options$structTypes = _slicedToArray(options.structTypes, 3);\n\n          itemType = _options$structTypes[0];\n          labelType = _options$structTypes[1];\n          bodyType = _options$structTypes[2];\n        } else {\n          itemType = 'LI';\n          labelType = 'Lbl';\n          bodyType = 'LBody';\n        }\n      }\n\n      if (itemType) {\n        item = _this3.struct(itemType);\n        options.structParent.add(item);\n      } else if (options.structParent) {\n        item = options.structParent;\n      }\n\n      var l;\n\n      if ((l = levels[i++]) !== level) {\n        var diff = itemIndent * (l - level);\n        _this3.x += diff;\n        wrapper.lineWidth -= diff;\n        level = l;\n      }\n\n      if (item && (labelType || bodyType)) {\n        item.add(_this3.struct(labelType || bodyType, [_this3.markStructureContent(labelType || bodyType)]));\n      }\n\n      switch (listType) {\n        case 'bullet':\n          _this3.circle(_this3.x - indent + r, _this3.y + midLine, r);\n\n          _this3.fill();\n\n          break;\n\n        case 'numbered':\n        case 'lettered':\n          var text = label(numbers[i - 1]);\n\n          _this3._fragment(text, _this3.x - indent, _this3.y, options);\n\n          break;\n      }\n\n      if (item && labelType && bodyType) {\n        item.add(_this3.struct(bodyType, [_this3.markStructureContent(bodyType)]));\n      }\n\n      if (item && item !== options.structParent) {\n        item.end();\n      }\n    });\n    wrapper.on('sectionStart', function () {\n      var pos = indent + itemIndent * (level - 1);\n      _this3.x += pos;\n      return wrapper.lineWidth -= pos;\n    });\n    wrapper.on('sectionEnd', function () {\n      var pos = indent + itemIndent * (level - 1);\n      _this3.x -= pos;\n      return wrapper.lineWidth += pos;\n    });\n    wrapper.wrap(items.join('\\n'), options);\n    return this;\n  },\n  _initOptions: function _initOptions() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var y = arguments.length > 1 ? arguments[1] : undefined;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (typeof x === 'object') {\n      options = x;\n      x = null;\n    } // clone options object\n\n\n    var result = Object.assign({}, options); // extend options with previous values for continued text\n\n    if (this._textOptions) {\n      for (var key in this._textOptions) {\n        var val = this._textOptions[key];\n\n        if (key !== 'continued') {\n          if (result[key] === undefined) {\n            result[key] = val;\n          }\n        }\n      }\n    } // Update the current position\n\n\n    if (x != null) {\n      this.x = x;\n    }\n\n    if (y != null) {\n      this.y = y;\n    } // wrap to margins if no x or y position passed\n\n\n    if (result.lineBreak !== false) {\n      if (result.width == null) {\n        result.width = this.page.width - this.x - this.page.margins.right;\n      }\n\n      result.width = Math.max(result.width, 0);\n    }\n\n    if (!result.columns) {\n      result.columns = 0;\n    }\n\n    if (result.columnGap == null) {\n      result.columnGap = 18;\n    } // 1/4 inch\n\n\n    return result;\n  },\n  _line: function _line(text) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var wrapper = arguments.length > 2 ? arguments[2] : undefined;\n\n    this._fragment(text, this.x, this.y, options);\n\n    var lineGap = options.lineGap || this._lineGap || 0;\n\n    if (!wrapper) {\n      return this.x += this.widthOfString(text);\n    } else {\n      return this.y += this.currentLineHeight(true) + lineGap;\n    }\n  },\n  _fragment: function _fragment(text, x, y, options) {\n    var _this4 = this;\n\n    var dy, encoded, i, positions, textWidth, words;\n    text = \"\".concat(text).replace(/\\n/g, '');\n\n    if (text.length === 0) {\n      return;\n    } // handle options\n\n\n    var align = options.align || 'left';\n    var wordSpacing = options.wordSpacing || 0;\n    var characterSpacing = options.characterSpacing || 0; // text alignments\n\n    if (options.width) {\n      switch (align) {\n        case 'right':\n          textWidth = this.widthOfString(text.replace(/\\s+$/, ''), options);\n          x += options.lineWidth - textWidth;\n          break;\n\n        case 'center':\n          x += options.lineWidth / 2 - options.textWidth / 2;\n          break;\n\n        case 'justify':\n          // calculate the word spacing value\n          words = text.trim().split(/\\s+/);\n          textWidth = this.widthOfString(text.replace(/\\s+/g, ''), options);\n          var spaceWidth = this.widthOfString(' ') + characterSpacing;\n          wordSpacing = Math.max(0, (options.lineWidth - textWidth) / Math.max(1, words.length - 1) - spaceWidth);\n          break;\n      }\n    } // text baseline alignments based on http://wiki.apache.org/xmlgraphics-fop/LineLayout/AlignmentHandling\n\n\n    if (typeof options.baseline === 'number') {\n      dy = -options.baseline;\n    } else {\n      switch (options.baseline) {\n        case 'svg-middle':\n          dy = 0.5 * this._font.xHeight;\n          break;\n\n        case 'middle':\n        case 'svg-central':\n          dy = 0.5 * (this._font.descender + this._font.ascender);\n          break;\n\n        case 'bottom':\n        case 'ideographic':\n          dy = this._font.descender;\n          break;\n\n        case 'alphabetic':\n          dy = 0;\n          break;\n\n        case 'mathematical':\n          dy = 0.5 * this._font.ascender;\n          break;\n\n        case 'hanging':\n          dy = 0.8 * this._font.ascender;\n          break;\n\n        case 'top':\n          dy = this._font.ascender;\n          break;\n\n        default:\n          dy = this._font.ascender;\n      }\n\n      dy = dy / 1000 * this._fontSize;\n    } // calculate the actual rendered width of the string after word and character spacing\n\n\n    var renderedWidth = options.textWidth + wordSpacing * (options.wordCount - 1) + characterSpacing * (text.length - 1); // create link annotations if the link option is given\n\n    if (options.link != null) {\n      this.link(x, y, renderedWidth, this.currentLineHeight(), options.link);\n    }\n\n    if (options.goTo != null) {\n      this.goTo(x, y, renderedWidth, this.currentLineHeight(), options.goTo);\n    }\n\n    if (options.destination != null) {\n      this.addNamedDestination(options.destination, 'XYZ', x, y, null);\n    } // create underline or strikethrough line\n\n\n    if (options.underline || options.strike) {\n      this.save();\n\n      if (!options.stroke) {\n        this.strokeColor.apply(this, _toConsumableArray(this._fillColor || []));\n      }\n\n      var lineWidth = this._fontSize < 10 ? 0.5 : Math.floor(this._fontSize / 10);\n      this.lineWidth(lineWidth);\n      var d = options.underline ? 1 : 2;\n      var lineY = y + this.currentLineHeight() / d;\n\n      if (options.underline) {\n        lineY -= lineWidth;\n      }\n\n      this.moveTo(x, lineY);\n      this.lineTo(x + renderedWidth, lineY);\n      this.stroke();\n      this.restore();\n    }\n\n    this.save(); // oblique (angle in degrees or boolean)\n\n    if (options.oblique) {\n      var skew;\n\n      if (typeof options.oblique === 'number') {\n        skew = -Math.tan(options.oblique * Math.PI / 180);\n      } else {\n        skew = -0.25;\n      }\n\n      this.transform(1, 0, 0, 1, x, y);\n      this.transform(1, 0, skew, 1, -skew * dy, 0);\n      this.transform(1, 0, 0, 1, -x, -y);\n    } // flip coordinate system\n\n\n    this.transform(1, 0, 0, -1, 0, this.page.height);\n    y = this.page.height - y - dy; // add current font to page if necessary\n\n    if (this.page.fonts[this._font.id] == null) {\n      this.page.fonts[this._font.id] = this._font.ref();\n    } // begin the text object\n\n\n    this.addContent('BT'); // text position\n\n    this.addContent(\"1 0 0 1 \".concat(number$2(x), \" \").concat(number$2(y), \" Tm\")); // font and font size\n\n    this.addContent(\"/\".concat(this._font.id, \" \").concat(number$2(this._fontSize), \" Tf\")); // rendering mode\n\n    var mode = options.fill && options.stroke ? 2 : options.stroke ? 1 : 0;\n\n    if (mode) {\n      this.addContent(\"\".concat(mode, \" Tr\"));\n    } // Character spacing\n\n\n    if (characterSpacing) {\n      this.addContent(\"\".concat(number$2(characterSpacing), \" Tc\"));\n    } // Add the actual text\n    // If we have a word spacing value, we need to encode each word separately\n    // since the normal Tw operator only works on character code 32, which isn't\n    // used for embedded fonts.\n\n\n    if (wordSpacing) {\n      words = text.trim().split(/\\s+/);\n      wordSpacing += this.widthOfString(' ') + characterSpacing;\n      wordSpacing *= 1000 / this._fontSize;\n      encoded = [];\n      positions = [];\n\n      var _iterator2 = _createForOfIteratorHelper(words),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var word = _step2.value;\n\n          var _this$_font$encode = this._font.encode(word, options.features),\n              _this$_font$encode2 = _slicedToArray(_this$_font$encode, 2),\n              encodedWord = _this$_font$encode2[0],\n              positionsWord = _this$_font$encode2[1];\n\n          encoded = encoded.concat(encodedWord);\n          positions = positions.concat(positionsWord); // add the word spacing to the end of the word\n          // clone object because of cache\n\n          var space = {};\n          var object = positions[positions.length - 1];\n\n          for (var key in object) {\n            var val = object[key];\n            space[key] = val;\n          }\n\n          space.xAdvance += wordSpacing;\n          positions[positions.length - 1] = space;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    } else {\n      var _this$_font$encode3 = this._font.encode(text, options.features);\n\n      var _this$_font$encode4 = _slicedToArray(_this$_font$encode3, 2);\n\n      encoded = _this$_font$encode4[0];\n      positions = _this$_font$encode4[1];\n    }\n\n    var scale = this._fontSize / 1000;\n    var commands = [];\n    var last = 0;\n    var hadOffset = false; // Adds a segment of text to the TJ command buffer\n\n    var addSegment = function addSegment(cur) {\n      if (last < cur) {\n        var hex = encoded.slice(last, cur).join('');\n        var advance = positions[cur - 1].xAdvance - positions[cur - 1].advanceWidth;\n        commands.push(\"<\".concat(hex, \"> \").concat(number$2(-advance)));\n      }\n\n      return last = cur;\n    }; // Flushes the current TJ commands to the output stream\n\n\n    var flush = function flush(i) {\n      addSegment(i);\n\n      if (commands.length > 0) {\n        _this4.addContent(\"[\".concat(commands.join(' '), \"] TJ\"));\n\n        return commands.length = 0;\n      }\n    };\n\n    for (i = 0; i < positions.length; i++) {\n      // If we have an x or y offset, we have to break out of the current TJ command\n      // so we can move the text position.\n      var pos = positions[i];\n\n      if (pos.xOffset || pos.yOffset) {\n        // Flush the current buffer\n        flush(i); // Move the text position and flush just the current character\n\n        this.addContent(\"1 0 0 1 \".concat(number$2(x + pos.xOffset * scale), \" \").concat(number$2(y + pos.yOffset * scale), \" Tm\"));\n        flush(i + 1);\n        hadOffset = true;\n      } else {\n        // If the last character had an offset, reset the text position\n        if (hadOffset) {\n          this.addContent(\"1 0 0 1 \".concat(number$2(x), \" \").concat(number$2(y), \" Tm\"));\n          hadOffset = false;\n        } // Group segments that don't have any advance adjustments\n\n\n        if (pos.xAdvance - pos.advanceWidth !== 0) {\n          addSegment(i + 1);\n        }\n      }\n\n      x += pos.xAdvance * scale;\n    } // Flush any remaining commands\n\n\n    flush(i); // end the text object\n\n    this.addContent('ET'); // restore flipped coordinate system\n\n    return this.restore();\n  }\n};\nvar MARKERS = [0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc8, 0xffc9, 0xffca, 0xffcb, 0xffcc, 0xffcd, 0xffce, 0xffcf];\nvar COLOR_SPACE_MAP = {\n  1: 'DeviceGray',\n  3: 'DeviceRGB',\n  4: 'DeviceCMYK'\n};\n\nvar JPEG = /*#__PURE__*/function () {\n  function JPEG(data, label) {\n    _classCallCheck(this, JPEG);\n\n    var marker;\n    this.data = data;\n    this.label = label;\n\n    if (this.data.readUInt16BE(0) !== 0xffd8) {\n      throw 'SOI not found in JPEG';\n    }\n\n    var pos = 2;\n\n    while (pos < this.data.length) {\n      marker = this.data.readUInt16BE(pos);\n      pos += 2;\n\n      if (MARKERS.includes(marker)) {\n        break;\n      }\n\n      pos += this.data.readUInt16BE(pos);\n    }\n\n    if (!MARKERS.includes(marker)) {\n      throw 'Invalid JPEG.';\n    }\n\n    pos += 2;\n    this.bits = this.data[pos++];\n    this.height = this.data.readUInt16BE(pos);\n    pos += 2;\n    this.width = this.data.readUInt16BE(pos);\n    pos += 2;\n    var channels = this.data[pos++];\n    this.colorSpace = COLOR_SPACE_MAP[channels];\n    this.obj = null;\n  }\n\n  _createClass(JPEG, [{\n    key: \"embed\",\n    value: function embed(document) {\n      if (this.obj) {\n        return;\n      }\n\n      this.obj = document.ref({\n        Type: 'XObject',\n        Subtype: 'Image',\n        BitsPerComponent: this.bits,\n        Width: this.width,\n        Height: this.height,\n        ColorSpace: this.colorSpace,\n        Filter: 'DCTDecode'\n      }); // add extra decode params for CMYK images. By swapping the\n      // min and max values from the default, we invert the colors. See\n      // section 4.8.4 of the spec.\n\n      if (this.colorSpace === 'DeviceCMYK') {\n        this.obj.data['Decode'] = [1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0];\n      }\n\n      this.obj.end(this.data); // free memory\n\n      return this.data = null;\n    }\n  }]);\n\n  return JPEG;\n}();\n\nvar PNGImage = /*#__PURE__*/function () {\n  function PNGImage(data, label) {\n    _classCallCheck(this, PNGImage);\n\n    this.label = label;\n    this.image = new PNG(data);\n    this.width = this.image.width;\n    this.height = this.image.height;\n    this.imgData = this.image.imgData;\n    this.obj = null;\n  }\n\n  _createClass(PNGImage, [{\n    key: \"embed\",\n    value: function embed(document) {\n      var dataDecoded = false;\n      this.document = document;\n\n      if (this.obj) {\n        return;\n      }\n\n      var hasAlphaChannel = this.image.hasAlphaChannel;\n      var isInterlaced = this.image.interlaceMethod === 1;\n      this.obj = this.document.ref({\n        Type: 'XObject',\n        Subtype: 'Image',\n        BitsPerComponent: hasAlphaChannel ? 8 : this.image.bits,\n        Width: this.width,\n        Height: this.height,\n        Filter: 'FlateDecode'\n      });\n\n      if (!hasAlphaChannel) {\n        var params = this.document.ref({\n          Predictor: isInterlaced ? 1 : 15,\n          Colors: this.image.colors,\n          BitsPerComponent: this.image.bits,\n          Columns: this.width\n        });\n        this.obj.data['DecodeParms'] = params;\n        params.end();\n      }\n\n      if (this.image.palette.length === 0) {\n        this.obj.data['ColorSpace'] = this.image.colorSpace;\n      } else {\n        // embed the color palette in the PDF as an object stream\n        var palette = this.document.ref();\n        palette.end(Buffer.from(this.image.palette)); // build the color space array for the image\n\n        this.obj.data['ColorSpace'] = ['Indexed', 'DeviceRGB', this.image.palette.length / 3 - 1, palette];\n      } // For PNG color types 0, 2 and 3, the transparency data is stored in\n      // a dedicated PNG chunk.\n\n\n      if (this.image.transparency.grayscale != null) {\n        // Use Color Key Masking (spec section 4.8.5)\n        // An array with N elements, where N is two times the number of color components.\n        var val = this.image.transparency.grayscale;\n        this.obj.data['Mask'] = [val, val];\n      } else if (this.image.transparency.rgb) {\n        // Use Color Key Masking (spec section 4.8.5)\n        // An array with N elements, where N is two times the number of color components.\n        var rgb = this.image.transparency.rgb;\n        var mask = [];\n\n        var _iterator = _createForOfIteratorHelper(rgb),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var x = _step.value;\n            mask.push(x, x);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        this.obj.data['Mask'] = mask;\n      } else if (this.image.transparency.indexed) {\n        // Create a transparency SMask for the image based on the data\n        // in the PLTE and tRNS sections. See below for details on SMasks.\n        dataDecoded = true;\n        return this.loadIndexedAlphaChannel();\n      } else if (hasAlphaChannel) {\n        // For PNG color types 4 and 6, the transparency data is stored as a alpha\n        // channel mixed in with the main image data. Separate this data out into an\n        // SMask object and store it separately in the PDF.\n        dataDecoded = true;\n        return this.splitAlphaChannel();\n      }\n\n      if (isInterlaced && !dataDecoded) {\n        return this.decodeData();\n      }\n\n      this.finalize();\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      if (this.alphaChannel) {\n        var sMask = this.document.ref({\n          Type: 'XObject',\n          Subtype: 'Image',\n          Height: this.height,\n          Width: this.width,\n          BitsPerComponent: 8,\n          Filter: 'FlateDecode',\n          ColorSpace: 'DeviceGray',\n          Decode: [0, 1]\n        });\n        sMask.end(this.alphaChannel);\n        this.obj.data['SMask'] = sMask;\n      } // add the actual image data\n\n\n      this.obj.end(this.imgData); // free memory\n\n      this.image = null;\n      return this.imgData = null;\n    }\n  }, {\n    key: \"splitAlphaChannel\",\n    value: function splitAlphaChannel() {\n      var _this = this;\n\n      return this.image.decodePixels(function (pixels) {\n        var a, p;\n        var colorCount = _this.image.colors;\n        var pixelCount = _this.width * _this.height;\n        var imgData = Buffer.alloc(pixelCount * colorCount);\n        var alphaChannel = Buffer.alloc(pixelCount);\n        var i = p = a = 0;\n        var len = pixels.length; // For 16bit images copy only most significant byte (MSB) - PNG data is always stored in network byte order (MSB first)\n\n        var skipByteCount = _this.image.bits === 16 ? 1 : 0;\n\n        while (i < len) {\n          for (var colorIndex = 0; colorIndex < colorCount; colorIndex++) {\n            imgData[p++] = pixels[i++];\n            i += skipByteCount;\n          }\n\n          alphaChannel[a++] = pixels[i++];\n          i += skipByteCount;\n        }\n\n        _this.imgData = zlib.deflateSync(imgData);\n        _this.alphaChannel = zlib.deflateSync(alphaChannel);\n        return _this.finalize();\n      });\n    }\n  }, {\n    key: \"loadIndexedAlphaChannel\",\n    value: function loadIndexedAlphaChannel() {\n      var _this2 = this;\n\n      var transparency = this.image.transparency.indexed;\n      return this.image.decodePixels(function (pixels) {\n        var alphaChannel = Buffer.alloc(_this2.width * _this2.height);\n        var i = 0;\n\n        for (var j = 0, end = pixels.length; j < end; j++) {\n          alphaChannel[i++] = transparency[pixels[j]];\n        }\n\n        _this2.alphaChannel = zlib.deflateSync(alphaChannel);\n        return _this2.finalize();\n      });\n    }\n  }, {\n    key: \"decodeData\",\n    value: function decodeData() {\n      var _this3 = this;\n\n      this.image.decodePixels(function (pixels) {\n        _this3.imgData = zlib.deflateSync(pixels);\n\n        _this3.finalize();\n      });\n    }\n  }]);\n\n  return PNGImage;\n}();\n\nvar PDFImage = /*#__PURE__*/function () {\n  function PDFImage() {\n    _classCallCheck(this, PDFImage);\n  }\n\n  _createClass(PDFImage, null, [{\n    key: \"open\",\n    value: function open(src, label) {\n      var data;\n\n      if (Buffer.isBuffer(src)) {\n        data = src;\n      } else if (src instanceof ArrayBuffer) {\n        data = Buffer.from(new Uint8Array(src));\n      } else {\n        var match;\n\n        if (match = /^data:.+;base64,(.*)$/.exec(src)) {\n          data = Buffer.from(match[1], 'base64');\n        } else {\n          data = fs.readFileSync(src);\n\n          if (!data) {\n            return;\n          }\n        }\n      }\n\n      if (data[0] === 0xff && data[1] === 0xd8) {\n        return new JPEG(data, label);\n      } else if (data[0] === 0x89 && data.toString('ascii', 1, 4) === 'PNG') {\n        return new PNGImage(data, label);\n      } else {\n        throw new Error('Unknown image format.');\n      }\n    }\n  }]);\n\n  return PDFImage;\n}();\n\nvar ImagesMixin = {\n  initImages: function initImages() {\n    this._imageRegistry = {};\n    return this._imageCount = 0;\n  },\n  image: function image(src, x, y) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var bh, bp, bw, image, ip, left, left1;\n\n    if (typeof x === 'object') {\n      options = x;\n      x = null;\n    }\n\n    x = (left = x != null ? x : options.x) != null ? left : this.x;\n    y = (left1 = y != null ? y : options.y) != null ? left1 : this.y;\n\n    if (typeof src === 'string') {\n      image = this._imageRegistry[src];\n    }\n\n    if (!image) {\n      if (src.width && src.height) {\n        image = src;\n      } else {\n        image = this.openImage(src);\n      }\n    }\n\n    if (!image.obj) {\n      image.embed(this);\n    }\n\n    if (this.page.xobjects[image.label] == null) {\n      this.page.xobjects[image.label] = image.obj;\n    }\n\n    var w = options.width || image.width;\n    var h = options.height || image.height;\n\n    if (options.width && !options.height) {\n      var wp = w / image.width;\n      w = image.width * wp;\n      h = image.height * wp;\n    } else if (options.height && !options.width) {\n      var hp = h / image.height;\n      w = image.width * hp;\n      h = image.height * hp;\n    } else if (options.scale) {\n      w = image.width * options.scale;\n      h = image.height * options.scale;\n    } else if (options.fit) {\n      var _options$fit = _slicedToArray(options.fit, 2);\n\n      bw = _options$fit[0];\n      bh = _options$fit[1];\n      bp = bw / bh;\n      ip = image.width / image.height;\n\n      if (ip > bp) {\n        w = bw;\n        h = bw / ip;\n      } else {\n        h = bh;\n        w = bh * ip;\n      }\n    } else if (options.cover) {\n      var _options$cover = _slicedToArray(options.cover, 2);\n\n      bw = _options$cover[0];\n      bh = _options$cover[1];\n      bp = bw / bh;\n      ip = image.width / image.height;\n\n      if (ip > bp) {\n        h = bh;\n        w = bh * ip;\n      } else {\n        w = bw;\n        h = bw / ip;\n      }\n    }\n\n    if (options.fit || options.cover) {\n      if (options.align === 'center') {\n        x = x + bw / 2 - w / 2;\n      } else if (options.align === 'right') {\n        x = x + bw - w;\n      }\n\n      if (options.valign === 'center') {\n        y = y + bh / 2 - h / 2;\n      } else if (options.valign === 'bottom') {\n        y = y + bh - h;\n      }\n    } // create link annotations if the link option is given\n\n\n    if (options.link != null) {\n      this.link(x, y, w, h, options.link);\n    }\n\n    if (options.goTo != null) {\n      this.goTo(x, y, w, h, options.goTo);\n    }\n\n    if (options.destination != null) {\n      this.addNamedDestination(options.destination, 'XYZ', x, y, null);\n    } // Set the current y position to below the image if it is in the document flow\n\n\n    if (this.y === y) {\n      this.y += h;\n    }\n\n    this.save();\n    this.transform(w, 0, 0, -h, x, y + h);\n    this.addContent(\"/\".concat(image.label, \" Do\"));\n    this.restore();\n    return this;\n  },\n  openImage: function openImage(src) {\n    var image;\n\n    if (typeof src === 'string') {\n      image = this._imageRegistry[src];\n    }\n\n    if (!image) {\n      image = PDFImage.open(src, \"I\".concat(++this._imageCount));\n\n      if (typeof src === 'string') {\n        this._imageRegistry[src] = image;\n      }\n    }\n\n    return image;\n  }\n};\nvar AnnotationsMixin = {\n  annotate: function annotate(x, y, w, h, options) {\n    options.Type = 'Annot';\n    options.Rect = this._convertRect(x, y, w, h);\n    options.Border = [0, 0, 0];\n\n    if (options.Subtype === 'Link' && typeof options.F === 'undefined') {\n      options.F = 1 << 2; // Print Annotation Flag\n    }\n\n    if (options.Subtype !== 'Link') {\n      if (options.C == null) {\n        options.C = this._normalizeColor(options.color || [0, 0, 0]);\n      }\n    } // convert colors\n\n\n    delete options.color;\n\n    if (typeof options.Dest === 'string') {\n      options.Dest = new String(options.Dest);\n    } // Capitalize keys\n\n\n    for (var key in options) {\n      var val = options[key];\n      options[key[0].toUpperCase() + key.slice(1)] = val;\n    }\n\n    var ref = this.ref(options);\n    this.page.annotations.push(ref);\n    ref.end();\n    return this;\n  },\n  note: function note(x, y, w, h, contents) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    options.Subtype = 'Text';\n    options.Contents = new String(contents);\n    options.Name = 'Comment';\n\n    if (options.color == null) {\n      options.color = [243, 223, 92];\n    }\n\n    return this.annotate(x, y, w, h, options);\n  },\n  goTo: function goTo(x, y, w, h, name) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    options.Subtype = 'Link';\n    options.A = this.ref({\n      S: 'GoTo',\n      D: new String(name)\n    });\n    options.A.end();\n    return this.annotate(x, y, w, h, options);\n  },\n  link: function link(x, y, w, h, url) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    options.Subtype = 'Link';\n\n    if (typeof url === 'number') {\n      // Link to a page in the document (the page must already exist)\n      var pages = this._root.data.Pages.data;\n\n      if (url >= 0 && url < pages.Kids.length) {\n        options.A = this.ref({\n          S: 'GoTo',\n          D: [pages.Kids[url], 'XYZ', null, null, null]\n        });\n        options.A.end();\n      } else {\n        throw new Error(\"The document has no page \".concat(url));\n      }\n    } else {\n      // Link to an external url\n      options.A = this.ref({\n        S: 'URI',\n        URI: new String(url)\n      });\n      options.A.end();\n    }\n\n    return this.annotate(x, y, w, h, options);\n  },\n  _markup: function _markup(x, y, w, h) {\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n    var _this$_convertRect = this._convertRect(x, y, w, h),\n        _this$_convertRect2 = _slicedToArray(_this$_convertRect, 4),\n        x1 = _this$_convertRect2[0],\n        y1 = _this$_convertRect2[1],\n        x2 = _this$_convertRect2[2],\n        y2 = _this$_convertRect2[3];\n\n    options.QuadPoints = [x1, y2, x2, y2, x1, y1, x2, y1];\n    options.Contents = new String();\n    return this.annotate(x, y, w, h, options);\n  },\n  highlight: function highlight(x, y, w, h) {\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    options.Subtype = 'Highlight';\n\n    if (options.color == null) {\n      options.color = [241, 238, 148];\n    }\n\n    return this._markup(x, y, w, h, options);\n  },\n  underline: function underline(x, y, w, h) {\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    options.Subtype = 'Underline';\n    return this._markup(x, y, w, h, options);\n  },\n  strike: function strike(x, y, w, h) {\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    options.Subtype = 'StrikeOut';\n    return this._markup(x, y, w, h, options);\n  },\n  lineAnnotation: function lineAnnotation(x1, y1, x2, y2) {\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    options.Subtype = 'Line';\n    options.Contents = new String();\n    options.L = [x1, this.page.height - y1, x2, this.page.height - y2];\n    return this.annotate(x1, y1, x2, y2, options);\n  },\n  rectAnnotation: function rectAnnotation(x, y, w, h) {\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    options.Subtype = 'Square';\n    options.Contents = new String();\n    return this.annotate(x, y, w, h, options);\n  },\n  ellipseAnnotation: function ellipseAnnotation(x, y, w, h) {\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    options.Subtype = 'Circle';\n    options.Contents = new String();\n    return this.annotate(x, y, w, h, options);\n  },\n  textAnnotation: function textAnnotation(x, y, w, h, text) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    options.Subtype = 'FreeText';\n    options.Contents = new String(text);\n    options.DA = new String();\n    return this.annotate(x, y, w, h, options);\n  },\n  fileAnnotation: function fileAnnotation(x, y, w, h) {\n    var file = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {}; // create hidden file\n\n    var filespec = this.file(file.src, Object.assign({\n      hidden: true\n    }, file));\n    options.Subtype = 'FileAttachment';\n    options.FS = filespec; // add description from filespec unless description (Contents) has already been set\n\n    if (options.Contents) {\n      options.Contents = new String(options.Contents);\n    } else if (filespec.data.Desc) {\n      options.Contents = filespec.data.Desc;\n    }\n\n    return this.annotate(x, y, w, h, options);\n  },\n  _convertRect: function _convertRect(x1, y1, w, h) {\n    // flip y1 and y2\n    var y2 = y1;\n    y1 += h; // make x2\n\n    var x2 = x1 + w; // apply current transformation matrix to points\n\n    var _this$_ctm = _slicedToArray(this._ctm, 6),\n        m0 = _this$_ctm[0],\n        m1 = _this$_ctm[1],\n        m2 = _this$_ctm[2],\n        m3 = _this$_ctm[3],\n        m4 = _this$_ctm[4],\n        m5 = _this$_ctm[5];\n\n    x1 = m0 * x1 + m2 * y1 + m4;\n    y1 = m1 * x1 + m3 * y1 + m5;\n    x2 = m0 * x2 + m2 * y2 + m4;\n    y2 = m1 * x2 + m3 * y2 + m5;\n    return [x1, y1, x2, y2];\n  }\n};\n\nvar PDFOutline = /*#__PURE__*/function () {\n  function PDFOutline(document, parent, title, dest) {\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      expanded: false\n    };\n\n    _classCallCheck(this, PDFOutline);\n\n    this.document = document;\n    this.options = options;\n    this.outlineData = {};\n\n    if (dest !== null) {\n      this.outlineData['Dest'] = [dest.dictionary, 'Fit'];\n    }\n\n    if (parent !== null) {\n      this.outlineData['Parent'] = parent;\n    }\n\n    if (title !== null) {\n      this.outlineData['Title'] = new String(title);\n    }\n\n    this.dictionary = this.document.ref(this.outlineData);\n    this.children = [];\n  }\n\n  _createClass(PDFOutline, [{\n    key: \"addItem\",\n    value: function addItem(title) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        expanded: false\n      };\n      var result = new PDFOutline(this.document, this.dictionary, title, this.document.page, options);\n      this.children.push(result);\n      return result;\n    }\n  }, {\n    key: \"endOutline\",\n    value: function endOutline() {\n      if (this.children.length > 0) {\n        if (this.options.expanded) {\n          this.outlineData.Count = this.children.length;\n        }\n\n        var first = this.children[0],\n            last = this.children[this.children.length - 1];\n        this.outlineData.First = first.dictionary;\n        this.outlineData.Last = last.dictionary;\n\n        for (var i = 0, len = this.children.length; i < len; i++) {\n          var child = this.children[i];\n\n          if (i > 0) {\n            child.outlineData.Prev = this.children[i - 1].dictionary;\n          }\n\n          if (i < this.children.length - 1) {\n            child.outlineData.Next = this.children[i + 1].dictionary;\n          }\n\n          child.endOutline();\n        }\n      }\n\n      return this.dictionary.end();\n    }\n  }]);\n\n  return PDFOutline;\n}();\n\nvar OutlineMixin = {\n  initOutline: function initOutline() {\n    return this.outline = new PDFOutline(this, null, null, null);\n  },\n  endOutline: function endOutline() {\n    this.outline.endOutline();\n\n    if (this.outline.children.length > 0) {\n      this._root.data.Outlines = this.outline.dictionary;\n      return this._root.data.PageMode = 'UseOutlines';\n    }\n  }\n};\n/*\r\nPDFStructureContent - a reference to a marked structure content\r\nBy Ben Schmidt\r\n*/\n\nvar PDFStructureContent = /*#__PURE__*/function () {\n  function PDFStructureContent(pageRef, mcid) {\n    _classCallCheck(this, PDFStructureContent);\n\n    this.refs = [{\n      pageRef: pageRef,\n      mcid: mcid\n    }];\n  }\n\n  _createClass(PDFStructureContent, [{\n    key: \"push\",\n    value: function push(structContent) {\n      var _this = this;\n\n      structContent.refs.forEach(function (ref) {\n        return _this.refs.push(ref);\n      });\n    }\n  }]);\n\n  return PDFStructureContent;\n}();\n\nvar PDFStructureElement = /*#__PURE__*/function () {\n  function PDFStructureElement(document, type) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var children = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, PDFStructureElement);\n\n    this.document = document;\n    this._attached = false;\n    this._ended = false;\n    this._flushed = false;\n    this.dictionary = document.ref({\n      // Type: \"StructElem\",\n      S: type\n    });\n    var data = this.dictionary.data;\n\n    if (Array.isArray(options) || this._isValidChild(options)) {\n      children = options;\n      options = {};\n    }\n\n    if (typeof options.title !== 'undefined') {\n      data.T = new String(options.title);\n    }\n\n    if (typeof options.lang !== 'undefined') {\n      data.Lang = new String(options.lang);\n    }\n\n    if (typeof options.alt !== 'undefined') {\n      data.Alt = new String(options.alt);\n    }\n\n    if (typeof options.expanded !== 'undefined') {\n      data.E = new String(options.expanded);\n    }\n\n    if (typeof options.actual !== 'undefined') {\n      data.ActualText = new String(options.actual);\n    }\n\n    this._children = [];\n\n    if (children) {\n      if (!Array.isArray(children)) {\n        children = [children];\n      }\n\n      children.forEach(function (child) {\n        return _this.add(child);\n      });\n      this.end();\n    }\n  }\n\n  _createClass(PDFStructureElement, [{\n    key: \"add\",\n    value: function add(child) {\n      if (this._ended) {\n        throw new Error(\"Cannot add child to already-ended structure element\");\n      }\n\n      if (!this._isValidChild(child)) {\n        throw new Error(\"Invalid structure element child\");\n      }\n\n      if (child instanceof PDFStructureElement) {\n        child.setParent(this.dictionary);\n\n        if (this._attached) {\n          child.setAttached();\n        }\n      }\n\n      if (child instanceof PDFStructureContent) {\n        this._addContentToParentTree(child);\n      }\n\n      if (typeof child === 'function' && this._attached) {\n        // _contentForClosure() adds the content to the parent tree\n        child = this._contentForClosure(child);\n      }\n\n      this._children.push(child);\n\n      return this;\n    }\n  }, {\n    key: \"_addContentToParentTree\",\n    value: function _addContentToParentTree(content) {\n      var _this2 = this;\n\n      content.refs.forEach(function (_ref) {\n        var pageRef = _ref.pageRef,\n            mcid = _ref.mcid;\n\n        var pageStructParents = _this2.document.getStructParentTree().get(pageRef.data.StructParents);\n\n        pageStructParents[mcid] = _this2.dictionary;\n      });\n    }\n  }, {\n    key: \"setParent\",\n    value: function setParent(parentRef) {\n      if (this.dictionary.data.P) {\n        throw new Error(\"Structure element added to more than one parent\");\n      }\n\n      this.dictionary.data.P = parentRef;\n\n      this._flush();\n    }\n  }, {\n    key: \"setAttached\",\n    value: function setAttached() {\n      var _this3 = this;\n\n      if (this._attached) {\n        return;\n      }\n\n      this._children.forEach(function (child, index) {\n        if (child instanceof PDFStructureElement) {\n          child.setAttached();\n        }\n\n        if (typeof child === 'function') {\n          _this3._children[index] = _this3._contentForClosure(child);\n        }\n      });\n\n      this._attached = true;\n\n      this._flush();\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (this._ended) {\n        return;\n      }\n\n      this._children.filter(function (child) {\n        return child instanceof PDFStructureElement;\n      }).forEach(function (child) {\n        return child.end();\n      });\n\n      this._ended = true;\n\n      this._flush();\n    }\n  }, {\n    key: \"_isValidChild\",\n    value: function _isValidChild(child) {\n      return child instanceof PDFStructureElement || child instanceof PDFStructureContent || typeof child === 'function';\n    }\n  }, {\n    key: \"_contentForClosure\",\n    value: function _contentForClosure(closure) {\n      var content = this.document.markStructureContent(this.dictionary.data.S);\n      closure();\n      this.document.endMarkedContent();\n\n      this._addContentToParentTree(content);\n\n      return content;\n    }\n  }, {\n    key: \"_isFlushable\",\n    value: function _isFlushable() {\n      if (!this.dictionary.data.P || !this._ended) {\n        return false;\n      }\n\n      return this._children.every(function (child) {\n        if (typeof child === 'function') {\n          return false;\n        }\n\n        if (child instanceof PDFStructureElement) {\n          return child._isFlushable();\n        }\n\n        return true;\n      });\n    }\n  }, {\n    key: \"_flush\",\n    value: function _flush() {\n      var _this4 = this;\n\n      if (this._flushed || !this._isFlushable()) {\n        return;\n      }\n\n      this.dictionary.data.K = [];\n\n      this._children.forEach(function (child) {\n        return _this4._flushChild(child);\n      });\n\n      this.dictionary.end(); // free memory used by children; the dictionary itself may still be\n      // referenced by a parent structure element or root, but we can\n      // at least trim the tree here\n\n      this._children = [];\n      this.dictionary.data.K = null;\n      this._flushed = true;\n    }\n  }, {\n    key: \"_flushChild\",\n    value: function _flushChild(child) {\n      var _this5 = this;\n\n      if (child instanceof PDFStructureElement) {\n        this.dictionary.data.K.push(child.dictionary);\n      }\n\n      if (child instanceof PDFStructureContent) {\n        child.refs.forEach(function (_ref2) {\n          var pageRef = _ref2.pageRef,\n              mcid = _ref2.mcid;\n\n          if (!_this5.dictionary.data.Pg) {\n            _this5.dictionary.data.Pg = pageRef;\n          }\n\n          if (_this5.dictionary.data.Pg === pageRef) {\n            _this5.dictionary.data.K.push(mcid);\n          } else {\n            _this5.dictionary.data.K.push({\n              Type: \"MCR\",\n              Pg: pageRef,\n              MCID: mcid\n            });\n          }\n        });\n      }\n    }\n  }]);\n\n  return PDFStructureElement;\n}();\n\nvar PDFNumberTree = /*#__PURE__*/function (_PDFTree) {\n  _inherits(PDFNumberTree, _PDFTree);\n\n  var _super = _createSuper(PDFNumberTree);\n\n  function PDFNumberTree() {\n    _classCallCheck(this, PDFNumberTree);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PDFNumberTree, [{\n    key: \"_compareKeys\",\n    value: function _compareKeys(a, b) {\n      return parseInt(a) - parseInt(b);\n    }\n  }, {\n    key: \"_keysName\",\n    value: function _keysName() {\n      return \"Nums\";\n    }\n  }, {\n    key: \"_dataForKey\",\n    value: function _dataForKey(k) {\n      return parseInt(k);\n    }\n  }]);\n\n  return PDFNumberTree;\n}(PDFTree);\n\nvar MarkingsMixin = {\n  initMarkings: function initMarkings(options) {\n    this.structChildren = [];\n\n    if (options.tagged) {\n      this.getMarkingsDictionary().data.Marked = true;\n    }\n  },\n  markContent: function markContent(tag) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    if (tag === 'Artifact' || options && options.mcid) {\n      var toClose = 0;\n      this.page.markings.forEach(function (marking) {\n        if (toClose || marking.structContent || marking.tag === 'Artifact') {\n          toClose++;\n        }\n      });\n\n      while (toClose--) {\n        this.endMarkedContent();\n      }\n    }\n\n    if (!options) {\n      this.page.markings.push({\n        tag: tag\n      });\n      this.addContent(\"/\".concat(tag, \" BMC\"));\n      return this;\n    }\n\n    this.page.markings.push({\n      tag: tag,\n      options: options\n    });\n    var dictionary = {};\n\n    if (typeof options.mcid !== 'undefined') {\n      dictionary.MCID = options.mcid;\n    }\n\n    if (tag === 'Artifact') {\n      if (typeof options.type === 'string') {\n        dictionary.Type = options.type;\n      }\n\n      if (Array.isArray(options.bbox)) {\n        dictionary.BBox = [options.bbox[0], this.page.height - options.bbox[3], options.bbox[2], this.page.height - options.bbox[1]];\n      }\n\n      if (Array.isArray(options.attached) && options.attached.every(function (val) {\n        return typeof val === 'string';\n      })) {\n        dictionary.Attached = options.attached;\n      }\n    }\n\n    if (tag === 'Span') {\n      if (options.lang) {\n        dictionary.Lang = new String(options.lang);\n      }\n\n      if (options.alt) {\n        dictionary.Alt = new String(options.alt);\n      }\n\n      if (options.expanded) {\n        dictionary.E = new String(options.expanded);\n      }\n\n      if (options.actual) {\n        dictionary.ActualText = new String(options.actual);\n      }\n    }\n\n    this.addContent(\"/\".concat(tag, \" \").concat(PDFObject.convert(dictionary), \" BDC\"));\n    return this;\n  },\n  markStructureContent: function markStructureContent(tag) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var pageStructParents = this.getStructParentTree().get(this.page.structParentTreeKey);\n    var mcid = pageStructParents.length;\n    pageStructParents.push(null);\n    this.markContent(tag, _objectSpread2(_objectSpread2({}, options), {}, {\n      mcid: mcid\n    }));\n    var structContent = new PDFStructureContent(this.page.dictionary, mcid);\n    this.page.markings.slice(-1)[0].structContent = structContent;\n    return structContent;\n  },\n  endMarkedContent: function endMarkedContent() {\n    this.page.markings.pop();\n    this.addContent('EMC');\n    return this;\n  },\n  struct: function struct(type) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var children = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    return new PDFStructureElement(this, type, options, children);\n  },\n  addStructure: function addStructure(structElem) {\n    var structTreeRoot = this.getStructTreeRoot();\n    structElem.setParent(structTreeRoot);\n    structElem.setAttached();\n    this.structChildren.push(structElem);\n\n    if (!structTreeRoot.data.K) {\n      structTreeRoot.data.K = [];\n    }\n\n    structTreeRoot.data.K.push(structElem.dictionary);\n    return this;\n  },\n  initPageMarkings: function initPageMarkings(pageMarkings) {\n    var _this = this;\n\n    pageMarkings.forEach(function (marking) {\n      if (marking.structContent) {\n        var structContent = marking.structContent;\n\n        var newStructContent = _this.markStructureContent(marking.tag, marking.options);\n\n        structContent.push(newStructContent);\n        _this.page.markings.slice(-1)[0].structContent = structContent;\n      } else {\n        _this.markContent(marking.tag, marking.options);\n      }\n    });\n  },\n  endPageMarkings: function endPageMarkings(page) {\n    var pageMarkings = page.markings;\n    pageMarkings.forEach(function () {\n      return page.write('EMC');\n    });\n    page.markings = [];\n    return pageMarkings;\n  },\n  getMarkingsDictionary: function getMarkingsDictionary() {\n    if (!this._root.data.Markings) {\n      this._root.data.Markings = this.ref({});\n    }\n\n    return this._root.data.Markings;\n  },\n  getStructTreeRoot: function getStructTreeRoot() {\n    if (!this._root.data.StructTreeRoot) {\n      this._root.data.StructTreeRoot = this.ref({\n        Type: \"StructTreeRoot\",\n        ParentTree: new PDFNumberTree(),\n        ParentTreeNextKey: 0\n      });\n    }\n\n    return this._root.data.StructTreeRoot;\n  },\n  getStructParentTree: function getStructParentTree() {\n    return this.getStructTreeRoot().data.ParentTree;\n  },\n  createStructParentTreeNextKey: function createStructParentTreeNextKey() {\n    // initialise the Markings dictionary\n    this.getMarkingsDictionary();\n    var structTreeRoot = this.getStructTreeRoot();\n    var key = structTreeRoot.data.ParentTreeNextKey++;\n    structTreeRoot.data.ParentTree.add(key, []);\n    return key;\n  },\n  endMarkings: function endMarkings() {\n    var structTreeRoot = this._root.data.StructTreeRoot;\n\n    if (structTreeRoot) {\n      structTreeRoot.end();\n      this.structChildren.forEach(function (structElem) {\n        return structElem.end();\n      });\n    }\n\n    if (this._root.data.Markings) {\n      this._root.data.Markings.end();\n    }\n  }\n};\nvar FIELD_FLAGS = {\n  readOnly: 1,\n  required: 2,\n  noExport: 4,\n  multiline: 0x1000,\n  password: 0x2000,\n  toggleToOffButton: 0x4000,\n  radioButton: 0x8000,\n  pushButton: 0x10000,\n  combo: 0x20000,\n  edit: 0x40000,\n  sort: 0x80000,\n  multiSelect: 0x200000,\n  noSpell: 0x400000\n};\nvar FIELD_JUSTIFY = {\n  left: 0,\n  center: 1,\n  right: 2\n};\nvar VALUE_MAP = {\n  value: 'V',\n  defaultValue: 'DV'\n};\nvar FORMAT_SPECIAL = {\n  zip: '0',\n  zipPlus4: '1',\n  zip4: '1',\n  phone: '2',\n  ssn: '3'\n};\nvar FORMAT_DEFAULT = {\n  number: {\n    nDec: 0,\n    sepComma: false,\n    negStyle: 'MinusBlack',\n    currency: '',\n    currencyPrepend: true\n  },\n  percent: {\n    nDec: 0,\n    sepComma: false\n  }\n};\nvar AcroFormMixin = {\n  /**\r\n   * Must call if adding AcroForms to a document. Must also call font() before\r\n   * this method to set the default font.\r\n   */\n  initForm: function initForm() {\n    if (!this._font) {\n      throw new Error('Must set a font before calling initForm method');\n    }\n\n    this._acroform = {\n      fonts: {},\n      defaultFont: this._font.name\n    };\n    this._acroform.fonts[this._font.id] = this._font.ref();\n    var data = {\n      Fields: [],\n      NeedAppearances: true,\n      DA: new String(\"/\".concat(this._font.id, \" 0 Tf 0 g\")),\n      DR: {\n        Font: {}\n      }\n    };\n    data.DR.Font[this._font.id] = this._font.ref();\n    var AcroForm = this.ref(data);\n    this._root.data.AcroForm = AcroForm;\n    return this;\n  },\n\n  /**\r\n   * Called automatically by document.js\r\n   */\n  endAcroForm: function endAcroForm() {\n    var _this = this;\n\n    if (this._root.data.AcroForm) {\n      if (!Object.keys(this._acroform.fonts).length && !this._acroform.defaultFont) {\n        throw new Error('No fonts specified for PDF form');\n      }\n\n      var fontDict = this._root.data.AcroForm.data.DR.Font;\n      Object.keys(this._acroform.fonts).forEach(function (name) {\n        fontDict[name] = _this._acroform.fonts[name];\n      });\n\n      this._root.data.AcroForm.data.Fields.forEach(function (fieldRef) {\n        _this._endChild(fieldRef);\n      });\n\n      this._root.data.AcroForm.end();\n    }\n\n    return this;\n  },\n  _endChild: function _endChild(ref) {\n    var _this2 = this;\n\n    if (Array.isArray(ref.data.Kids)) {\n      ref.data.Kids.forEach(function (childRef) {\n        _this2._endChild(childRef);\n      });\n      ref.end();\n    }\n\n    return this;\n  },\n\n  /**\r\n   * Creates and adds a form field to the document. Form fields are intermediate\r\n   * nodes in a PDF form that are used to specify form name heirarchy and form\r\n   * value defaults.\r\n   * @param {string} name - field name (T attribute in field dictionary)\r\n   * @param {object} options  - other attributes to include in field dictionary\r\n   */\n  formField: function formField(name) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var fieldDict = this._fieldDict(name, null, options);\n\n    var fieldRef = this.ref(fieldDict);\n\n    this._addToParent(fieldRef);\n\n    return fieldRef;\n  },\n\n  /**\r\n   * Creates and adds a Form Annotation to the document. Form annotations are\r\n   * called Widget annotations internally within a PDF file.\r\n   * @param {string} name - form field name (T attribute of widget annotation\r\n   * dictionary)\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @param {number} w\r\n   * @param {number} h\r\n   * @param {object} options\r\n   */\n  formAnnotation: function formAnnotation(name, type, x, y, w, h) {\n    var options = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\n\n    var fieldDict = this._fieldDict(name, type, options);\n\n    fieldDict.Subtype = 'Widget';\n\n    if (fieldDict.F === undefined) {\n      fieldDict.F = 4; // print the annotation\n    } // Add Field annot to page, and get it's ref\n\n\n    this.annotate(x, y, w, h, fieldDict);\n    var annotRef = this.page.annotations[this.page.annotations.length - 1];\n    return this._addToParent(annotRef);\n  },\n  formText: function formText(name, x, y, w, h) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    return this.formAnnotation(name, 'text', x, y, w, h, options);\n  },\n  formPushButton: function formPushButton(name, x, y, w, h) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    return this.formAnnotation(name, 'pushButton', x, y, w, h, options);\n  },\n  formCombo: function formCombo(name, x, y, w, h) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    return this.formAnnotation(name, 'combo', x, y, w, h, options);\n  },\n  formList: function formList(name, x, y, w, h) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    return this.formAnnotation(name, 'list', x, y, w, h, options);\n  },\n  formRadioButton: function formRadioButton(name, x, y, w, h) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    return this.formAnnotation(name, 'radioButton', x, y, w, h, options);\n  },\n  formCheckbox: function formCheckbox(name, x, y, w, h) {\n    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    return this.formAnnotation(name, 'checkbox', x, y, w, h, options);\n  },\n  _addToParent: function _addToParent(fieldRef) {\n    var parent = fieldRef.data.Parent;\n\n    if (parent) {\n      if (!parent.data.Kids) {\n        parent.data.Kids = [];\n      }\n\n      parent.data.Kids.push(fieldRef);\n    } else {\n      this._root.data.AcroForm.data.Fields.push(fieldRef);\n    }\n\n    return this;\n  },\n  _fieldDict: function _fieldDict(name, type) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (!this._acroform) {\n      throw new Error('Call document.initForms() method before adding form elements to document');\n    }\n\n    var opts = Object.assign({}, options);\n\n    if (type !== null) {\n      opts = this._resolveType(type, options);\n    }\n\n    opts = this._resolveFlags(opts);\n    opts = this._resolveJustify(opts);\n    opts = this._resolveFont(opts);\n    opts = this._resolveStrings(opts);\n    opts = this._resolveColors(opts);\n    opts = this._resolveFormat(opts);\n    opts.T = new String(name);\n\n    if (opts.parent) {\n      opts.Parent = opts.parent;\n      delete opts.parent;\n    }\n\n    return opts;\n  },\n  _resolveType: function _resolveType(type, opts) {\n    if (type === 'text') {\n      opts.FT = 'Tx';\n    } else if (type === 'pushButton') {\n      opts.FT = 'Btn';\n      opts.pushButton = true;\n    } else if (type === 'radioButton') {\n      opts.FT = 'Btn';\n      opts.radioButton = true;\n    } else if (type === 'checkbox') {\n      opts.FT = 'Btn';\n    } else if (type === 'combo') {\n      opts.FT = 'Ch';\n      opts.combo = true;\n    } else if (type === 'list') {\n      opts.FT = 'Ch';\n    } else {\n      throw new Error(\"Invalid form annotation type '\".concat(type, \"'\"));\n    }\n\n    return opts;\n  },\n  _resolveFormat: function _resolveFormat(opts) {\n    var f = opts.format;\n\n    if (f && f.type) {\n      var fnKeystroke;\n      var fnFormat;\n      var params = '';\n\n      if (FORMAT_SPECIAL[f.type] !== undefined) {\n        fnKeystroke = \"AFSpecial_Keystroke\";\n        fnFormat = \"AFSpecial_Format\";\n        params = FORMAT_SPECIAL[f.type];\n      } else {\n        var format = f.type.charAt(0).toUpperCase() + f.type.slice(1);\n        fnKeystroke = \"AF\".concat(format, \"_Keystroke\");\n        fnFormat = \"AF\".concat(format, \"_Format\");\n\n        if (f.type === 'date') {\n          fnKeystroke += 'Ex';\n          params = String(f.param);\n        } else if (f.type === 'time') {\n          params = String(f.param);\n        } else if (f.type === 'number') {\n          var p = Object.assign({}, FORMAT_DEFAULT.number, f);\n          params = String([String(p.nDec), p.sepComma ? '0' : '1', '\"' + p.negStyle + '\"', 'null', '\"' + p.currency + '\"', String(p.currencyPrepend)].join(','));\n        } else if (f.type === 'percent') {\n          var _p = Object.assign({}, FORMAT_DEFAULT.percent, f);\n\n          params = String([String(_p.nDec), _p.sepComma ? '0' : '1'].join(','));\n        }\n      }\n\n      opts.AA = opts.AA ? opts.AA : {};\n      opts.AA.K = {\n        S: 'JavaScript',\n        JS: new String(\"\".concat(fnKeystroke, \"(\").concat(params, \");\"))\n      };\n      opts.AA.F = {\n        S: 'JavaScript',\n        JS: new String(\"\".concat(fnFormat, \"(\").concat(params, \");\"))\n      };\n    }\n\n    delete opts.format;\n    return opts;\n  },\n  _resolveColors: function _resolveColors(opts) {\n    var color = this._normalizeColor(opts.backgroundColor);\n\n    if (color) {\n      if (!opts.MK) {\n        opts.MK = {};\n      }\n\n      opts.MK.BG = color;\n    }\n\n    color = this._normalizeColor(opts.borderColor);\n\n    if (color) {\n      if (!opts.MK) {\n        opts.MK = {};\n      }\n\n      opts.MK.BC = color;\n    }\n\n    delete opts.backgroundColor;\n    delete opts.borderColor;\n    return opts;\n  },\n  _resolveFlags: function _resolveFlags(options) {\n    var result = 0;\n    Object.keys(options).forEach(function (key) {\n      if (FIELD_FLAGS[key]) {\n        result |= FIELD_FLAGS[key];\n        delete options[key];\n      }\n    });\n\n    if (result !== 0) {\n      options.Ff = options.Ff ? options.Ff : 0;\n      options.Ff |= result;\n    }\n\n    return options;\n  },\n  _resolveJustify: function _resolveJustify(options) {\n    var result = 0;\n\n    if (options.align !== undefined) {\n      if (typeof FIELD_JUSTIFY[options.align] === 'number') {\n        result = FIELD_JUSTIFY[options.align];\n      }\n\n      delete options.align;\n    }\n\n    if (result !== 0) {\n      options.Q = result; // default\n    }\n\n    return options;\n  },\n  _resolveFont: function _resolveFont(options) {\n    // add current font to document-level AcroForm dict if necessary\n    if (this._acroform.fonts[this._font.id] === null) {\n      this._acroform.fonts[this._font.id] = this._font.ref();\n    } // add current font to field's resource dict (RD) if not the default acroform font\n\n\n    if (this._acroform.defaultFont !== this._font.name) {\n      options.DR = {\n        Font: {}\n      };\n      options.DR.Font[this._font.id] = this._font.ref();\n      options.DA = new String(\"/\".concat(this._font.id, \" 0 Tf 0 g\"));\n    }\n\n    return options;\n  },\n  _resolveStrings: function _resolveStrings(options) {\n    var select = [];\n\n    function appendChoices(a) {\n      if (Array.isArray(a)) {\n        for (var idx = 0; idx < a.length; idx++) {\n          if (typeof a[idx] === 'string') {\n            select.push(new String(a[idx]));\n          } else {\n            select.push(a[idx]);\n          }\n        }\n      }\n    }\n\n    appendChoices(options.Opt);\n\n    if (options.select) {\n      appendChoices(options.select);\n      delete options.select;\n    }\n\n    if (select.length) {\n      options.Opt = select;\n    }\n\n    Object.keys(VALUE_MAP).forEach(function (key) {\n      if (options[key] !== undefined) {\n        options[VALUE_MAP[key]] = options[key];\n        delete options[key];\n      }\n    });\n    ['V', 'DV'].forEach(function (key) {\n      if (typeof options[key] === 'string') {\n        options[key] = new String(options[key]);\n      }\n    });\n\n    if (options.MK && options.MK.CA) {\n      options.MK.CA = new String(options.MK.CA);\n    }\n\n    if (options.label) {\n      options.MK = options.MK ? options.MK : {};\n      options.MK.CA = new String(options.label);\n      delete options.label;\n    }\n\n    return options;\n  }\n};\nvar AttachmentsMixin = {\n  /**\r\n   * Embed contents of `src` in PDF\r\n   * @param {Buffer | ArrayBuffer | string} src input Buffer, ArrayBuffer, base64 encoded string or path to file\r\n   * @param {object} options\r\n   *  * options.name: filename to be shown in PDF, will use `src` if none set\r\n   *  * options.type: filetype to be shown in PDF\r\n   *  * options.description: description to be shown in PDF\r\n   *  * options.hidden: if true, do not add attachment to EmbeddedFiles dictionary. Useful for file attachment annotations\r\n   *  * options.creationDate: override creation date\r\n   *  * options.modifiedDate: override modified date\r\n   * @returns filespec reference\r\n   */\n  file: function file(src) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    options.name = options.name || src;\n    var refBody = {\n      Type: 'EmbeddedFile',\n      Params: {}\n    };\n    var data;\n\n    if (!src) {\n      throw new Error('No src specified');\n    }\n\n    if (Buffer.isBuffer(src)) {\n      data = src;\n    } else if (src instanceof ArrayBuffer) {\n      data = Buffer.from(new Uint8Array(src));\n    } else {\n      var match;\n\n      if (match = /^data:(.*);base64,(.*)$/.exec(src)) {\n        if (match[1]) {\n          refBody.Subtype = match[1].replace('/', '#2F');\n        }\n\n        data = Buffer.from(match[2], 'base64');\n      } else {\n        data = fs.readFileSync(src);\n\n        if (!data) {\n          throw new Error(\"Could not read contents of file at filepath \".concat(src));\n        } // update CreationDate and ModDate\n\n\n        var _fs$statSync = fs.statSync(src),\n            birthtime = _fs$statSync.birthtime,\n            ctime = _fs$statSync.ctime;\n\n        refBody.Params.CreationDate = birthtime;\n        refBody.Params.ModDate = ctime;\n      }\n    } // override creation date and modified date\n\n\n    if (options.creationDate instanceof Date) {\n      refBody.Params.CreationDate = options.creationDate;\n    }\n\n    if (options.modifiedDate instanceof Date) {\n      refBody.Params.ModDate = options.modifiedDate;\n    } // add optional subtype\n\n\n    if (options.type) {\n      refBody.Subtype = options.type.replace('/', '#2F');\n    } // add checksum and size information\n\n\n    var checksum = CryptoJS.MD5(CryptoJS.lib.WordArray.create(new Uint8Array(data)));\n    refBody.Params.CheckSum = new String(checksum);\n    refBody.Params.Size = data.byteLength; // save some space when embedding the same file again\n    // if a file with the same name and metadata exists, reuse its reference\n\n    var ref;\n    if (!this._fileRegistry) this._fileRegistry = {};\n    var file = this._fileRegistry[options.name];\n\n    if (file && isEqual(refBody, file)) {\n      ref = file.ref;\n    } else {\n      ref = this.ref(refBody);\n      ref.end(data);\n      this._fileRegistry[options.name] = _objectSpread2(_objectSpread2({}, refBody), {}, {\n        ref: ref\n      });\n    } // add filespec for embedded file\n\n\n    var fileSpecBody = {\n      Type: 'Filespec',\n      F: new String(options.name),\n      EF: {\n        F: ref\n      },\n      UF: new String(options.name)\n    };\n\n    if (options.description) {\n      fileSpecBody.Desc = new String(options.description);\n    }\n\n    var filespec = this.ref(fileSpecBody);\n    filespec.end();\n\n    if (!options.hidden) {\n      this.addNamedEmbeddedFile(options.name, filespec);\n    }\n\n    return filespec;\n  }\n};\n/** check two embedded file metadata objects for equality */\n\nfunction isEqual(a, b) {\n  if (a.Subtype !== b.Subtype || a.Params.CheckSum.toString() !== b.Params.CheckSum.toString() || a.Params.Size !== b.Params.Size || a.Params.CreationDate !== b.Params.CreationDate || a.Params.ModDate !== b.Params.ModDate) {\n    return false;\n  }\n\n  return true;\n}\n\nvar PDFDocument = /*#__PURE__*/function (_stream$Readable) {\n  _inherits(PDFDocument, _stream$Readable);\n\n  var _super = _createSuper(PDFDocument);\n\n  function PDFDocument() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PDFDocument);\n\n    _this = _super.call(this, options);\n    _this.options = options; // PDF version\n\n    switch (options.pdfVersion) {\n      case '1.4':\n        _this.version = 1.4;\n        break;\n\n      case '1.5':\n        _this.version = 1.5;\n        break;\n\n      case '1.6':\n        _this.version = 1.6;\n        break;\n\n      case '1.7':\n      case '1.7ext3':\n        _this.version = 1.7;\n        break;\n\n      default:\n        _this.version = 1.3;\n        break;\n    } // Whether streams should be compressed\n\n\n    _this.compress = _this.options.compress != null ? _this.options.compress : true;\n    _this._pageBuffer = [];\n    _this._pageBufferStart = 0; // The PDF object store\n\n    _this._offsets = [];\n    _this._waiting = 0;\n    _this._ended = false;\n    _this._offset = 0;\n\n    var Pages = _this.ref({\n      Type: 'Pages',\n      Count: 0,\n      Kids: []\n    });\n\n    var Names = _this.ref({\n      Dests: new PDFNameTree()\n    });\n\n    _this._root = _this.ref({\n      Type: 'Catalog',\n      Pages: Pages,\n      Names: Names\n    });\n\n    if (_this.options.lang) {\n      _this._root.data.Lang = new String(_this.options.lang);\n    } // The current page\n\n\n    _this.page = null; // Initialize mixins\n\n    _this.initColor();\n\n    _this.initVector();\n\n    _this.initFonts(options.font);\n\n    _this.initText();\n\n    _this.initImages();\n\n    _this.initOutline();\n\n    _this.initMarkings(options); // Initialize the metadata\n\n\n    _this.info = {\n      Producer: 'PDFKit',\n      Creator: 'PDFKit',\n      CreationDate: new Date()\n    };\n\n    if (_this.options.info) {\n      for (var key in _this.options.info) {\n        var val = _this.options.info[key];\n        _this.info[key] = val;\n      }\n    }\n\n    if (_this.options.displayTitle) {\n      _this._root.data.ViewerPreferences = _this.ref({\n        DisplayDocTitle: true\n      });\n    } // Generate file ID\n\n\n    _this._id = PDFSecurity.generateFileID(_this.info); // Initialize security settings\n\n    _this._security = PDFSecurity.create(_assertThisInitialized(_this), options); // Write the header\n    // PDF version\n\n    _this._write(\"%PDF-\".concat(_this.version)); // 4 binary chars, as recommended by the spec\n\n\n    _this._write('%\\xFF\\xFF\\xFF\\xFF'); // Add the first page\n\n\n    if (_this.options.autoFirstPage !== false) {\n      _this.addPage();\n    }\n\n    return _this;\n  }\n\n  _createClass(PDFDocument, [{\n    key: \"addPage\",\n    value: function addPage(options) {\n      if (options == null) {\n        options = this.options;\n      } // end the current page if needed\n\n\n      if (!this.options.bufferPages) {\n        this.flushPages();\n      } // create a page object\n\n\n      this.page = new PDFPage(this, options);\n\n      this._pageBuffer.push(this.page); // add the page to the object store\n\n\n      var pages = this._root.data.Pages.data;\n      pages.Kids.push(this.page.dictionary);\n      pages.Count++; // reset x and y coordinates\n\n      this.x = this.page.margins.left;\n      this.y = this.page.margins.top; // flip PDF coordinate system so that the origin is in\n      // the top left rather than the bottom left\n\n      this._ctm = [1, 0, 0, 1, 0, 0];\n      this.transform(1, 0, 0, -1, 0, this.page.height);\n      this.emit('pageAdded');\n      return this;\n    }\n  }, {\n    key: \"continueOnNewPage\",\n    value: function continueOnNewPage(options) {\n      var pageMarkings = this.endPageMarkings(this.page);\n      this.addPage(options);\n      this.initPageMarkings(pageMarkings);\n      return this;\n    }\n  }, {\n    key: \"bufferedPageRange\",\n    value: function bufferedPageRange() {\n      return {\n        start: this._pageBufferStart,\n        count: this._pageBuffer.length\n      };\n    }\n  }, {\n    key: \"switchToPage\",\n    value: function switchToPage(n) {\n      var page;\n\n      if (!(page = this._pageBuffer[n - this._pageBufferStart])) {\n        throw new Error(\"switchToPage(\".concat(n, \") out of bounds, current buffer covers pages \").concat(this._pageBufferStart, \" to \").concat(this._pageBufferStart + this._pageBuffer.length - 1));\n      }\n\n      return this.page = page;\n    }\n  }, {\n    key: \"flushPages\",\n    value: function flushPages() {\n      // this local variable exists so we're future-proof against\n      // reentrant calls to flushPages.\n      var pages = this._pageBuffer;\n      this._pageBuffer = [];\n      this._pageBufferStart += pages.length;\n\n      var _iterator = _createForOfIteratorHelper(pages),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var page = _step.value;\n          this.endPageMarkings(page);\n          page.end();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"addNamedDestination\",\n    value: function addNamedDestination(name) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (args.length === 0) {\n        args = ['XYZ', null, null, null];\n      }\n\n      if (args[0] === 'XYZ' && args[2] !== null) {\n        args[2] = this.page.height - args[2];\n      }\n\n      args.unshift(this.page.dictionary);\n\n      this._root.data.Names.data.Dests.add(name, args);\n    }\n  }, {\n    key: \"addNamedEmbeddedFile\",\n    value: function addNamedEmbeddedFile(name, ref) {\n      if (!this._root.data.Names.data.EmbeddedFiles) {\n        // disabling /Limits for this tree fixes attachments not showing in Adobe Reader\n        this._root.data.Names.data.EmbeddedFiles = new PDFNameTree({\n          limits: false\n        });\n      } // add filespec to EmbeddedFiles\n\n\n      this._root.data.Names.data.EmbeddedFiles.add(name, ref);\n    }\n  }, {\n    key: \"addNamedJavaScript\",\n    value: function addNamedJavaScript(name, js) {\n      if (!this._root.data.Names.data.JavaScript) {\n        this._root.data.Names.data.JavaScript = new PDFNameTree();\n      }\n\n      var data = {\n        JS: new String(js),\n        S: 'JavaScript'\n      };\n\n      this._root.data.Names.data.JavaScript.add(name, data);\n    }\n  }, {\n    key: \"ref\",\n    value: function ref(data) {\n      var ref = new PDFReference(this, this._offsets.length + 1, data);\n\n      this._offsets.push(null); // placeholder for this object's offset once it is finalized\n\n\n      this._waiting++;\n      return ref;\n    }\n  }, {\n    key: \"_read\",\n    value: function _read() {} // do nothing, but this method is required by node\n\n  }, {\n    key: \"_write\",\n    value: function _write(data) {\n      if (!Buffer.isBuffer(data)) {\n        data = Buffer.from(data + '\\n', 'binary');\n      }\n\n      this.push(data);\n      return this._offset += data.length;\n    }\n  }, {\n    key: \"addContent\",\n    value: function addContent(data) {\n      this.page.write(data);\n      return this;\n    }\n  }, {\n    key: \"_refEnd\",\n    value: function _refEnd(ref) {\n      this._offsets[ref.id - 1] = ref.offset;\n\n      if (--this._waiting === 0 && this._ended) {\n        this._finalize();\n\n        return this._ended = false;\n      }\n    }\n  }, {\n    key: \"write\",\n    value: function write(filename, fn) {\n      // print a deprecation warning with a stacktrace\n      var err = new Error(\"PDFDocument#write is deprecated, and will be removed in a future version of PDFKit. Please pipe the document into a Node stream.\");\n      console.warn(err.stack);\n      this.pipe(fs.createWriteStream(filename));\n      this.end();\n      return this.once('end', fn);\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      this.flushPages();\n      this._info = this.ref();\n\n      for (var key in this.info) {\n        var val = this.info[key];\n\n        if (typeof val === 'string') {\n          val = new String(val);\n        }\n\n        var entry = this.ref(val);\n        entry.end();\n        this._info.data[key] = entry;\n      }\n\n      this._info.end();\n\n      for (var name in this._fontFamilies) {\n        var font = this._fontFamilies[name];\n        font.finalize();\n      }\n\n      this.endOutline();\n      this.endMarkings();\n\n      this._root.end();\n\n      this._root.data.Pages.end();\n\n      this._root.data.Names.end();\n\n      this.endAcroForm();\n\n      if (this._root.data.ViewerPreferences) {\n        this._root.data.ViewerPreferences.end();\n      }\n\n      if (this._security) {\n        this._security.end();\n      }\n\n      if (this._waiting === 0) {\n        return this._finalize();\n      } else {\n        return this._ended = true;\n      }\n    }\n  }, {\n    key: \"_finalize\",\n    value: function _finalize() {\n      // generate xref\n      var xRefOffset = this._offset;\n\n      this._write('xref');\n\n      this._write(\"0 \".concat(this._offsets.length + 1));\n\n      this._write('0000000000 65535 f ');\n\n      var _iterator2 = _createForOfIteratorHelper(this._offsets),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var offset = _step2.value;\n          offset = \"0000000000\".concat(offset).slice(-10);\n\n          this._write(offset + ' 00000 n ');\n        } // trailer\n\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var trailer = {\n        Size: this._offsets.length + 1,\n        Root: this._root,\n        Info: this._info,\n        ID: [this._id, this._id]\n      };\n\n      if (this._security) {\n        trailer.Encrypt = this._security.dictionary;\n      }\n\n      this._write('trailer');\n\n      this._write(PDFObject.convert(trailer));\n\n      this._write('startxref');\n\n      this._write(\"\".concat(xRefOffset));\n\n      this._write('%%EOF'); // end the stream\n\n\n      return this.push(null);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return '[object PDFDocument]';\n    }\n  }]);\n\n  return PDFDocument;\n}(stream.Readable);\n\nvar mixin = function mixin(methods) {\n  Object.assign(PDFDocument.prototype, methods);\n};\n\nmixin(ColorMixin);\nmixin(VectorMixin);\nmixin(FontsMixin);\nmixin(TextMixin);\nmixin(ImagesMixin);\nmixin(AnnotationsMixin);\nmixin(OutlineMixin);\nmixin(MarkingsMixin);\nmixin(AcroFormMixin);\nmixin(AttachmentsMixin);\nPDFDocument.LineWrapper = LineWrapper;\nexport default PDFDocument;","map":{"version":3,"sources":["../lib/abstract_reference.js","../lib/tree.js","../lib/object.js","../lib/reference.js","../lib/page.js","../lib/name_tree.js","../lib/saslprep/lib/util.js","../lib/saslprep/lib/code-points.js","../lib/saslprep/index.js","../lib/security.js","../lib/gradient.js","../lib/mixins/color.js","../lib/path.js","../lib/mixins/vector.js","../lib/font/afm.js","../lib/font.js","../lib/font/standard.js","../lib/font/embedded.js","../lib/font_factory.js","../lib/mixins/fonts.js","../lib/line_wrapper.js","../lib/mixins/text.js","../lib/image/jpeg.js","../lib/image/png.js","../lib/image.js","../lib/mixins/images.js","../lib/mixins/annotations.js","../lib/outline.js","../lib/mixins/outline.js","../lib/structure_content.js","../lib/structure_element.js","../lib/number_tree.js","../lib/mixins/markings.js","../lib/mixins/acroform.js","../lib/mixins/attachments.js","../lib/document.js"],"names":["PDFAbstractReference","PDFTree","options","key","val","sortedKeys","out","first","last","PDFObject","pad","Array","length","escapableRe","escapable","swapBytes","l","buff","i","end","a","object","encryptFn","string","isUnicode","stringBuffer","Buffer","items","n","Math","PDFReference","data","chunk","zlib","DEFAULT_MARGINS","top","left","bottom","right","SIZES","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","RA0","RA1","RA2","RA3","RA4","SRA0","SRA1","SRA2","SRA3","SRA4","EXECUTIVE","FOLIO","LEGAL","LETTER","TABLOID","PDFPage","margin","dimensions","ProcSet","Type","Parent","MediaBox","Contents","Resources","resources","PDFNameTree","b","k","value","rangeGroup","startRange","endRange","middleRange","arrayIndex","unassigned_code_points","isUnassignedCodePoint","inRange","commonly_mapped_to_nothing","isCommonlyMappedToNothing","non_ASCII_space_characters","isNonASCIISpaceCharacter","non_ASCII_controls_characters","non_character_codepoints","prohibited_characters","isProhibitedCharacter","bidirectional_r_al","isBidirectionalRAL","bidirectional_l","isBidirectionalL","mapping2space","mapping2nothing","getCodePoint","character","x","codepoints","size","input","before","next","opts","mapped_input","normalized_input","String","normalized_map","toCodePoints","hasProhibited","hasUnassigned","hasBidiRAL","hasBidiL","isFirstBidiRAL","isLastBidiRAL","PDFSecurity","info","infoStr","wordArrayToBuffer","CryptoJS","bytes","document","encDict","Filter","v","r","permissions","getPermissionsR2","getPermissionsR3","paddedUserPassword","processPasswordR2R3R4","paddedOwnerPassword","ownerPasswordEntry","getOwnerPasswordR2R3R4","getEncryptionKeyR2R3R4","userPasswordEntry","getUserPasswordR2","getUserPasswordR3R4","StdCF","AuthEvent","CFM","Length","processedUserPassword","processPasswordR5","processedOwnerPassword","getEncryptionKeyR5","getUserPasswordR5","userKeySalt","userEncryptionKeyEntry","getUserEncryptionKeyR5","getOwnerPasswordR5","ownerKeySalt","ownerEncryptionKeyEntry","getOwnerEncryptionKeyR5","permsEntry","getEncryptedPermissionsR5","obj","gen","digest","iv","mode","padding","permissionObject","encryptionKey","cipher","xorRound","j","round","keyBits","lsbFirstWord","validationSalt","generateRandomWordArray","keySalt","NoPadding","password","index","code","PASSWORD_PADDING","unescape","encodeURIComponent","saslprep","byteArray","wordArray","number","PDFGradient","pos","color","opacity","m11","m12","m21","m22","dx","dy","m","stopsLength","bounds","encode","stops","fn","FunctionType","Domain","N","Functions","Bounds","Encode","shader","pattern","PatternType","Shading","Matrix","stop","grad","pageBBox","form","Subtype","FormType","BBox","Group","S","CS","Pattern","Sh1","gstate","SMask","G","opacityPattern","PaintType","TilingType","XStep","YStep","ExtGState","Gs1","op","m0","m1","m2","m3","m4","m5","PDFLinearGradient","ShadingType","ColorSpace","Coords","Function","Extend","PDFRadialGradient","Gradient","initColor","_normalizeColor","hex","parseInt","namedColors","part","_setColor","stroke","space","_setColorSpace","fillColor","set","strokeColor","fillOpacity","strokeOpacity","_doOpacity","dictionary","name","id","linearGradient","radialGradient","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","cx","cy","px","py","sx","sy","parameters","A","C","c","H","h","L","M","Q","q","s","T","t","V","Z","z","parse","ret","args","curArg","foundDecimal","params","cmd","apply","commands","runners","doc","solveArc","rx","ry","rot","large","sweep","ex","ey","segs","arcToSegments","seg","bez","segmentToBezier","th","rotateX","sin_th","cos_th","ox","oy","pl","a00","a01","a10","a11","x0","y0","x1","y1","d","sfactor_sq","sfactor","xc","yc","th0","th1","th_arc","segments","result","th2","th3","th_half","x3","y3","x2","y2","SVGPath","path","KAPPA","initVector","save","restore","closePath","lineWidth","_CAP_STYLES","BUTT","ROUND","SQUARE","lineCap","_JOIN_STYLES","MITER","BEVEL","lineJoin","miterLimit","dash","originalLength","valid","Number","JSON","undash","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","rect","roundedRect","y","ellipse","r2","r1","xe","ye","xm","ym","circle","arc","anticlockwise","TWO_PI","HALF_PI","deltaAng","endAngle","dir","numSegs","segAng","handleLen","curAng","deltaCx","deltaCy","ax","ay","segIdx","cp1x","cp1y","cp2x","cp2y","polygon","points","point","_windingRule","fill","rule","fillAndStroke","isFillRule","clip","transform","values","translate","rotate","rad","angle","cos","sin","scale","yFactor","xFactor","WIN_ANSI_MAP","characters","AFMFont","filename","fs","char","section","line","match","text","res","len","glyphs","charCode","glyph","advances","PDFFont","includeGap","gap","STANDARD_FONTS","Courier","__dirname","Helvetica","Symbol","ZapfDingbats","StandardFont","BaseFont","Encoding","encoded","positions","xAdvance","yAdvance","xOffset","yOffset","advanceWidth","width","advance","toHex","num","EmbeddedFont","Object","features","run","position","cached","onlyWidth","needle","gid","isCFF","fontFile","familyClass","flags","tag","bbox","descriptor","FontName","Flags","FontBBox","ItalicAngle","Ascent","Descent","CapHeight","XHeight","StemV","descendantFontData","CIDSystemInfo","Registry","Ordering","Supplement","FontDescriptor","W","descendantFont","DescendantFonts","ToUnicode","cmap","entries","codePoints","PDFFontFactory","src","family","font","fontkit","initFonts","defaultFont","cacheKey","fontSize","currentLineHeight","registerFont","LineWrapper","EventEmitter","indent","align","word","breaker","wordWidths","bk","w","lbk","fbk","mightGrow","mustShrink","shouldContinue","required","nextY","buffer","textWidth","wc","lc","emitLine","lh","initText","lineGap","moveDown","lines","moveUp","_text","addStructure","wrapper","lineCallback","widthOfString","heightOfString","height","list","listType","unit","midLine","itemIndent","level","levels","numbers","flatten","item","label","letter","times","itemType","labelType","bodyType","diff","_initOptions","_line","_fragment","wordSpacing","characterSpacing","words","spaceWidth","renderedWidth","lineY","skew","encodedWord","positionsWord","hadOffset","addSegment","cur","flush","MARKERS","COLOR_SPACE_MAP","JPEG","marker","channels","BitsPerComponent","Width","Height","PNGImage","dataDecoded","hasAlphaChannel","isInterlaced","Predictor","Colors","Columns","palette","rgb","mask","sMask","Decode","colorCount","pixelCount","imgData","alphaChannel","p","pixels","skipByteCount","colorIndex","transparency","PDFImage","initImages","image","left1","wp","hp","bw","bh","bp","ip","openImage","annotate","ref","note","goTo","D","link","pages","url","URI","_markup","highlight","underline","strike","lineAnnotation","rectAnnotation","ellipseAnnotation","textAnnotation","fileAnnotation","file","filespec","hidden","_convertRect","PDFOutline","expanded","dest","parent","title","child","initOutline","endOutline","PDFStructureContent","pageRef","mcid","structContent","PDFStructureElement","children","type","content","pageStructParents","parentRef","closure","Pg","MCID","PDFNumberTree","initMarkings","markContent","toClose","marking","markStructureContent","endMarkedContent","struct","structTreeRoot","structElem","initPageMarkings","pageMarkings","newStructContent","endPageMarkings","page","getMarkingsDictionary","getStructTreeRoot","ParentTree","ParentTreeNextKey","getStructParentTree","createStructParentTreeNextKey","endMarkings","FIELD_FLAGS","readOnly","noExport","multiline","toggleToOffButton","radioButton","pushButton","combo","edit","sort","multiSelect","noSpell","FIELD_JUSTIFY","center","VALUE_MAP","defaultValue","FORMAT_SPECIAL","zip","zipPlus4","zip4","phone","ssn","FORMAT_DEFAULT","nDec","sepComma","negStyle","currency","currencyPrepend","percent","initForm","fonts","Fields","NeedAppearances","DA","DR","Font","AcroForm","endAcroForm","fontDict","_endChild","formField","fieldDict","fieldRef","formAnnotation","annotRef","formText","formPushButton","formCombo","formList","formRadioButton","formCheckbox","_addToParent","_fieldDict","_resolveType","_resolveFormat","f","fnKeystroke","fnFormat","format","JS","_resolveColors","_resolveFlags","_resolveJustify","_resolveFont","_resolveStrings","select","idx","appendChoices","refBody","Params","birthtime","ctime","checksum","isEqual","fileSpecBody","F","EF","UF","PDFDocument","stream","Readable","Pages","Count","Kids","Names","Dests","Producer","Creator","CreationDate","DisplayDocTitle","start","count","limits","js","err","console","entry","xRefOffset","offset","trailer","Size","Root","Info","ID","mixin"],"mappings":"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A,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAAA,EAAA,OAA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,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA,MAAA,EAAA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","sourcesContent":["/*\r\nPDFAbstractReference - abstract class for PDF reference\r\n*/\r\n\r\nclass PDFAbstractReference {\r\n  toString() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n}\r\n\r\nexport default PDFAbstractReference;\r\n","/*\r\nPDFTree - abstract base class for name and number tree objects\r\n*/\r\n\r\nimport PDFObject from './object';\r\n\r\nclass PDFTree {\r\n  constructor(options = {}) {\r\n    this._items = {};\r\n    // disable /Limits output for this tree\r\n    this.limits =\r\n      typeof options.limits === 'boolean' ? options.limits : true;\r\n  }\r\n\r\n  add(key, val) {\r\n    return (this._items[key] = val);\r\n  }\r\n\r\n  get(key) {\r\n    return this._items[key];\r\n  }\r\n\r\n  toString() {\r\n    // Needs to be sorted by key\r\n    const sortedKeys = Object.keys(this._items).sort((a, b) =>\r\n      this._compareKeys(a, b)\r\n    );\r\n\r\n    const out = ['<<'];\r\n    if (this.limits && sortedKeys.length > 1) {\r\n      const first = sortedKeys[0],\r\n        last = sortedKeys[sortedKeys.length - 1];\r\n      out.push(\r\n        `  /Limits ${PDFObject.convert([this._dataForKey(first), this._dataForKey(last)])}`\r\n      );\r\n    }\r\n    out.push(`  /${this._keysName()} [`);\r\n    for (let key of sortedKeys) {\r\n      out.push(\r\n        `    ${PDFObject.convert(this._dataForKey(key))} ${PDFObject.convert(\r\n          this._items[key]\r\n        )}`\r\n      );\r\n    }\r\n    out.push(']');\r\n    out.push('>>');\r\n    return out.join('\\n');\r\n  }\r\n\r\n  _compareKeys(/*a, b*/) {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n\r\n  _keysName() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n\r\n  _dataForKey(/*k*/) {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n}\r\n\r\nexport default PDFTree;\r\n","/*\r\nPDFObject - converts JavaScript types into their corresponding PDF types.\r\nBy Devon Govett\r\n*/\r\n\r\nimport PDFAbstractReference from './abstract_reference';\r\nimport PDFTree from './tree';\r\n\r\nconst pad = (str, length) => (Array(length + 1).join('0') + str).slice(-length);\r\n\r\nconst escapableRe = /[\\n\\r\\t\\b\\f()\\\\]/g;\r\nconst escapable = {\r\n  '\\n': '\\\\n',\r\n  '\\r': '\\\\r',\r\n  '\\t': '\\\\t',\r\n  '\\b': '\\\\b',\r\n  '\\f': '\\\\f',\r\n  '\\\\': '\\\\\\\\',\r\n  '(': '\\\\(',\r\n  ')': '\\\\)'\r\n};\r\n\r\n// Convert little endian UTF-16 to big endian\r\nconst swapBytes = function(buff) {\r\n  const l = buff.length;\r\n  if (l & 0x01) {\r\n    throw new Error('Buffer length must be even');\r\n  } else {\r\n    for (let i = 0, end = l - 1; i < end; i += 2) {\r\n      const a = buff[i];\r\n      buff[i] = buff[i + 1];\r\n      buff[i + 1] = a;\r\n    }\r\n  }\r\n\r\n  return buff;\r\n};\r\n\r\nclass PDFObject {\r\n  static convert(object, encryptFn = null) {\r\n    // String literals are converted to the PDF name type\r\n    if (typeof object === 'string') {\r\n      return `/${object}`;\r\n\r\n      // String objects are converted to PDF strings (UTF-16)\r\n    } else if (object instanceof String) {\r\n      let string = object;\r\n      // Detect if this is a unicode string\r\n      let isUnicode = false;\r\n      for (let i = 0, end = string.length; i < end; i++) {\r\n        if (string.charCodeAt(i) > 0x7f) {\r\n          isUnicode = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      // If so, encode it as big endian UTF-16\r\n      let stringBuffer;\r\n      if (isUnicode) {\r\n        stringBuffer = swapBytes(Buffer.from(`\\ufeff${string}`, 'utf16le'));\r\n      } else {\r\n        stringBuffer = Buffer.from(string.valueOf(), 'ascii');\r\n      }\r\n\r\n      // Encrypt the string when necessary\r\n      if (encryptFn) {\r\n        string = encryptFn(stringBuffer).toString('binary');\r\n      } else {\r\n        string = stringBuffer.toString('binary');\r\n      }\r\n\r\n      // Escape characters as required by the spec\r\n      string = string.replace(escapableRe, c => escapable[c]);\r\n\r\n      return `(${string})`;\r\n\r\n      // Buffers are converted to PDF hex strings\r\n    } else if (Buffer.isBuffer(object)) {\r\n      return `<${object.toString('hex')}>`;\r\n    } else if (\r\n      object instanceof PDFAbstractReference ||\r\n      object instanceof PDFTree\r\n    ) {\r\n      return object.toString();\r\n    } else if (object instanceof Date) {\r\n      let string =\r\n        `D:${pad(object.getUTCFullYear(), 4)}` +\r\n        pad(object.getUTCMonth() + 1, 2) +\r\n        pad(object.getUTCDate(), 2) +\r\n        pad(object.getUTCHours(), 2) +\r\n        pad(object.getUTCMinutes(), 2) +\r\n        pad(object.getUTCSeconds(), 2) +\r\n        'Z';\r\n\r\n      // Encrypt the string when necessary\r\n      if (encryptFn) {\r\n        string = encryptFn(Buffer.from(string, 'ascii')).toString('binary');\r\n\r\n        // Escape characters as required by the spec\r\n        string = string.replace(escapableRe, c => escapable[c]);\r\n      }\r\n\r\n      return `(${string})`;\r\n    } else if (Array.isArray(object)) {\r\n      const items = object.map(e => PDFObject.convert(e, encryptFn)).join(' ');\r\n      return `[${items}]`;\r\n    } else if ({}.toString.call(object) === '[object Object]') {\r\n      const out = ['<<'];\r\n      for (let key in object) {\r\n        const val = object[key];\r\n        out.push(`/${key} ${PDFObject.convert(val, encryptFn)}`);\r\n      }\r\n\r\n      out.push('>>');\r\n      return out.join('\\n');\r\n    } else if (typeof object === 'number') {\r\n      return PDFObject.number(object);\r\n    } else {\r\n      return `${object}`;\r\n    }\r\n  }\r\n\r\n  static number(n) {\r\n    if (n > -1e21 && n < 1e21) {\r\n      return Math.round(n * 1e6) / 1e6;\r\n    }\r\n\r\n    throw new Error(`unsupported number: ${n}`);\r\n  }\r\n}\r\n\r\nexport default PDFObject;\r\n","/*\r\nPDFReference - represents a reference to another object in the PDF object heirarchy\r\nBy Devon Govett\r\n*/\r\n\r\nimport zlib from 'zlib';\r\nimport PDFAbstractReference from './abstract_reference';\r\nimport PDFObject from './object';\r\n\r\nclass PDFReference extends PDFAbstractReference {\r\n  constructor(document, id, data = {}) {\r\n    super();\r\n    this.document = document;\r\n    this.id = id;\r\n    this.data = data;\r\n    this.gen = 0;\r\n    this.compress = this.document.compress && !this.data.Filter;\r\n    this.uncompressedLength = 0;\r\n    this.buffer = [];\r\n  }\r\n\r\n  write(chunk) {\r\n    if (!Buffer.isBuffer(chunk)) {\r\n      chunk = Buffer.from(chunk + '\\n', 'binary');\r\n    }\r\n\r\n    this.uncompressedLength += chunk.length;\r\n    if (this.data.Length == null) {\r\n      this.data.Length = 0;\r\n    }\r\n    this.buffer.push(chunk);\r\n    this.data.Length += chunk.length;\r\n    if (this.compress) {\r\n      return (this.data.Filter = 'FlateDecode');\r\n    }\r\n  }\r\n\r\n  end(chunk) {\r\n    if (chunk) {\r\n      this.write(chunk);\r\n    }\r\n    return this.finalize();\r\n  }\r\n\r\n  finalize() {\r\n    this.offset = this.document._offset;\r\n\r\n    const encryptFn = this.document._security\r\n      ? this.document._security.getEncryptFn(this.id, this.gen)\r\n      : null;\r\n\r\n    if (this.buffer.length) {\r\n      this.buffer = Buffer.concat(this.buffer);\r\n      if (this.compress) {\r\n        this.buffer = zlib.deflateSync(this.buffer);\r\n      }\r\n\r\n      if (encryptFn) {\r\n        this.buffer = encryptFn(this.buffer);\r\n      }\r\n\r\n      this.data.Length = this.buffer.length;\r\n    }\r\n\r\n    this.document._write(`${this.id} ${this.gen} obj`);\r\n    this.document._write(PDFObject.convert(this.data, encryptFn));\r\n\r\n    if (this.buffer.length) {\r\n      this.document._write('stream');\r\n      this.document._write(this.buffer);\r\n\r\n      this.buffer = []; // free up memory\r\n      this.document._write('\\nendstream');\r\n    }\r\n\r\n    this.document._write('endobj');\r\n    this.document._refEnd(this);\r\n  }\r\n  toString() {\r\n    return `${this.id} ${this.gen} R`;\r\n  }\r\n}\r\n\r\nexport default PDFReference;\r\n","/*\r\nPDFPage - represents a single page in the PDF document\r\nBy Devon Govett\r\n*/\r\n\r\nconst DEFAULT_MARGINS = {\r\n  top: 72,\r\n  left: 72,\r\n  bottom: 72,\r\n  right: 72\r\n};\r\n\r\nconst SIZES = {\r\n  '4A0': [4767.87, 6740.79],\r\n  '2A0': [3370.39, 4767.87],\r\n  A0: [2383.94, 3370.39],\r\n  A1: [1683.78, 2383.94],\r\n  A2: [1190.55, 1683.78],\r\n  A3: [841.89, 1190.55],\r\n  A4: [595.28, 841.89],\r\n  A5: [419.53, 595.28],\r\n  A6: [297.64, 419.53],\r\n  A7: [209.76, 297.64],\r\n  A8: [147.4, 209.76],\r\n  A9: [104.88, 147.4],\r\n  A10: [73.7, 104.88],\r\n  B0: [2834.65, 4008.19],\r\n  B1: [2004.09, 2834.65],\r\n  B2: [1417.32, 2004.09],\r\n  B3: [1000.63, 1417.32],\r\n  B4: [708.66, 1000.63],\r\n  B5: [498.9, 708.66],\r\n  B6: [354.33, 498.9],\r\n  B7: [249.45, 354.33],\r\n  B8: [175.75, 249.45],\r\n  B9: [124.72, 175.75],\r\n  B10: [87.87, 124.72],\r\n  C0: [2599.37, 3676.54],\r\n  C1: [1836.85, 2599.37],\r\n  C2: [1298.27, 1836.85],\r\n  C3: [918.43, 1298.27],\r\n  C4: [649.13, 918.43],\r\n  C5: [459.21, 649.13],\r\n  C6: [323.15, 459.21],\r\n  C7: [229.61, 323.15],\r\n  C8: [161.57, 229.61],\r\n  C9: [113.39, 161.57],\r\n  C10: [79.37, 113.39],\r\n  RA0: [2437.8, 3458.27],\r\n  RA1: [1729.13, 2437.8],\r\n  RA2: [1218.9, 1729.13],\r\n  RA3: [864.57, 1218.9],\r\n  RA4: [609.45, 864.57],\r\n  SRA0: [2551.18, 3628.35],\r\n  SRA1: [1814.17, 2551.18],\r\n  SRA2: [1275.59, 1814.17],\r\n  SRA3: [907.09, 1275.59],\r\n  SRA4: [637.8, 907.09],\r\n  EXECUTIVE: [521.86, 756.0],\r\n  FOLIO: [612.0, 936.0],\r\n  LEGAL: [612.0, 1008.0],\r\n  LETTER: [612.0, 792.0],\r\n  TABLOID: [792.0, 1224.0]\r\n};\r\n\r\nclass PDFPage {\r\n  constructor(document, options = {}) {\r\n    this.document = document;\r\n    this.size = options.size || 'letter';\r\n    this.layout = options.layout || 'portrait';\r\n\r\n    // process margins\r\n    if (typeof options.margin === 'number') {\r\n      this.margins = {\r\n        top: options.margin,\r\n        left: options.margin,\r\n        bottom: options.margin,\r\n        right: options.margin\r\n      };\r\n\r\n      // default to 1 inch margins\r\n    } else {\r\n      this.margins = options.margins || DEFAULT_MARGINS;\r\n    }\r\n\r\n    // calculate page dimensions\r\n    const dimensions = Array.isArray(this.size)\r\n      ? this.size\r\n      : SIZES[this.size.toUpperCase()];\r\n    this.width = dimensions[this.layout === 'portrait' ? 0 : 1];\r\n    this.height = dimensions[this.layout === 'portrait' ? 1 : 0];\r\n\r\n    this.content = this.document.ref();\r\n\r\n    // Initialize the Font, XObject, and ExtGState dictionaries\r\n    this.resources = this.document.ref({\r\n      ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI']\r\n    });\r\n\r\n    // The page dictionary\r\n    this.dictionary = this.document.ref({\r\n      Type: 'Page',\r\n      Parent: this.document._root.data.Pages,\r\n      MediaBox: [0, 0, this.width, this.height],\r\n      Contents: this.content,\r\n      Resources: this.resources\r\n    });\r\n\r\n    this.markings = [];\r\n  }\r\n\r\n  // Lazily create these objects\r\n  get fonts() {\r\n    const data = this.resources.data;\r\n    return data.Font != null ? data.Font : (data.Font = {});\r\n  }\r\n\r\n  get xobjects() {\r\n    const data = this.resources.data;\r\n    return data.XObject != null ? data.XObject : (data.XObject = {});\r\n  }\r\n\r\n  get ext_gstates() {\r\n    const data = this.resources.data;\r\n    return data.ExtGState != null ? data.ExtGState : (data.ExtGState = {});\r\n  }\r\n\r\n  get patterns() {\r\n    const data = this.resources.data;\r\n    return data.Pattern != null ? data.Pattern : (data.Pattern = {});\r\n  }\r\n\r\n  get annotations() {\r\n    const data = this.dictionary.data;\r\n    return data.Annots != null ? data.Annots : (data.Annots = []);\r\n  }\r\n\r\n  get structParentTreeKey() {\r\n    const data = this.dictionary.data;\r\n    return data.StructParents != null ?\r\n      data.StructParents :\r\n      (data.StructParents = this.document.createStructParentTreeNextKey());\r\n  }\r\n\r\n  maxY() {\r\n    return this.height - this.margins.bottom;\r\n  }\r\n\r\n  write(chunk) {\r\n    return this.content.write(chunk);\r\n  }\r\n\r\n  end() {\r\n    this.dictionary.end();\r\n    this.resources.end();\r\n    return this.content.end();\r\n  }\r\n}\r\n\r\nexport default PDFPage;\r\n","/*\r\nPDFNameTree - represents a name tree object\r\n*/\r\n\r\nimport PDFTree from \"./tree\";\r\n\r\nclass PDFNameTree extends PDFTree {\r\n  _compareKeys(a, b) {\r\n    return a.localeCompare(b);\r\n  }\r\n\r\n  _keysName() {\r\n    return \"Names\";\r\n  }\r\n\r\n  _dataForKey(k) {\r\n    return new String(k);\r\n  }\r\n}\r\n\r\nexport default PDFNameTree;\r\n","/**\r\n * Check if value is in a range group.\r\n * @param {number} value\r\n * @param {number[]} rangeGroup\r\n * @returns {boolean}\r\n */\r\nfunction inRange(value, rangeGroup) {\r\n  if (value < rangeGroup[0]) return false;\r\n  let startRange = 0;\r\n  let endRange = rangeGroup.length / 2;\r\n  while (startRange <= endRange) {\r\n    const middleRange = Math.floor((startRange + endRange) / 2);\r\n\r\n    // actual array index\r\n    const arrayIndex = middleRange * 2;\r\n\r\n    // Check if value is in range pointed by actual index\r\n    if (\r\n      value >= rangeGroup[arrayIndex] &&\r\n      value <= rangeGroup[arrayIndex + 1]\r\n    ) {\r\n      return true;\r\n    }\r\n\r\n    if (value > rangeGroup[arrayIndex + 1]) {\r\n      // Search Right Side Of Array\r\n      startRange = middleRange + 1;\r\n    } else {\r\n      // Search Left Side Of Array\r\n      endRange = middleRange - 1;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport { inRange };\r\n","import { inRange } from './util';\r\n\r\n// prettier-ignore-start\r\n/**\r\n * A.1 Unassigned code points in Unicode 3.2\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-A.1\r\n */\r\nconst unassigned_code_points = [\r\n  0x0221,\r\n  0x0221,\r\n  0x0234,\r\n  0x024f,\r\n  0x02ae,\r\n  0x02af,\r\n  0x02ef,\r\n  0x02ff,\r\n  0x0350,\r\n  0x035f,\r\n  0x0370,\r\n  0x0373,\r\n  0x0376,\r\n  0x0379,\r\n  0x037b,\r\n  0x037d,\r\n  0x037f,\r\n  0x0383,\r\n  0x038b,\r\n  0x038b,\r\n  0x038d,\r\n  0x038d,\r\n  0x03a2,\r\n  0x03a2,\r\n  0x03cf,\r\n  0x03cf,\r\n  0x03f7,\r\n  0x03ff,\r\n  0x0487,\r\n  0x0487,\r\n  0x04cf,\r\n  0x04cf,\r\n  0x04f6,\r\n  0x04f7,\r\n  0x04fa,\r\n  0x04ff,\r\n  0x0510,\r\n  0x0530,\r\n  0x0557,\r\n  0x0558,\r\n  0x0560,\r\n  0x0560,\r\n  0x0588,\r\n  0x0588,\r\n  0x058b,\r\n  0x0590,\r\n  0x05a2,\r\n  0x05a2,\r\n  0x05ba,\r\n  0x05ba,\r\n  0x05c5,\r\n  0x05cf,\r\n  0x05eb,\r\n  0x05ef,\r\n  0x05f5,\r\n  0x060b,\r\n  0x060d,\r\n  0x061a,\r\n  0x061c,\r\n  0x061e,\r\n  0x0620,\r\n  0x0620,\r\n  0x063b,\r\n  0x063f,\r\n  0x0656,\r\n  0x065f,\r\n  0x06ee,\r\n  0x06ef,\r\n  0x06ff,\r\n  0x06ff,\r\n  0x070e,\r\n  0x070e,\r\n  0x072d,\r\n  0x072f,\r\n  0x074b,\r\n  0x077f,\r\n  0x07b2,\r\n  0x0900,\r\n  0x0904,\r\n  0x0904,\r\n  0x093a,\r\n  0x093b,\r\n  0x094e,\r\n  0x094f,\r\n  0x0955,\r\n  0x0957,\r\n  0x0971,\r\n  0x0980,\r\n  0x0984,\r\n  0x0984,\r\n  0x098d,\r\n  0x098e,\r\n  0x0991,\r\n  0x0992,\r\n  0x09a9,\r\n  0x09a9,\r\n  0x09b1,\r\n  0x09b1,\r\n  0x09b3,\r\n  0x09b5,\r\n  0x09ba,\r\n  0x09bb,\r\n  0x09bd,\r\n  0x09bd,\r\n  0x09c5,\r\n  0x09c6,\r\n  0x09c9,\r\n  0x09ca,\r\n  0x09ce,\r\n  0x09d6,\r\n  0x09d8,\r\n  0x09db,\r\n  0x09de,\r\n  0x09de,\r\n  0x09e4,\r\n  0x09e5,\r\n  0x09fb,\r\n  0x0a01,\r\n  0x0a03,\r\n  0x0a04,\r\n  0x0a0b,\r\n  0x0a0e,\r\n  0x0a11,\r\n  0x0a12,\r\n  0x0a29,\r\n  0x0a29,\r\n  0x0a31,\r\n  0x0a31,\r\n  0x0a34,\r\n  0x0a34,\r\n  0x0a37,\r\n  0x0a37,\r\n  0x0a3a,\r\n  0x0a3b,\r\n  0x0a3d,\r\n  0x0a3d,\r\n  0x0a43,\r\n  0x0a46,\r\n  0x0a49,\r\n  0x0a4a,\r\n  0x0a4e,\r\n  0x0a58,\r\n  0x0a5d,\r\n  0x0a5d,\r\n  0x0a5f,\r\n  0x0a65,\r\n  0x0a75,\r\n  0x0a80,\r\n  0x0a84,\r\n  0x0a84,\r\n  0x0a8c,\r\n  0x0a8c,\r\n  0x0a8e,\r\n  0x0a8e,\r\n  0x0a92,\r\n  0x0a92,\r\n  0x0aa9,\r\n  0x0aa9,\r\n  0x0ab1,\r\n  0x0ab1,\r\n  0x0ab4,\r\n  0x0ab4,\r\n  0x0aba,\r\n  0x0abb,\r\n  0x0ac6,\r\n  0x0ac6,\r\n  0x0aca,\r\n  0x0aca,\r\n  0x0ace,\r\n  0x0acf,\r\n  0x0ad1,\r\n  0x0adf,\r\n  0x0ae1,\r\n  0x0ae5,\r\n  0x0af0,\r\n  0x0b00,\r\n  0x0b04,\r\n  0x0b04,\r\n  0x0b0d,\r\n  0x0b0e,\r\n  0x0b11,\r\n  0x0b12,\r\n  0x0b29,\r\n  0x0b29,\r\n  0x0b31,\r\n  0x0b31,\r\n  0x0b34,\r\n  0x0b35,\r\n  0x0b3a,\r\n  0x0b3b,\r\n  0x0b44,\r\n  0x0b46,\r\n  0x0b49,\r\n  0x0b4a,\r\n  0x0b4e,\r\n  0x0b55,\r\n  0x0b58,\r\n  0x0b5b,\r\n  0x0b5e,\r\n  0x0b5e,\r\n  0x0b62,\r\n  0x0b65,\r\n  0x0b71,\r\n  0x0b81,\r\n  0x0b84,\r\n  0x0b84,\r\n  0x0b8b,\r\n  0x0b8d,\r\n  0x0b91,\r\n  0x0b91,\r\n  0x0b96,\r\n  0x0b98,\r\n  0x0b9b,\r\n  0x0b9b,\r\n  0x0b9d,\r\n  0x0b9d,\r\n  0x0ba0,\r\n  0x0ba2,\r\n  0x0ba5,\r\n  0x0ba7,\r\n  0x0bab,\r\n  0x0bad,\r\n  0x0bb6,\r\n  0x0bb6,\r\n  0x0bba,\r\n  0x0bbd,\r\n  0x0bc3,\r\n  0x0bc5,\r\n  0x0bc9,\r\n  0x0bc9,\r\n  0x0bce,\r\n  0x0bd6,\r\n  0x0bd8,\r\n  0x0be6,\r\n  0x0bf3,\r\n  0x0c00,\r\n  0x0c04,\r\n  0x0c04,\r\n  0x0c0d,\r\n  0x0c0d,\r\n  0x0c11,\r\n  0x0c11,\r\n  0x0c29,\r\n  0x0c29,\r\n  0x0c34,\r\n  0x0c34,\r\n  0x0c3a,\r\n  0x0c3d,\r\n  0x0c45,\r\n  0x0c45,\r\n  0x0c49,\r\n  0x0c49,\r\n  0x0c4e,\r\n  0x0c54,\r\n  0x0c57,\r\n  0x0c5f,\r\n  0x0c62,\r\n  0x0c65,\r\n  0x0c70,\r\n  0x0c81,\r\n  0x0c84,\r\n  0x0c84,\r\n  0x0c8d,\r\n  0x0c8d,\r\n  0x0c91,\r\n  0x0c91,\r\n  0x0ca9,\r\n  0x0ca9,\r\n  0x0cb4,\r\n  0x0cb4,\r\n  0x0cba,\r\n  0x0cbd,\r\n  0x0cc5,\r\n  0x0cc5,\r\n  0x0cc9,\r\n  0x0cc9,\r\n  0x0cce,\r\n  0x0cd4,\r\n  0x0cd7,\r\n  0x0cdd,\r\n  0x0cdf,\r\n  0x0cdf,\r\n  0x0ce2,\r\n  0x0ce5,\r\n  0x0cf0,\r\n  0x0d01,\r\n  0x0d04,\r\n  0x0d04,\r\n  0x0d0d,\r\n  0x0d0d,\r\n  0x0d11,\r\n  0x0d11,\r\n  0x0d29,\r\n  0x0d29,\r\n  0x0d3a,\r\n  0x0d3d,\r\n  0x0d44,\r\n  0x0d45,\r\n  0x0d49,\r\n  0x0d49,\r\n  0x0d4e,\r\n  0x0d56,\r\n  0x0d58,\r\n  0x0d5f,\r\n  0x0d62,\r\n  0x0d65,\r\n  0x0d70,\r\n  0x0d81,\r\n  0x0d84,\r\n  0x0d84,\r\n  0x0d97,\r\n  0x0d99,\r\n  0x0db2,\r\n  0x0db2,\r\n  0x0dbc,\r\n  0x0dbc,\r\n  0x0dbe,\r\n  0x0dbf,\r\n  0x0dc7,\r\n  0x0dc9,\r\n  0x0dcb,\r\n  0x0dce,\r\n  0x0dd5,\r\n  0x0dd5,\r\n  0x0dd7,\r\n  0x0dd7,\r\n  0x0de0,\r\n  0x0df1,\r\n  0x0df5,\r\n  0x0e00,\r\n  0x0e3b,\r\n  0x0e3e,\r\n  0x0e5c,\r\n  0x0e80,\r\n  0x0e83,\r\n  0x0e83,\r\n  0x0e85,\r\n  0x0e86,\r\n  0x0e89,\r\n  0x0e89,\r\n  0x0e8b,\r\n  0x0e8c,\r\n  0x0e8e,\r\n  0x0e93,\r\n  0x0e98,\r\n  0x0e98,\r\n  0x0ea0,\r\n  0x0ea0,\r\n  0x0ea4,\r\n  0x0ea4,\r\n  0x0ea6,\r\n  0x0ea6,\r\n  0x0ea8,\r\n  0x0ea9,\r\n  0x0eac,\r\n  0x0eac,\r\n  0x0eba,\r\n  0x0eba,\r\n  0x0ebe,\r\n  0x0ebf,\r\n  0x0ec5,\r\n  0x0ec5,\r\n  0x0ec7,\r\n  0x0ec7,\r\n  0x0ece,\r\n  0x0ecf,\r\n  0x0eda,\r\n  0x0edb,\r\n  0x0ede,\r\n  0x0eff,\r\n  0x0f48,\r\n  0x0f48,\r\n  0x0f6b,\r\n  0x0f70,\r\n  0x0f8c,\r\n  0x0f8f,\r\n  0x0f98,\r\n  0x0f98,\r\n  0x0fbd,\r\n  0x0fbd,\r\n  0x0fcd,\r\n  0x0fce,\r\n  0x0fd0,\r\n  0x0fff,\r\n  0x1022,\r\n  0x1022,\r\n  0x1028,\r\n  0x1028,\r\n  0x102b,\r\n  0x102b,\r\n  0x1033,\r\n  0x1035,\r\n  0x103a,\r\n  0x103f,\r\n  0x105a,\r\n  0x109f,\r\n  0x10c6,\r\n  0x10cf,\r\n  0x10f9,\r\n  0x10fa,\r\n  0x10fc,\r\n  0x10ff,\r\n  0x115a,\r\n  0x115e,\r\n  0x11a3,\r\n  0x11a7,\r\n  0x11fa,\r\n  0x11ff,\r\n  0x1207,\r\n  0x1207,\r\n  0x1247,\r\n  0x1247,\r\n  0x1249,\r\n  0x1249,\r\n  0x124e,\r\n  0x124f,\r\n  0x1257,\r\n  0x1257,\r\n  0x1259,\r\n  0x1259,\r\n  0x125e,\r\n  0x125f,\r\n  0x1287,\r\n  0x1287,\r\n  0x1289,\r\n  0x1289,\r\n  0x128e,\r\n  0x128f,\r\n  0x12af,\r\n  0x12af,\r\n  0x12b1,\r\n  0x12b1,\r\n  0x12b6,\r\n  0x12b7,\r\n  0x12bf,\r\n  0x12bf,\r\n  0x12c1,\r\n  0x12c1,\r\n  0x12c6,\r\n  0x12c7,\r\n  0x12cf,\r\n  0x12cf,\r\n  0x12d7,\r\n  0x12d7,\r\n  0x12ef,\r\n  0x12ef,\r\n  0x130f,\r\n  0x130f,\r\n  0x1311,\r\n  0x1311,\r\n  0x1316,\r\n  0x1317,\r\n  0x131f,\r\n  0x131f,\r\n  0x1347,\r\n  0x1347,\r\n  0x135b,\r\n  0x1360,\r\n  0x137d,\r\n  0x139f,\r\n  0x13f5,\r\n  0x1400,\r\n  0x1677,\r\n  0x167f,\r\n  0x169d,\r\n  0x169f,\r\n  0x16f1,\r\n  0x16ff,\r\n  0x170d,\r\n  0x170d,\r\n  0x1715,\r\n  0x171f,\r\n  0x1737,\r\n  0x173f,\r\n  0x1754,\r\n  0x175f,\r\n  0x176d,\r\n  0x176d,\r\n  0x1771,\r\n  0x1771,\r\n  0x1774,\r\n  0x177f,\r\n  0x17dd,\r\n  0x17df,\r\n  0x17ea,\r\n  0x17ff,\r\n  0x180f,\r\n  0x180f,\r\n  0x181a,\r\n  0x181f,\r\n  0x1878,\r\n  0x187f,\r\n  0x18aa,\r\n  0x1dff,\r\n  0x1e9c,\r\n  0x1e9f,\r\n  0x1efa,\r\n  0x1eff,\r\n  0x1f16,\r\n  0x1f17,\r\n  0x1f1e,\r\n  0x1f1f,\r\n  0x1f46,\r\n  0x1f47,\r\n  0x1f4e,\r\n  0x1f4f,\r\n  0x1f58,\r\n  0x1f58,\r\n  0x1f5a,\r\n  0x1f5a,\r\n  0x1f5c,\r\n  0x1f5c,\r\n  0x1f5e,\r\n  0x1f5e,\r\n  0x1f7e,\r\n  0x1f7f,\r\n  0x1fb5,\r\n  0x1fb5,\r\n  0x1fc5,\r\n  0x1fc5,\r\n  0x1fd4,\r\n  0x1fd5,\r\n  0x1fdc,\r\n  0x1fdc,\r\n  0x1ff0,\r\n  0x1ff1,\r\n  0x1ff5,\r\n  0x1ff5,\r\n  0x1fff,\r\n  0x1fff,\r\n  0x2053,\r\n  0x2056,\r\n  0x2058,\r\n  0x205e,\r\n  0x2064,\r\n  0x2069,\r\n  0x2072,\r\n  0x2073,\r\n  0x208f,\r\n  0x209f,\r\n  0x20b2,\r\n  0x20cf,\r\n  0x20eb,\r\n  0x20ff,\r\n  0x213b,\r\n  0x213c,\r\n  0x214c,\r\n  0x2152,\r\n  0x2184,\r\n  0x218f,\r\n  0x23cf,\r\n  0x23ff,\r\n  0x2427,\r\n  0x243f,\r\n  0x244b,\r\n  0x245f,\r\n  0x24ff,\r\n  0x24ff,\r\n  0x2614,\r\n  0x2615,\r\n  0x2618,\r\n  0x2618,\r\n  0x267e,\r\n  0x267f,\r\n  0x268a,\r\n  0x2700,\r\n  0x2705,\r\n  0x2705,\r\n  0x270a,\r\n  0x270b,\r\n  0x2728,\r\n  0x2728,\r\n  0x274c,\r\n  0x274c,\r\n  0x274e,\r\n  0x274e,\r\n  0x2753,\r\n  0x2755,\r\n  0x2757,\r\n  0x2757,\r\n  0x275f,\r\n  0x2760,\r\n  0x2795,\r\n  0x2797,\r\n  0x27b0,\r\n  0x27b0,\r\n  0x27bf,\r\n  0x27cf,\r\n  0x27ec,\r\n  0x27ef,\r\n  0x2b00,\r\n  0x2e7f,\r\n  0x2e9a,\r\n  0x2e9a,\r\n  0x2ef4,\r\n  0x2eff,\r\n  0x2fd6,\r\n  0x2fef,\r\n  0x2ffc,\r\n  0x2fff,\r\n  0x3040,\r\n  0x3040,\r\n  0x3097,\r\n  0x3098,\r\n  0x3100,\r\n  0x3104,\r\n  0x312d,\r\n  0x3130,\r\n  0x318f,\r\n  0x318f,\r\n  0x31b8,\r\n  0x31ef,\r\n  0x321d,\r\n  0x321f,\r\n  0x3244,\r\n  0x3250,\r\n  0x327c,\r\n  0x327e,\r\n  0x32cc,\r\n  0x32cf,\r\n  0x32ff,\r\n  0x32ff,\r\n  0x3377,\r\n  0x337a,\r\n  0x33de,\r\n  0x33df,\r\n  0x33ff,\r\n  0x33ff,\r\n  0x4db6,\r\n  0x4dff,\r\n  0x9fa6,\r\n  0x9fff,\r\n  0xa48d,\r\n  0xa48f,\r\n  0xa4c7,\r\n  0xabff,\r\n  0xd7a4,\r\n  0xd7ff,\r\n  0xfa2e,\r\n  0xfa2f,\r\n  0xfa6b,\r\n  0xfaff,\r\n  0xfb07,\r\n  0xfb12,\r\n  0xfb18,\r\n  0xfb1c,\r\n  0xfb37,\r\n  0xfb37,\r\n  0xfb3d,\r\n  0xfb3d,\r\n  0xfb3f,\r\n  0xfb3f,\r\n  0xfb42,\r\n  0xfb42,\r\n  0xfb45,\r\n  0xfb45,\r\n  0xfbb2,\r\n  0xfbd2,\r\n  0xfd40,\r\n  0xfd4f,\r\n  0xfd90,\r\n  0xfd91,\r\n  0xfdc8,\r\n  0xfdcf,\r\n  0xfdfd,\r\n  0xfdff,\r\n  0xfe10,\r\n  0xfe1f,\r\n  0xfe24,\r\n  0xfe2f,\r\n  0xfe47,\r\n  0xfe48,\r\n  0xfe53,\r\n  0xfe53,\r\n  0xfe67,\r\n  0xfe67,\r\n  0xfe6c,\r\n  0xfe6f,\r\n  0xfe75,\r\n  0xfe75,\r\n  0xfefd,\r\n  0xfefe,\r\n  0xff00,\r\n  0xff00,\r\n  0xffbf,\r\n  0xffc1,\r\n  0xffc8,\r\n  0xffc9,\r\n  0xffd0,\r\n  0xffd1,\r\n  0xffd8,\r\n  0xffd9,\r\n  0xffdd,\r\n  0xffdf,\r\n  0xffe7,\r\n  0xffe7,\r\n  0xffef,\r\n  0xfff8,\r\n  0x10000,\r\n  0x102ff,\r\n  0x1031f,\r\n  0x1031f,\r\n  0x10324,\r\n  0x1032f,\r\n  0x1034b,\r\n  0x103ff,\r\n  0x10426,\r\n  0x10427,\r\n  0x1044e,\r\n  0x1cfff,\r\n  0x1d0f6,\r\n  0x1d0ff,\r\n  0x1d127,\r\n  0x1d129,\r\n  0x1d1de,\r\n  0x1d3ff,\r\n  0x1d455,\r\n  0x1d455,\r\n  0x1d49d,\r\n  0x1d49d,\r\n  0x1d4a0,\r\n  0x1d4a1,\r\n  0x1d4a3,\r\n  0x1d4a4,\r\n  0x1d4a7,\r\n  0x1d4a8,\r\n  0x1d4ad,\r\n  0x1d4ad,\r\n  0x1d4ba,\r\n  0x1d4ba,\r\n  0x1d4bc,\r\n  0x1d4bc,\r\n  0x1d4c1,\r\n  0x1d4c1,\r\n  0x1d4c4,\r\n  0x1d4c4,\r\n  0x1d506,\r\n  0x1d506,\r\n  0x1d50b,\r\n  0x1d50c,\r\n  0x1d515,\r\n  0x1d515,\r\n  0x1d51d,\r\n  0x1d51d,\r\n  0x1d53a,\r\n  0x1d53a,\r\n  0x1d53f,\r\n  0x1d53f,\r\n  0x1d545,\r\n  0x1d545,\r\n  0x1d547,\r\n  0x1d549,\r\n  0x1d551,\r\n  0x1d551,\r\n  0x1d6a4,\r\n  0x1d6a7,\r\n  0x1d7ca,\r\n  0x1d7cd,\r\n  0x1d800,\r\n  0x1fffd,\r\n  0x2a6d7,\r\n  0x2f7ff,\r\n  0x2fa1e,\r\n  0x2fffd,\r\n  0x30000,\r\n  0x3fffd,\r\n  0x40000,\r\n  0x4fffd,\r\n  0x50000,\r\n  0x5fffd,\r\n  0x60000,\r\n  0x6fffd,\r\n  0x70000,\r\n  0x7fffd,\r\n  0x80000,\r\n  0x8fffd,\r\n  0x90000,\r\n  0x9fffd,\r\n  0xa0000,\r\n  0xafffd,\r\n  0xb0000,\r\n  0xbfffd,\r\n  0xc0000,\r\n  0xcfffd,\r\n  0xd0000,\r\n  0xdfffd,\r\n  0xe0000,\r\n  0xe0000,\r\n  0xe0002,\r\n  0xe001f,\r\n  0xe0080,\r\n  0xefffd\r\n];\r\n// prettier-ignore-end\r\n\r\nconst isUnassignedCodePoint = character =>\r\n  inRange(character, unassigned_code_points);\r\n\r\n// prettier-ignore-start\r\n/**\r\n * B.1 Commonly mapped to nothing\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-B.1\r\n */\r\nconst commonly_mapped_to_nothing = [\r\n  0x00ad,\r\n  0x00ad,\r\n  0x034f,\r\n  0x034f,\r\n  0x1806,\r\n  0x1806,\r\n  0x180b,\r\n  0x180b,\r\n  0x180c,\r\n  0x180c,\r\n  0x180d,\r\n  0x180d,\r\n  0x200b,\r\n  0x200b,\r\n  0x200c,\r\n  0x200c,\r\n  0x200d,\r\n  0x200d,\r\n  0x2060,\r\n  0x2060,\r\n  0xfe00,\r\n  0xfe00,\r\n  0xfe01,\r\n  0xfe01,\r\n  0xfe02,\r\n  0xfe02,\r\n  0xfe03,\r\n  0xfe03,\r\n  0xfe04,\r\n  0xfe04,\r\n  0xfe05,\r\n  0xfe05,\r\n  0xfe06,\r\n  0xfe06,\r\n  0xfe07,\r\n  0xfe07,\r\n  0xfe08,\r\n  0xfe08,\r\n  0xfe09,\r\n  0xfe09,\r\n  0xfe0a,\r\n  0xfe0a,\r\n  0xfe0b,\r\n  0xfe0b,\r\n  0xfe0c,\r\n  0xfe0c,\r\n  0xfe0d,\r\n  0xfe0d,\r\n  0xfe0e,\r\n  0xfe0e,\r\n  0xfe0f,\r\n  0xfe0f,\r\n  0xfeff,\r\n  0xfeff\r\n];\r\n// prettier-ignore-end\r\n\r\nconst isCommonlyMappedToNothing = character =>\r\n  inRange(character, commonly_mapped_to_nothing);\r\n\r\n// prettier-ignore-start\r\n/**\r\n * C.1.2 Non-ASCII space characters\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-C.1.2\r\n */\r\nconst non_ASCII_space_characters = [\r\n  0x00a0,\r\n  0x00a0 /* NO-BREAK SPACE */,\r\n  0x1680,\r\n  0x1680 /* OGHAM SPACE MARK */,\r\n  0x2000,\r\n  0x2000 /* EN QUAD */,\r\n  0x2001,\r\n  0x2001 /* EM QUAD */,\r\n  0x2002,\r\n  0x2002 /* EN SPACE */,\r\n  0x2003,\r\n  0x2003 /* EM SPACE */,\r\n  0x2004,\r\n  0x2004 /* THREE-PER-EM SPACE */,\r\n  0x2005,\r\n  0x2005 /* FOUR-PER-EM SPACE */,\r\n  0x2006,\r\n  0x2006 /* SIX-PER-EM SPACE */,\r\n  0x2007,\r\n  0x2007 /* FIGURE SPACE */,\r\n  0x2008,\r\n  0x2008 /* PUNCTUATION SPACE */,\r\n  0x2009,\r\n  0x2009 /* THIN SPACE */,\r\n  0x200a,\r\n  0x200a /* HAIR SPACE */,\r\n  0x200b,\r\n  0x200b /* ZERO WIDTH SPACE */,\r\n  0x202f,\r\n  0x202f /* NARROW NO-BREAK SPACE */,\r\n  0x205f,\r\n  0x205f /* MEDIUM MATHEMATICAL SPACE */,\r\n  0x3000,\r\n  0x3000 /* IDEOGRAPHIC SPACE */\r\n];\r\n// prettier-ignore-end\r\n\r\nconst isNonASCIISpaceCharacter = character =>\r\n  inRange(character, non_ASCII_space_characters);\r\n\r\n// prettier-ignore-start\r\nconst non_ASCII_controls_characters = [\r\n  /**\r\n   * C.2.2 Non-ASCII control characters\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.2.2\r\n   */\r\n  0x0080,\r\n  0x009f /* [CONTROL CHARACTERS] */,\r\n  0x06dd,\r\n  0x06dd /* ARABIC END OF AYAH */,\r\n  0x070f,\r\n  0x070f /* SYRIAC ABBREVIATION MARK */,\r\n  0x180e,\r\n  0x180e /* MONGOLIAN VOWEL SEPARATOR */,\r\n  0x200c,\r\n  0x200c /* ZERO WIDTH NON-JOINER */,\r\n  0x200d,\r\n  0x200d /* ZERO WIDTH JOINER */,\r\n  0x2028,\r\n  0x2028 /* LINE SEPARATOR */,\r\n  0x2029,\r\n  0x2029 /* PARAGRAPH SEPARATOR */,\r\n  0x2060,\r\n  0x2060 /* WORD JOINER */,\r\n  0x2061,\r\n  0x2061 /* FUNCTION APPLICATION */,\r\n  0x2062,\r\n  0x2062 /* INVISIBLE TIMES */,\r\n  0x2063,\r\n  0x2063 /* INVISIBLE SEPARATOR */,\r\n  0x206a,\r\n  0x206f /* [CONTROL CHARACTERS] */,\r\n  0xfeff,\r\n  0xfeff /* ZERO WIDTH NO-BREAK SPACE */,\r\n  0xfff9,\r\n  0xfffc /* [CONTROL CHARACTERS] */,\r\n  0x1d173,\r\n  0x1d17a /* [MUSICAL CONTROL CHARACTERS] */\r\n];\r\n\r\nconst non_character_codepoints = [\r\n  /**\r\n   * C.4 Non-character code points\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.4\r\n   */\r\n  0xfdd0,\r\n  0xfdef /* [NONCHARACTER CODE POINTS] */,\r\n  0xfffe,\r\n  0xffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x1fffe,\r\n  0x1ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x2fffe,\r\n  0x2ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x3fffe,\r\n  0x3ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x4fffe,\r\n  0x4ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x5fffe,\r\n  0x5ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x6fffe,\r\n  0x6ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x7fffe,\r\n  0x7ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x8fffe,\r\n  0x8ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x9fffe,\r\n  0x9ffff /* [NONCHARACTER CODE POINTS] */,\r\n  0xafffe,\r\n  0xaffff /* [NONCHARACTER CODE POINTS] */,\r\n  0xbfffe,\r\n  0xbffff /* [NONCHARACTER CODE POINTS] */,\r\n  0xcfffe,\r\n  0xcffff /* [NONCHARACTER CODE POINTS] */,\r\n  0xdfffe,\r\n  0xdffff /* [NONCHARACTER CODE POINTS] */,\r\n  0xefffe,\r\n  0xeffff /* [NONCHARACTER CODE POINTS] */,\r\n  0x10fffe,\r\n  0x10ffff /* [NONCHARACTER CODE POINTS] */\r\n];\r\n\r\n/**\r\n * 2.3.  Prohibited Output\r\n */\r\nconst prohibited_characters = [\r\n  /**\r\n   * C.2.1 ASCII control characters\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.2.1\r\n   */\r\n  0,\r\n  0x001f /* [CONTROL CHARACTERS] */,\r\n  0x007f,\r\n  0x007f /* DELETE */,\r\n\r\n  /**\r\n   * C.8 Change display properties or are deprecated\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.8\r\n   */\r\n  0x0340,\r\n  0x0340 /* COMBINING GRAVE TONE MARK */,\r\n  0x0341,\r\n  0x0341 /* COMBINING ACUTE TONE MARK */,\r\n  0x200e,\r\n  0x200e /* LEFT-TO-RIGHT MARK */,\r\n  0x200f,\r\n  0x200f /* RIGHT-TO-LEFT MARK */,\r\n  0x202a,\r\n  0x202a /* LEFT-TO-RIGHT EMBEDDING */,\r\n  0x202b,\r\n  0x202b /* RIGHT-TO-LEFT EMBEDDING */,\r\n  0x202c,\r\n  0x202c /* POP DIRECTIONAL FORMATTING */,\r\n  0x202d,\r\n  0x202d /* LEFT-TO-RIGHT OVERRIDE */,\r\n  0x202e,\r\n  0x202e /* RIGHT-TO-LEFT OVERRIDE */,\r\n  0x206a,\r\n  0x206a /* INHIBIT SYMMETRIC SWAPPING */,\r\n  0x206b,\r\n  0x206b /* ACTIVATE SYMMETRIC SWAPPING */,\r\n  0x206c,\r\n  0x206c /* INHIBIT ARABIC FORM SHAPING */,\r\n  0x206d,\r\n  0x206d /* ACTIVATE ARABIC FORM SHAPING */,\r\n  0x206e,\r\n  0x206e /* NATIONAL DIGIT SHAPES */,\r\n  0x206f,\r\n  0x206f /* NOMINAL DIGIT SHAPES */,\r\n\r\n  /**\r\n   * C.7 Inappropriate for canonical representation\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.7\r\n   */\r\n  0x2ff0,\r\n  0x2ffb /* [IDEOGRAPHIC DESCRIPTION CHARACTERS] */,\r\n\r\n  /**\r\n   * C.5 Surrogate codes\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.5\r\n   */\r\n  0xd800,\r\n  0xdfff,\r\n\r\n  /**\r\n   * C.3 Private use\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.3\r\n   */\r\n  0xe000,\r\n  0xf8ff /* [PRIVATE USE, PLANE 0] */,\r\n\r\n  /**\r\n   * C.6 Inappropriate for plain text\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.6\r\n   */\r\n  0xfff9,\r\n  0xfff9 /* INTERLINEAR ANNOTATION ANCHOR */,\r\n  0xfffa,\r\n  0xfffa /* INTERLINEAR ANNOTATION SEPARATOR */,\r\n  0xfffb,\r\n  0xfffb /* INTERLINEAR ANNOTATION TERMINATOR */,\r\n  0xfffc,\r\n  0xfffc /* OBJECT REPLACEMENT CHARACTER */,\r\n  0xfffd,\r\n  0xfffd /* REPLACEMENT CHARACTER */,\r\n\r\n  /**\r\n   * C.9 Tagging characters\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.9\r\n   */\r\n  0xe0001,\r\n  0xe0001 /* LANGUAGE TAG */,\r\n  0xe0020,\r\n  0xe007f /* [TAGGING CHARACTERS] */,\r\n\r\n  /**\r\n   * C.3 Private use\r\n   * @link https://tools.ietf.org/html/rfc3454#appendix-C.3\r\n   */\r\n\r\n  0xf0000,\r\n  0xffffd /* [PRIVATE USE, PLANE 15] */,\r\n  0x100000,\r\n  0x10fffd /* [PRIVATE USE, PLANE 16] */\r\n];\r\n// prettier-ignore-end\r\n\r\nconst isProhibitedCharacter = character =>\r\n  inRange(character, non_ASCII_space_characters) ||\r\n  inRange(character, prohibited_characters) ||\r\n  inRange(character, non_ASCII_controls_characters) ||\r\n  inRange(character, non_character_codepoints);\r\n\r\n// prettier-ignore-start\r\n/**\r\n * D.1 Characters with bidirectional property \"R\" or \"AL\"\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-D.1\r\n */\r\nconst bidirectional_r_al = [\r\n  0x05be,\r\n  0x05be,\r\n  0x05c0,\r\n  0x05c0,\r\n  0x05c3,\r\n  0x05c3,\r\n  0x05d0,\r\n  0x05ea,\r\n  0x05f0,\r\n  0x05f4,\r\n  0x061b,\r\n  0x061b,\r\n  0x061f,\r\n  0x061f,\r\n  0x0621,\r\n  0x063a,\r\n  0x0640,\r\n  0x064a,\r\n  0x066d,\r\n  0x066f,\r\n  0x0671,\r\n  0x06d5,\r\n  0x06dd,\r\n  0x06dd,\r\n  0x06e5,\r\n  0x06e6,\r\n  0x06fa,\r\n  0x06fe,\r\n  0x0700,\r\n  0x070d,\r\n  0x0710,\r\n  0x0710,\r\n  0x0712,\r\n  0x072c,\r\n  0x0780,\r\n  0x07a5,\r\n  0x07b1,\r\n  0x07b1,\r\n  0x200f,\r\n  0x200f,\r\n  0xfb1d,\r\n  0xfb1d,\r\n  0xfb1f,\r\n  0xfb28,\r\n  0xfb2a,\r\n  0xfb36,\r\n  0xfb38,\r\n  0xfb3c,\r\n  0xfb3e,\r\n  0xfb3e,\r\n  0xfb40,\r\n  0xfb41,\r\n  0xfb43,\r\n  0xfb44,\r\n  0xfb46,\r\n  0xfbb1,\r\n  0xfbd3,\r\n  0xfd3d,\r\n  0xfd50,\r\n  0xfd8f,\r\n  0xfd92,\r\n  0xfdc7,\r\n  0xfdf0,\r\n  0xfdfc,\r\n  0xfe70,\r\n  0xfe74,\r\n  0xfe76,\r\n  0xfefc\r\n];\r\n// prettier-ignore-end\r\n\r\nconst isBidirectionalRAL = character => inRange(character, bidirectional_r_al);\r\n\r\n// prettier-ignore-start\r\n/**\r\n * D.2 Characters with bidirectional property \"L\"\r\n * @link https://tools.ietf.org/html/rfc3454#appendix-D.2\r\n */\r\nconst bidirectional_l = [\r\n  0x0041,\r\n  0x005a,\r\n  0x0061,\r\n  0x007a,\r\n  0x00aa,\r\n  0x00aa,\r\n  0x00b5,\r\n  0x00b5,\r\n  0x00ba,\r\n  0x00ba,\r\n  0x00c0,\r\n  0x00d6,\r\n  0x00d8,\r\n  0x00f6,\r\n  0x00f8,\r\n  0x0220,\r\n  0x0222,\r\n  0x0233,\r\n  0x0250,\r\n  0x02ad,\r\n  0x02b0,\r\n  0x02b8,\r\n  0x02bb,\r\n  0x02c1,\r\n  0x02d0,\r\n  0x02d1,\r\n  0x02e0,\r\n  0x02e4,\r\n  0x02ee,\r\n  0x02ee,\r\n  0x037a,\r\n  0x037a,\r\n  0x0386,\r\n  0x0386,\r\n  0x0388,\r\n  0x038a,\r\n  0x038c,\r\n  0x038c,\r\n  0x038e,\r\n  0x03a1,\r\n  0x03a3,\r\n  0x03ce,\r\n  0x03d0,\r\n  0x03f5,\r\n  0x0400,\r\n  0x0482,\r\n  0x048a,\r\n  0x04ce,\r\n  0x04d0,\r\n  0x04f5,\r\n  0x04f8,\r\n  0x04f9,\r\n  0x0500,\r\n  0x050f,\r\n  0x0531,\r\n  0x0556,\r\n  0x0559,\r\n  0x055f,\r\n  0x0561,\r\n  0x0587,\r\n  0x0589,\r\n  0x0589,\r\n  0x0903,\r\n  0x0903,\r\n  0x0905,\r\n  0x0939,\r\n  0x093d,\r\n  0x0940,\r\n  0x0949,\r\n  0x094c,\r\n  0x0950,\r\n  0x0950,\r\n  0x0958,\r\n  0x0961,\r\n  0x0964,\r\n  0x0970,\r\n  0x0982,\r\n  0x0983,\r\n  0x0985,\r\n  0x098c,\r\n  0x098f,\r\n  0x0990,\r\n  0x0993,\r\n  0x09a8,\r\n  0x09aa,\r\n  0x09b0,\r\n  0x09b2,\r\n  0x09b2,\r\n  0x09b6,\r\n  0x09b9,\r\n  0x09be,\r\n  0x09c0,\r\n  0x09c7,\r\n  0x09c8,\r\n  0x09cb,\r\n  0x09cc,\r\n  0x09d7,\r\n  0x09d7,\r\n  0x09dc,\r\n  0x09dd,\r\n  0x09df,\r\n  0x09e1,\r\n  0x09e6,\r\n  0x09f1,\r\n  0x09f4,\r\n  0x09fa,\r\n  0x0a05,\r\n  0x0a0a,\r\n  0x0a0f,\r\n  0x0a10,\r\n  0x0a13,\r\n  0x0a28,\r\n  0x0a2a,\r\n  0x0a30,\r\n  0x0a32,\r\n  0x0a33,\r\n  0x0a35,\r\n  0x0a36,\r\n  0x0a38,\r\n  0x0a39,\r\n  0x0a3e,\r\n  0x0a40,\r\n  0x0a59,\r\n  0x0a5c,\r\n  0x0a5e,\r\n  0x0a5e,\r\n  0x0a66,\r\n  0x0a6f,\r\n  0x0a72,\r\n  0x0a74,\r\n  0x0a83,\r\n  0x0a83,\r\n  0x0a85,\r\n  0x0a8b,\r\n  0x0a8d,\r\n  0x0a8d,\r\n  0x0a8f,\r\n  0x0a91,\r\n  0x0a93,\r\n  0x0aa8,\r\n  0x0aaa,\r\n  0x0ab0,\r\n  0x0ab2,\r\n  0x0ab3,\r\n  0x0ab5,\r\n  0x0ab9,\r\n  0x0abd,\r\n  0x0ac0,\r\n  0x0ac9,\r\n  0x0ac9,\r\n  0x0acb,\r\n  0x0acc,\r\n  0x0ad0,\r\n  0x0ad0,\r\n  0x0ae0,\r\n  0x0ae0,\r\n  0x0ae6,\r\n  0x0aef,\r\n  0x0b02,\r\n  0x0b03,\r\n  0x0b05,\r\n  0x0b0c,\r\n  0x0b0f,\r\n  0x0b10,\r\n  0x0b13,\r\n  0x0b28,\r\n  0x0b2a,\r\n  0x0b30,\r\n  0x0b32,\r\n  0x0b33,\r\n  0x0b36,\r\n  0x0b39,\r\n  0x0b3d,\r\n  0x0b3e,\r\n  0x0b40,\r\n  0x0b40,\r\n  0x0b47,\r\n  0x0b48,\r\n  0x0b4b,\r\n  0x0b4c,\r\n  0x0b57,\r\n  0x0b57,\r\n  0x0b5c,\r\n  0x0b5d,\r\n  0x0b5f,\r\n  0x0b61,\r\n  0x0b66,\r\n  0x0b70,\r\n  0x0b83,\r\n  0x0b83,\r\n  0x0b85,\r\n  0x0b8a,\r\n  0x0b8e,\r\n  0x0b90,\r\n  0x0b92,\r\n  0x0b95,\r\n  0x0b99,\r\n  0x0b9a,\r\n  0x0b9c,\r\n  0x0b9c,\r\n  0x0b9e,\r\n  0x0b9f,\r\n  0x0ba3,\r\n  0x0ba4,\r\n  0x0ba8,\r\n  0x0baa,\r\n  0x0bae,\r\n  0x0bb5,\r\n  0x0bb7,\r\n  0x0bb9,\r\n  0x0bbe,\r\n  0x0bbf,\r\n  0x0bc1,\r\n  0x0bc2,\r\n  0x0bc6,\r\n  0x0bc8,\r\n  0x0bca,\r\n  0x0bcc,\r\n  0x0bd7,\r\n  0x0bd7,\r\n  0x0be7,\r\n  0x0bf2,\r\n  0x0c01,\r\n  0x0c03,\r\n  0x0c05,\r\n  0x0c0c,\r\n  0x0c0e,\r\n  0x0c10,\r\n  0x0c12,\r\n  0x0c28,\r\n  0x0c2a,\r\n  0x0c33,\r\n  0x0c35,\r\n  0x0c39,\r\n  0x0c41,\r\n  0x0c44,\r\n  0x0c60,\r\n  0x0c61,\r\n  0x0c66,\r\n  0x0c6f,\r\n  0x0c82,\r\n  0x0c83,\r\n  0x0c85,\r\n  0x0c8c,\r\n  0x0c8e,\r\n  0x0c90,\r\n  0x0c92,\r\n  0x0ca8,\r\n  0x0caa,\r\n  0x0cb3,\r\n  0x0cb5,\r\n  0x0cb9,\r\n  0x0cbe,\r\n  0x0cbe,\r\n  0x0cc0,\r\n  0x0cc4,\r\n  0x0cc7,\r\n  0x0cc8,\r\n  0x0cca,\r\n  0x0ccb,\r\n  0x0cd5,\r\n  0x0cd6,\r\n  0x0cde,\r\n  0x0cde,\r\n  0x0ce0,\r\n  0x0ce1,\r\n  0x0ce6,\r\n  0x0cef,\r\n  0x0d02,\r\n  0x0d03,\r\n  0x0d05,\r\n  0x0d0c,\r\n  0x0d0e,\r\n  0x0d10,\r\n  0x0d12,\r\n  0x0d28,\r\n  0x0d2a,\r\n  0x0d39,\r\n  0x0d3e,\r\n  0x0d40,\r\n  0x0d46,\r\n  0x0d48,\r\n  0x0d4a,\r\n  0x0d4c,\r\n  0x0d57,\r\n  0x0d57,\r\n  0x0d60,\r\n  0x0d61,\r\n  0x0d66,\r\n  0x0d6f,\r\n  0x0d82,\r\n  0x0d83,\r\n  0x0d85,\r\n  0x0d96,\r\n  0x0d9a,\r\n  0x0db1,\r\n  0x0db3,\r\n  0x0dbb,\r\n  0x0dbd,\r\n  0x0dbd,\r\n  0x0dc0,\r\n  0x0dc6,\r\n  0x0dcf,\r\n  0x0dd1,\r\n  0x0dd8,\r\n  0x0ddf,\r\n  0x0df2,\r\n  0x0df4,\r\n  0x0e01,\r\n  0x0e30,\r\n  0x0e32,\r\n  0x0e33,\r\n  0x0e40,\r\n  0x0e46,\r\n  0x0e4f,\r\n  0x0e5b,\r\n  0x0e81,\r\n  0x0e82,\r\n  0x0e84,\r\n  0x0e84,\r\n  0x0e87,\r\n  0x0e88,\r\n  0x0e8a,\r\n  0x0e8a,\r\n  0x0e8d,\r\n  0x0e8d,\r\n  0x0e94,\r\n  0x0e97,\r\n  0x0e99,\r\n  0x0e9f,\r\n  0x0ea1,\r\n  0x0ea3,\r\n  0x0ea5,\r\n  0x0ea5,\r\n  0x0ea7,\r\n  0x0ea7,\r\n  0x0eaa,\r\n  0x0eab,\r\n  0x0ead,\r\n  0x0eb0,\r\n  0x0eb2,\r\n  0x0eb3,\r\n  0x0ebd,\r\n  0x0ebd,\r\n  0x0ec0,\r\n  0x0ec4,\r\n  0x0ec6,\r\n  0x0ec6,\r\n  0x0ed0,\r\n  0x0ed9,\r\n  0x0edc,\r\n  0x0edd,\r\n  0x0f00,\r\n  0x0f17,\r\n  0x0f1a,\r\n  0x0f34,\r\n  0x0f36,\r\n  0x0f36,\r\n  0x0f38,\r\n  0x0f38,\r\n  0x0f3e,\r\n  0x0f47,\r\n  0x0f49,\r\n  0x0f6a,\r\n  0x0f7f,\r\n  0x0f7f,\r\n  0x0f85,\r\n  0x0f85,\r\n  0x0f88,\r\n  0x0f8b,\r\n  0x0fbe,\r\n  0x0fc5,\r\n  0x0fc7,\r\n  0x0fcc,\r\n  0x0fcf,\r\n  0x0fcf,\r\n  0x1000,\r\n  0x1021,\r\n  0x1023,\r\n  0x1027,\r\n  0x1029,\r\n  0x102a,\r\n  0x102c,\r\n  0x102c,\r\n  0x1031,\r\n  0x1031,\r\n  0x1038,\r\n  0x1038,\r\n  0x1040,\r\n  0x1057,\r\n  0x10a0,\r\n  0x10c5,\r\n  0x10d0,\r\n  0x10f8,\r\n  0x10fb,\r\n  0x10fb,\r\n  0x1100,\r\n  0x1159,\r\n  0x115f,\r\n  0x11a2,\r\n  0x11a8,\r\n  0x11f9,\r\n  0x1200,\r\n  0x1206,\r\n  0x1208,\r\n  0x1246,\r\n  0x1248,\r\n  0x1248,\r\n  0x124a,\r\n  0x124d,\r\n  0x1250,\r\n  0x1256,\r\n  0x1258,\r\n  0x1258,\r\n  0x125a,\r\n  0x125d,\r\n  0x1260,\r\n  0x1286,\r\n  0x1288,\r\n  0x1288,\r\n  0x128a,\r\n  0x128d,\r\n  0x1290,\r\n  0x12ae,\r\n  0x12b0,\r\n  0x12b0,\r\n  0x12b2,\r\n  0x12b5,\r\n  0x12b8,\r\n  0x12be,\r\n  0x12c0,\r\n  0x12c0,\r\n  0x12c2,\r\n  0x12c5,\r\n  0x12c8,\r\n  0x12ce,\r\n  0x12d0,\r\n  0x12d6,\r\n  0x12d8,\r\n  0x12ee,\r\n  0x12f0,\r\n  0x130e,\r\n  0x1310,\r\n  0x1310,\r\n  0x1312,\r\n  0x1315,\r\n  0x1318,\r\n  0x131e,\r\n  0x1320,\r\n  0x1346,\r\n  0x1348,\r\n  0x135a,\r\n  0x1361,\r\n  0x137c,\r\n  0x13a0,\r\n  0x13f4,\r\n  0x1401,\r\n  0x1676,\r\n  0x1681,\r\n  0x169a,\r\n  0x16a0,\r\n  0x16f0,\r\n  0x1700,\r\n  0x170c,\r\n  0x170e,\r\n  0x1711,\r\n  0x1720,\r\n  0x1731,\r\n  0x1735,\r\n  0x1736,\r\n  0x1740,\r\n  0x1751,\r\n  0x1760,\r\n  0x176c,\r\n  0x176e,\r\n  0x1770,\r\n  0x1780,\r\n  0x17b6,\r\n  0x17be,\r\n  0x17c5,\r\n  0x17c7,\r\n  0x17c8,\r\n  0x17d4,\r\n  0x17da,\r\n  0x17dc,\r\n  0x17dc,\r\n  0x17e0,\r\n  0x17e9,\r\n  0x1810,\r\n  0x1819,\r\n  0x1820,\r\n  0x1877,\r\n  0x1880,\r\n  0x18a8,\r\n  0x1e00,\r\n  0x1e9b,\r\n  0x1ea0,\r\n  0x1ef9,\r\n  0x1f00,\r\n  0x1f15,\r\n  0x1f18,\r\n  0x1f1d,\r\n  0x1f20,\r\n  0x1f45,\r\n  0x1f48,\r\n  0x1f4d,\r\n  0x1f50,\r\n  0x1f57,\r\n  0x1f59,\r\n  0x1f59,\r\n  0x1f5b,\r\n  0x1f5b,\r\n  0x1f5d,\r\n  0x1f5d,\r\n  0x1f5f,\r\n  0x1f7d,\r\n  0x1f80,\r\n  0x1fb4,\r\n  0x1fb6,\r\n  0x1fbc,\r\n  0x1fbe,\r\n  0x1fbe,\r\n  0x1fc2,\r\n  0x1fc4,\r\n  0x1fc6,\r\n  0x1fcc,\r\n  0x1fd0,\r\n  0x1fd3,\r\n  0x1fd6,\r\n  0x1fdb,\r\n  0x1fe0,\r\n  0x1fec,\r\n  0x1ff2,\r\n  0x1ff4,\r\n  0x1ff6,\r\n  0x1ffc,\r\n  0x200e,\r\n  0x200e,\r\n  0x2071,\r\n  0x2071,\r\n  0x207f,\r\n  0x207f,\r\n  0x2102,\r\n  0x2102,\r\n  0x2107,\r\n  0x2107,\r\n  0x210a,\r\n  0x2113,\r\n  0x2115,\r\n  0x2115,\r\n  0x2119,\r\n  0x211d,\r\n  0x2124,\r\n  0x2124,\r\n  0x2126,\r\n  0x2126,\r\n  0x2128,\r\n  0x2128,\r\n  0x212a,\r\n  0x212d,\r\n  0x212f,\r\n  0x2131,\r\n  0x2133,\r\n  0x2139,\r\n  0x213d,\r\n  0x213f,\r\n  0x2145,\r\n  0x2149,\r\n  0x2160,\r\n  0x2183,\r\n  0x2336,\r\n  0x237a,\r\n  0x2395,\r\n  0x2395,\r\n  0x249c,\r\n  0x24e9,\r\n  0x3005,\r\n  0x3007,\r\n  0x3021,\r\n  0x3029,\r\n  0x3031,\r\n  0x3035,\r\n  0x3038,\r\n  0x303c,\r\n  0x3041,\r\n  0x3096,\r\n  0x309d,\r\n  0x309f,\r\n  0x30a1,\r\n  0x30fa,\r\n  0x30fc,\r\n  0x30ff,\r\n  0x3105,\r\n  0x312c,\r\n  0x3131,\r\n  0x318e,\r\n  0x3190,\r\n  0x31b7,\r\n  0x31f0,\r\n  0x321c,\r\n  0x3220,\r\n  0x3243,\r\n  0x3260,\r\n  0x327b,\r\n  0x327f,\r\n  0x32b0,\r\n  0x32c0,\r\n  0x32cb,\r\n  0x32d0,\r\n  0x32fe,\r\n  0x3300,\r\n  0x3376,\r\n  0x337b,\r\n  0x33dd,\r\n  0x33e0,\r\n  0x33fe,\r\n  0x3400,\r\n  0x4db5,\r\n  0x4e00,\r\n  0x9fa5,\r\n  0xa000,\r\n  0xa48c,\r\n  0xac00,\r\n  0xd7a3,\r\n  0xd800,\r\n  0xfa2d,\r\n  0xfa30,\r\n  0xfa6a,\r\n  0xfb00,\r\n  0xfb06,\r\n  0xfb13,\r\n  0xfb17,\r\n  0xff21,\r\n  0xff3a,\r\n  0xff41,\r\n  0xff5a,\r\n  0xff66,\r\n  0xffbe,\r\n  0xffc2,\r\n  0xffc7,\r\n  0xffca,\r\n  0xffcf,\r\n  0xffd2,\r\n  0xffd7,\r\n  0xffda,\r\n  0xffdc,\r\n  0x10300,\r\n  0x1031e,\r\n  0x10320,\r\n  0x10323,\r\n  0x10330,\r\n  0x1034a,\r\n  0x10400,\r\n  0x10425,\r\n  0x10428,\r\n  0x1044d,\r\n  0x1d000,\r\n  0x1d0f5,\r\n  0x1d100,\r\n  0x1d126,\r\n  0x1d12a,\r\n  0x1d166,\r\n  0x1d16a,\r\n  0x1d172,\r\n  0x1d183,\r\n  0x1d184,\r\n  0x1d18c,\r\n  0x1d1a9,\r\n  0x1d1ae,\r\n  0x1d1dd,\r\n  0x1d400,\r\n  0x1d454,\r\n  0x1d456,\r\n  0x1d49c,\r\n  0x1d49e,\r\n  0x1d49f,\r\n  0x1d4a2,\r\n  0x1d4a2,\r\n  0x1d4a5,\r\n  0x1d4a6,\r\n  0x1d4a9,\r\n  0x1d4ac,\r\n  0x1d4ae,\r\n  0x1d4b9,\r\n  0x1d4bb,\r\n  0x1d4bb,\r\n  0x1d4bd,\r\n  0x1d4c0,\r\n  0x1d4c2,\r\n  0x1d4c3,\r\n  0x1d4c5,\r\n  0x1d505,\r\n  0x1d507,\r\n  0x1d50a,\r\n  0x1d50d,\r\n  0x1d514,\r\n  0x1d516,\r\n  0x1d51c,\r\n  0x1d51e,\r\n  0x1d539,\r\n  0x1d53b,\r\n  0x1d53e,\r\n  0x1d540,\r\n  0x1d544,\r\n  0x1d546,\r\n  0x1d546,\r\n  0x1d54a,\r\n  0x1d550,\r\n  0x1d552,\r\n  0x1d6a3,\r\n  0x1d6a8,\r\n  0x1d7c9,\r\n  0x20000,\r\n  0x2a6d6,\r\n  0x2f800,\r\n  0x2fa1d,\r\n  0xf0000,\r\n  0xffffd,\r\n  0x100000,\r\n  0x10fffd\r\n];\r\n// prettier-ignore-end\r\n\r\nconst isBidirectionalL = character => inRange(character, bidirectional_l);\r\n\r\nexport {\r\n  isUnassignedCodePoint,\r\n  isCommonlyMappedToNothing,\r\n  isNonASCIISpaceCharacter,\r\n  isProhibitedCharacter,\r\n  isBidirectionalRAL,\r\n  isBidirectionalL\r\n};\r\n","import {\r\n  isUnassignedCodePoint,\r\n  isCommonlyMappedToNothing,\r\n  isNonASCIISpaceCharacter,\r\n  isProhibitedCharacter,\r\n  isBidirectionalRAL,\r\n  isBidirectionalL\r\n} from './lib/code-points';\r\n\r\n// 2.1.  Mapping\r\n\r\n/**\r\n * non-ASCII space characters [StringPrep, C.1.2] that can be\r\n * mapped to SPACE (U+0020)\r\n */\r\nconst mapping2space = isNonASCIISpaceCharacter;\r\n\r\n/**\r\n * the \"commonly mapped to nothing\" characters [StringPrep, B.1]\r\n * that can be mapped to nothing.\r\n */\r\nconst mapping2nothing = isCommonlyMappedToNothing;\r\n\r\n// utils\r\nconst getCodePoint = character => character.codePointAt(0);\r\nconst first = x => x[0];\r\nconst last = x => x[x.length - 1];\r\n\r\n/**\r\n * Convert provided string into an array of Unicode Code Points.\r\n * Based on https://stackoverflow.com/a/21409165/1556249\r\n * and https://www.npmjs.com/package/code-point-at.\r\n * @param {string} input\r\n * @returns {number[]}\r\n */\r\nfunction toCodePoints(input) {\r\n  const codepoints = [];\r\n  const size = input.length;\r\n\r\n  for (let i = 0; i < size; i += 1) {\r\n    const before = input.charCodeAt(i);\r\n\r\n    if (before >= 0xd800 && before <= 0xdbff && size > i + 1) {\r\n      const next = input.charCodeAt(i + 1);\r\n\r\n      if (next >= 0xdc00 && next <= 0xdfff) {\r\n        codepoints.push((before - 0xd800) * 0x400 + next - 0xdc00 + 0x10000);\r\n        i += 1;\r\n        continue;\r\n      }\r\n    }\r\n\r\n    codepoints.push(before);\r\n  }\r\n\r\n  return codepoints;\r\n}\r\n\r\n/**\r\n * SASLprep.\r\n * @param {string} input\r\n * @param {Object} opts\r\n * @param {boolean} opts.allowUnassigned\r\n * @returns {string}\r\n */\r\nfunction saslprep(input, opts = {}) {\r\n  if (typeof input !== 'string') {\r\n    throw new TypeError('Expected string.');\r\n  }\r\n\r\n  if (input.length === 0) {\r\n    return '';\r\n  }\r\n\r\n  // 1. Map\r\n  const mapped_input = toCodePoints(input)\r\n    // 1.1 mapping to space\r\n    .map(character => (mapping2space(character) ? 0x20 : character))\r\n    // 1.2 mapping to nothing\r\n    .filter(character => !mapping2nothing(character));\r\n\r\n  // 2. Normalize\r\n  const normalized_input = String.fromCodePoint\r\n    .apply(null, mapped_input)\r\n    .normalize('NFKC');\r\n\r\n  const normalized_map = toCodePoints(normalized_input);\r\n\r\n  // 3. Prohibit\r\n  const hasProhibited = normalized_map.some(isProhibitedCharacter);\r\n\r\n  if (hasProhibited) {\r\n    throw new Error(\r\n      'Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3'\r\n    );\r\n  }\r\n\r\n  // Unassigned Code Points\r\n  if (opts.allowUnassigned !== true) {\r\n    const hasUnassigned = normalized_map.some(isUnassignedCodePoint);\r\n\r\n    if (hasUnassigned) {\r\n      throw new Error(\r\n        'Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5'\r\n      );\r\n    }\r\n  }\r\n\r\n  // 4. check bidi\r\n\r\n  const hasBidiRAL = normalized_map.some(isBidirectionalRAL);\r\n\r\n  const hasBidiL = normalized_map.some(isBidirectionalL);\r\n\r\n  // 4.1 If a string contains any RandALCat character, the string MUST NOT\r\n  // contain any LCat character.\r\n  if (hasBidiRAL && hasBidiL) {\r\n    throw new Error(\r\n      'String must not contain RandALCat and LCat at the same time,' +\r\n        ' see https://tools.ietf.org/html/rfc3454#section-6'\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 4.2 If a string contains any RandALCat character, a RandALCat\r\n   * character MUST be the first character of the string, and a\r\n   * RandALCat character MUST be the last character of the string.\r\n   */\r\n\r\n  const isFirstBidiRAL = isBidirectionalRAL(\r\n    getCodePoint(first(normalized_input))\r\n  );\r\n  const isLastBidiRAL = isBidirectionalRAL(\r\n    getCodePoint(last(normalized_input))\r\n  );\r\n\r\n  if (hasBidiRAL && !(isFirstBidiRAL && isLastBidiRAL)) {\r\n    throw new Error(\r\n      'Bidirectional RandALCat character must be the first and the last' +\r\n        ' character of the string, see https://tools.ietf.org/html/rfc3454#section-6'\r\n    );\r\n  }\r\n\r\n  return normalized_input;\r\n}\r\n\r\nexport default saslprep;\r\n","/*\r\n   PDFSecurity - represents PDF security settings\r\n   By Yang Liu <hi@zesik.com>\r\n */\r\n\r\nimport CryptoJS from 'crypto-js';\r\nimport saslprep from './saslprep/index';\r\n\r\nclass PDFSecurity {\r\n  static generateFileID(info = {}) {\r\n    let infoStr = `${info.CreationDate.getTime()}\\n`;\r\n\r\n    for (let key in info) {\r\n      // eslint-disable-next-line no-prototype-builtins\r\n      if (!info.hasOwnProperty(key)) {\r\n        continue;\r\n      }\r\n      infoStr += `${key}: ${info[key].valueOf()}\\n`;\r\n    }\r\n\r\n    return wordArrayToBuffer(CryptoJS.MD5(infoStr));\r\n  }\r\n\r\n  static generateRandomWordArray(bytes) {\r\n    return CryptoJS.lib.WordArray.random(bytes);\r\n  }\r\n\r\n  static create(document, options = {}) {\r\n    if (!options.ownerPassword && !options.userPassword) {\r\n      return null;\r\n    }\r\n    return new PDFSecurity(document, options);\r\n  }\r\n\r\n  constructor(document, options = {}) {\r\n    if (!options.ownerPassword && !options.userPassword) {\r\n      throw new Error('None of owner password and user password is defined.');\r\n    }\r\n\r\n    this.document = document;\r\n    this._setupEncryption(options);\r\n  }\r\n\r\n  _setupEncryption(options) {\r\n    switch (options.pdfVersion) {\r\n      case '1.4':\r\n      case '1.5':\r\n        this.version = 2;\r\n        break;\r\n      case '1.6':\r\n      case '1.7':\r\n        this.version = 4;\r\n        break;\r\n      case '1.7ext3':\r\n        this.version = 5;\r\n        break;\r\n      default:\r\n        this.version = 1;\r\n        break;\r\n    }\r\n\r\n    const encDict = {\r\n      Filter: 'Standard'\r\n    };\r\n\r\n    switch (this.version) {\r\n      case 1:\r\n      case 2:\r\n      case 4:\r\n        this._setupEncryptionV1V2V4(this.version, encDict, options);\r\n        break;\r\n      case 5:\r\n        this._setupEncryptionV5(encDict, options);\r\n        break;\r\n    }\r\n\r\n    this.dictionary = this.document.ref(encDict);\r\n  }\r\n\r\n  _setupEncryptionV1V2V4(v, encDict, options) {\r\n    let r, permissions;\r\n    switch (v) {\r\n      case 1:\r\n        r = 2;\r\n        this.keyBits = 40;\r\n        permissions = getPermissionsR2(options.permissions);\r\n        break;\r\n      case 2:\r\n        r = 3;\r\n        this.keyBits = 128;\r\n        permissions = getPermissionsR3(options.permissions);\r\n        break;\r\n      case 4:\r\n        r = 4;\r\n        this.keyBits = 128;\r\n        permissions = getPermissionsR3(options.permissions);\r\n        break;\r\n    }\r\n\r\n    const paddedUserPassword = processPasswordR2R3R4(options.userPassword);\r\n    const paddedOwnerPassword = options.ownerPassword\r\n      ? processPasswordR2R3R4(options.ownerPassword)\r\n      : paddedUserPassword;\r\n\r\n    const ownerPasswordEntry = getOwnerPasswordR2R3R4(\r\n      r,\r\n      this.keyBits,\r\n      paddedUserPassword,\r\n      paddedOwnerPassword\r\n    );\r\n    this.encryptionKey = getEncryptionKeyR2R3R4(\r\n      r,\r\n      this.keyBits,\r\n      this.document._id,\r\n      paddedUserPassword,\r\n      ownerPasswordEntry,\r\n      permissions\r\n    );\r\n    let userPasswordEntry;\r\n    if (r === 2) {\r\n      userPasswordEntry = getUserPasswordR2(this.encryptionKey);\r\n    } else {\r\n      userPasswordEntry = getUserPasswordR3R4(\r\n        this.document._id,\r\n        this.encryptionKey\r\n      );\r\n    }\r\n\r\n    encDict.V = v;\r\n    if (v >= 2) {\r\n      encDict.Length = this.keyBits;\r\n    }\r\n    if (v === 4) {\r\n      encDict.CF = {\r\n        StdCF: {\r\n          AuthEvent: 'DocOpen',\r\n          CFM: 'AESV2',\r\n          Length: this.keyBits / 8\r\n        }\r\n      };\r\n      encDict.StmF = 'StdCF';\r\n      encDict.StrF = 'StdCF';\r\n    }\r\n    encDict.R = r;\r\n    encDict.O = wordArrayToBuffer(ownerPasswordEntry);\r\n    encDict.U = wordArrayToBuffer(userPasswordEntry);\r\n    encDict.P = permissions;\r\n  }\r\n\r\n  _setupEncryptionV5(encDict, options) {\r\n    this.keyBits = 256;\r\n    const permissions = getPermissionsR3(options.permissions);\r\n\r\n    const processedUserPassword = processPasswordR5(options.userPassword);\r\n    const processedOwnerPassword = options.ownerPassword\r\n      ? processPasswordR5(options.ownerPassword)\r\n      : processedUserPassword;\r\n\r\n    this.encryptionKey = getEncryptionKeyR5(\r\n      PDFSecurity.generateRandomWordArray\r\n    );\r\n    const userPasswordEntry = getUserPasswordR5(\r\n      processedUserPassword,\r\n      PDFSecurity.generateRandomWordArray\r\n    );\r\n    const userKeySalt = CryptoJS.lib.WordArray.create(\r\n      userPasswordEntry.words.slice(10, 12),\r\n      8\r\n    );\r\n    const userEncryptionKeyEntry = getUserEncryptionKeyR5(\r\n      processedUserPassword,\r\n      userKeySalt,\r\n      this.encryptionKey\r\n    );\r\n    const ownerPasswordEntry = getOwnerPasswordR5(\r\n      processedOwnerPassword,\r\n      userPasswordEntry,\r\n      PDFSecurity.generateRandomWordArray\r\n    );\r\n    const ownerKeySalt = CryptoJS.lib.WordArray.create(\r\n      ownerPasswordEntry.words.slice(10, 12),\r\n      8\r\n    );\r\n    const ownerEncryptionKeyEntry = getOwnerEncryptionKeyR5(\r\n      processedOwnerPassword,\r\n      ownerKeySalt,\r\n      userPasswordEntry,\r\n      this.encryptionKey\r\n    );\r\n    const permsEntry = getEncryptedPermissionsR5(\r\n      permissions,\r\n      this.encryptionKey,\r\n      PDFSecurity.generateRandomWordArray\r\n    );\r\n\r\n    encDict.V = 5;\r\n    encDict.Length = this.keyBits;\r\n    encDict.CF = {\r\n      StdCF: {\r\n        AuthEvent: 'DocOpen',\r\n        CFM: 'AESV3',\r\n        Length: this.keyBits / 8\r\n      }\r\n    };\r\n    encDict.StmF = 'StdCF';\r\n    encDict.StrF = 'StdCF';\r\n    encDict.R = 5;\r\n    encDict.O = wordArrayToBuffer(ownerPasswordEntry);\r\n    encDict.OE = wordArrayToBuffer(ownerEncryptionKeyEntry);\r\n    encDict.U = wordArrayToBuffer(userPasswordEntry);\r\n    encDict.UE = wordArrayToBuffer(userEncryptionKeyEntry);\r\n    encDict.P = permissions;\r\n    encDict.Perms = wordArrayToBuffer(permsEntry);\r\n  }\r\n\r\n  getEncryptFn(obj, gen) {\r\n    let digest;\r\n    if (this.version < 5) {\r\n      digest = this.encryptionKey\r\n        .clone()\r\n        .concat(\r\n          CryptoJS.lib.WordArray.create(\r\n            [\r\n              ((obj & 0xff) << 24) |\r\n                ((obj & 0xff00) << 8) |\r\n                ((obj >> 8) & 0xff00) |\r\n                (gen & 0xff),\r\n              (gen & 0xff00) << 16\r\n            ],\r\n            5\r\n          )\r\n        );\r\n    }\r\n\r\n    if (this.version === 1 || this.version === 2) {\r\n      let key = CryptoJS.MD5(digest);\r\n      key.sigBytes = Math.min(16, this.keyBits / 8 + 5);\r\n      return buffer =>\r\n        wordArrayToBuffer(\r\n          CryptoJS.RC4.encrypt(CryptoJS.lib.WordArray.create(buffer), key)\r\n            .ciphertext\r\n        );\r\n    }\r\n\r\n    let key;\r\n    if (this.version === 4) {\r\n      key = CryptoJS.MD5(\r\n        digest.concat(CryptoJS.lib.WordArray.create([0x73416c54], 4))\r\n      );\r\n    } else {\r\n      key = this.encryptionKey;\r\n    }\r\n\r\n    const iv = PDFSecurity.generateRandomWordArray(16);\r\n    const options = {\r\n      mode: CryptoJS.mode.CBC,\r\n      padding: CryptoJS.pad.Pkcs7,\r\n      iv\r\n    };\r\n\r\n    return buffer =>\r\n      wordArrayToBuffer(\r\n        iv\r\n          .clone()\r\n          .concat(\r\n            CryptoJS.AES.encrypt(\r\n              CryptoJS.lib.WordArray.create(buffer),\r\n              key,\r\n              options\r\n            ).ciphertext\r\n          )\r\n      );\r\n  }\r\n\r\n  end() {\r\n    this.dictionary.end();\r\n  }\r\n}\r\n\r\nfunction getPermissionsR2(permissionObject = {}) {\r\n  let permissions = 0xffffffc0 >> 0;\r\n  if (permissionObject.printing) {\r\n    permissions |= 0b000000000100;\r\n  }\r\n  if (permissionObject.modifying) {\r\n    permissions |= 0b000000001000;\r\n  }\r\n  if (permissionObject.copying) {\r\n    permissions |= 0b000000010000;\r\n  }\r\n  if (permissionObject.annotating) {\r\n    permissions |= 0b000000100000;\r\n  }\r\n  return permissions;\r\n}\r\n\r\nfunction getPermissionsR3(permissionObject = {}) {\r\n  let permissions = 0xfffff0c0 >> 0;\r\n  if (permissionObject.printing === 'lowResolution') {\r\n    permissions |= 0b000000000100;\r\n  }\r\n  if (permissionObject.printing === 'highResolution') {\r\n    permissions |= 0b100000000100;\r\n  }\r\n  if (permissionObject.modifying) {\r\n    permissions |= 0b000000001000;\r\n  }\r\n  if (permissionObject.copying) {\r\n    permissions |= 0b000000010000;\r\n  }\r\n  if (permissionObject.annotating) {\r\n    permissions |= 0b000000100000;\r\n  }\r\n  if (permissionObject.fillingForms) {\r\n    permissions |= 0b000100000000;\r\n  }\r\n  if (permissionObject.contentAccessibility) {\r\n    permissions |= 0b001000000000;\r\n  }\r\n  if (permissionObject.documentAssembly) {\r\n    permissions |= 0b010000000000;\r\n  }\r\n  return permissions;\r\n}\r\n\r\nfunction getUserPasswordR2(encryptionKey) {\r\n  return CryptoJS.RC4.encrypt(processPasswordR2R3R4(), encryptionKey)\r\n    .ciphertext;\r\n}\r\n\r\nfunction getUserPasswordR3R4(documentId, encryptionKey) {\r\n  const key = encryptionKey.clone();\r\n  let cipher = CryptoJS.MD5(\r\n    processPasswordR2R3R4().concat(CryptoJS.lib.WordArray.create(documentId))\r\n  );\r\n  for (let i = 0; i < 20; i++) {\r\n    const xorRound = Math.ceil(key.sigBytes / 4);\r\n    for (let j = 0; j < xorRound; j++) {\r\n      key.words[j] =\r\n        encryptionKey.words[j] ^ (i | (i << 8) | (i << 16) | (i << 24));\r\n    }\r\n    cipher = CryptoJS.RC4.encrypt(cipher, key).ciphertext;\r\n  }\r\n  return cipher.concat(CryptoJS.lib.WordArray.create(null, 16));\r\n}\r\n\r\nfunction getOwnerPasswordR2R3R4(\r\n  r,\r\n  keyBits,\r\n  paddedUserPassword,\r\n  paddedOwnerPassword\r\n) {\r\n  let digest = paddedOwnerPassword;\r\n  let round = r >= 3 ? 51 : 1;\r\n  for (let i = 0; i < round; i++) {\r\n    digest = CryptoJS.MD5(digest);\r\n  }\r\n\r\n  const key = digest.clone();\r\n  key.sigBytes = keyBits / 8;\r\n  let cipher = paddedUserPassword;\r\n  round = r >= 3 ? 20 : 1;\r\n  for (let i = 0; i < round; i++) {\r\n    const xorRound = Math.ceil(key.sigBytes / 4);\r\n    for (let j = 0; j < xorRound; j++) {\r\n      key.words[j] = digest.words[j] ^ (i | (i << 8) | (i << 16) | (i << 24));\r\n    }\r\n    cipher = CryptoJS.RC4.encrypt(cipher, key).ciphertext;\r\n  }\r\n  return cipher;\r\n}\r\n\r\nfunction getEncryptionKeyR2R3R4(\r\n  r,\r\n  keyBits,\r\n  documentId,\r\n  paddedUserPassword,\r\n  ownerPasswordEntry,\r\n  permissions\r\n) {\r\n  let key = paddedUserPassword\r\n    .clone()\r\n    .concat(ownerPasswordEntry)\r\n    .concat(CryptoJS.lib.WordArray.create([lsbFirstWord(permissions)], 4))\r\n    .concat(CryptoJS.lib.WordArray.create(documentId));\r\n  const round = r >= 3 ? 51 : 1;\r\n  for (let i = 0; i < round; i++) {\r\n    key = CryptoJS.MD5(key);\r\n    key.sigBytes = keyBits / 8;\r\n  }\r\n  return key;\r\n}\r\n\r\nfunction getUserPasswordR5(processedUserPassword, generateRandomWordArray) {\r\n  const validationSalt = generateRandomWordArray(8);\r\n  const keySalt = generateRandomWordArray(8);\r\n  return CryptoJS.SHA256(processedUserPassword.clone().concat(validationSalt))\r\n    .concat(validationSalt)\r\n    .concat(keySalt);\r\n}\r\n\r\nfunction getUserEncryptionKeyR5(\r\n  processedUserPassword,\r\n  userKeySalt,\r\n  encryptionKey\r\n) {\r\n  const key = CryptoJS.SHA256(\r\n    processedUserPassword.clone().concat(userKeySalt)\r\n  );\r\n  const options = {\r\n    mode: CryptoJS.mode.CBC,\r\n    padding: CryptoJS.pad.NoPadding,\r\n    iv: CryptoJS.lib.WordArray.create(null, 16)\r\n  };\r\n  return CryptoJS.AES.encrypt(encryptionKey, key, options).ciphertext;\r\n}\r\n\r\nfunction getOwnerPasswordR5(\r\n  processedOwnerPassword,\r\n  userPasswordEntry,\r\n  generateRandomWordArray\r\n) {\r\n  const validationSalt = generateRandomWordArray(8);\r\n  const keySalt = generateRandomWordArray(8);\r\n  return CryptoJS.SHA256(\r\n    processedOwnerPassword\r\n      .clone()\r\n      .concat(validationSalt)\r\n      .concat(userPasswordEntry)\r\n  )\r\n    .concat(validationSalt)\r\n    .concat(keySalt);\r\n}\r\n\r\nfunction getOwnerEncryptionKeyR5(\r\n  processedOwnerPassword,\r\n  ownerKeySalt,\r\n  userPasswordEntry,\r\n  encryptionKey\r\n) {\r\n  const key = CryptoJS.SHA256(\r\n    processedOwnerPassword\r\n      .clone()\r\n      .concat(ownerKeySalt)\r\n      .concat(userPasswordEntry)\r\n  );\r\n  const options = {\r\n    mode: CryptoJS.mode.CBC,\r\n    padding: CryptoJS.pad.NoPadding,\r\n    iv: CryptoJS.lib.WordArray.create(null, 16)\r\n  };\r\n  return CryptoJS.AES.encrypt(encryptionKey, key, options).ciphertext;\r\n}\r\n\r\nfunction getEncryptionKeyR5(generateRandomWordArray) {\r\n  return generateRandomWordArray(32);\r\n}\r\n\r\nfunction getEncryptedPermissionsR5(\r\n  permissions,\r\n  encryptionKey,\r\n  generateRandomWordArray\r\n) {\r\n  const cipher = CryptoJS.lib.WordArray.create(\r\n    [lsbFirstWord(permissions), 0xffffffff, 0x54616462],\r\n    12\r\n  ).concat(generateRandomWordArray(4));\r\n  const options = {\r\n    mode: CryptoJS.mode.ECB,\r\n    padding: CryptoJS.pad.NoPadding\r\n  };\r\n  return CryptoJS.AES.encrypt(cipher, encryptionKey, options).ciphertext;\r\n}\r\n\r\nfunction processPasswordR2R3R4(password = '') {\r\n  const out = Buffer.alloc(32);\r\n  const length = password.length;\r\n  let index = 0;\r\n  while (index < length && index < 32) {\r\n    const code = password.charCodeAt(index);\r\n    if (code > 0xff) {\r\n      throw new Error('Password contains one or more invalid characters.');\r\n    }\r\n    out[index] = code;\r\n    index++;\r\n  }\r\n  while (index < 32) {\r\n    out[index] = PASSWORD_PADDING[index - length];\r\n    index++;\r\n  }\r\n  return CryptoJS.lib.WordArray.create(out);\r\n}\r\n\r\nfunction processPasswordR5(password = '') {\r\n  password = unescape(encodeURIComponent(saslprep(password)));\r\n  const length = Math.min(127, password.length);\r\n  const out = Buffer.alloc(length);\r\n\r\n  for (let i = 0; i < length; i++) {\r\n    out[i] = password.charCodeAt(i);\r\n  }\r\n\r\n  return CryptoJS.lib.WordArray.create(out);\r\n}\r\n\r\nfunction lsbFirstWord(data) {\r\n  return (\r\n    ((data & 0xff) << 24) |\r\n    ((data & 0xff00) << 8) |\r\n    ((data >> 8) & 0xff00) |\r\n    ((data >> 24) & 0xff)\r\n  );\r\n}\r\n\r\nfunction wordArrayToBuffer(wordArray) {\r\n  const byteArray = [];\r\n  for (let i = 0; i < wordArray.sigBytes; i++) {\r\n    byteArray.push(\r\n      (wordArray.words[Math.floor(i / 4)] >> (8 * (3 - (i % 4)))) & 0xff\r\n    );\r\n  }\r\n  return Buffer.from(byteArray);\r\n}\r\n\r\nconst PASSWORD_PADDING = [\r\n  0x28,\r\n  0xbf,\r\n  0x4e,\r\n  0x5e,\r\n  0x4e,\r\n  0x75,\r\n  0x8a,\r\n  0x41,\r\n  0x64,\r\n  0x00,\r\n  0x4e,\r\n  0x56,\r\n  0xff,\r\n  0xfa,\r\n  0x01,\r\n  0x08,\r\n  0x2e,\r\n  0x2e,\r\n  0x00,\r\n  0xb6,\r\n  0xd0,\r\n  0x68,\r\n  0x3e,\r\n  0x80,\r\n  0x2f,\r\n  0x0c,\r\n  0xa9,\r\n  0xfe,\r\n  0x64,\r\n  0x53,\r\n  0x69,\r\n  0x7a\r\n];\r\n\r\nexport default PDFSecurity;\r\n","import PDFObject from './object';\r\n\r\nconst { number } = PDFObject;\r\n\r\nclass PDFGradient {\r\n  constructor(doc) {\r\n    this.doc = doc;\r\n    this.stops = [];\r\n    this.embedded = false;\r\n    this.transform = [1, 0, 0, 1, 0, 0];\r\n  }\r\n\r\n  stop(pos, color, opacity) {\r\n    if (opacity == null) {\r\n      opacity = 1;\r\n    }\r\n    color = this.doc._normalizeColor(color);\r\n\r\n    if (this.stops.length === 0) {\r\n      if (color.length === 3) {\r\n        this._colorSpace = 'DeviceRGB';\r\n      } else if (color.length === 4) {\r\n        this._colorSpace = 'DeviceCMYK';\r\n      } else if (color.length === 1) {\r\n        this._colorSpace = 'DeviceGray';\r\n      } else {\r\n        throw new Error('Unknown color space');\r\n      }\r\n    } else if (\r\n      (this._colorSpace === 'DeviceRGB' && color.length !== 3) ||\r\n      (this._colorSpace === 'DeviceCMYK' && color.length !== 4) ||\r\n      (this._colorSpace === 'DeviceGray' && color.length !== 1)\r\n    ) {\r\n      throw new Error('All gradient stops must use the same color space');\r\n    }\r\n\r\n    opacity = Math.max(0, Math.min(1, opacity));\r\n    this.stops.push([pos, color, opacity]);\r\n    return this;\r\n  }\r\n\r\n  setTransform(m11, m12, m21, m22, dx, dy) {\r\n    this.transform = [m11, m12, m21, m22, dx, dy];\r\n    return this;\r\n  }\r\n\r\n  embed(m) {\r\n    let fn;\r\n    const stopsLength = this.stops.length;\r\n    if (stopsLength === 0) {\r\n      return;\r\n    }\r\n    this.embedded = true;\r\n    this.matrix = m;\r\n\r\n    // if the last stop comes before 100%, add a copy at 100%\r\n    const last = this.stops[stopsLength - 1];\r\n    if (last[0] < 1) {\r\n      this.stops.push([1, last[1], last[2]]);\r\n    }\r\n\r\n    const bounds = [];\r\n    const encode = [];\r\n    const stops = [];\r\n\r\n    for (let i = 0; i < stopsLength - 1; i++) {\r\n      encode.push(0, 1);\r\n      if (i + 2 !== stopsLength) {\r\n        bounds.push(this.stops[i + 1][0]);\r\n      }\r\n\r\n      fn = this.doc.ref({\r\n        FunctionType: 2,\r\n        Domain: [0, 1],\r\n        C0: this.stops[i + 0][1],\r\n        C1: this.stops[i + 1][1],\r\n        N: 1\r\n      });\r\n\r\n      stops.push(fn);\r\n      fn.end();\r\n    }\r\n\r\n    // if there are only two stops, we don't need a stitching function\r\n    if (stopsLength === 1) {\r\n      fn = stops[0];\r\n    } else {\r\n      fn = this.doc.ref({\r\n        FunctionType: 3, // stitching function\r\n        Domain: [0, 1],\r\n        Functions: stops,\r\n        Bounds: bounds,\r\n        Encode: encode\r\n      });\r\n\r\n      fn.end();\r\n    }\r\n\r\n    this.id = `Sh${++this.doc._gradCount}`;\r\n\r\n    const shader = this.shader(fn);\r\n    shader.end();\r\n\r\n    const pattern = this.doc.ref({\r\n      Type: 'Pattern',\r\n      PatternType: 2,\r\n      Shading: shader,\r\n      Matrix: this.matrix.map(number)\r\n    });\r\n\r\n    pattern.end();\r\n\r\n    if (this.stops.some(stop => stop[2] < 1)) {\r\n      let grad = this.opacityGradient();\r\n      grad._colorSpace = 'DeviceGray';\r\n\r\n      for (let stop of this.stops) {\r\n        grad.stop(stop[0], [stop[2]]);\r\n      }\r\n\r\n      grad = grad.embed(this.matrix);\r\n\r\n      const pageBBox = [0, 0, this.doc.page.width, this.doc.page.height];\r\n\r\n      const form = this.doc.ref({\r\n        Type: 'XObject',\r\n        Subtype: 'Form',\r\n        FormType: 1,\r\n        BBox: pageBBox,\r\n        Group: {\r\n          Type: 'Group',\r\n          S: 'Transparency',\r\n          CS: 'DeviceGray'\r\n        },\r\n        Resources: {\r\n          ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI'],\r\n          Pattern: {\r\n            Sh1: grad\r\n          }\r\n        }\r\n      });\r\n\r\n      form.write('/Pattern cs /Sh1 scn');\r\n      form.end(`${pageBBox.join(' ')} re f`);\r\n\r\n      const gstate = this.doc.ref({\r\n        Type: 'ExtGState',\r\n        SMask: {\r\n          Type: 'Mask',\r\n          S: 'Luminosity',\r\n          G: form\r\n        }\r\n      });\r\n\r\n      gstate.end();\r\n\r\n      const opacityPattern = this.doc.ref({\r\n        Type: 'Pattern',\r\n        PatternType: 1,\r\n        PaintType: 1,\r\n        TilingType: 2,\r\n        BBox: pageBBox,\r\n        XStep: pageBBox[2],\r\n        YStep: pageBBox[3],\r\n        Resources: {\r\n          ProcSet: ['PDF', 'Text', 'ImageB', 'ImageC', 'ImageI'],\r\n          Pattern: {\r\n            Sh1: pattern\r\n          },\r\n          ExtGState: {\r\n            Gs1: gstate\r\n          }\r\n        }\r\n      });\r\n\r\n      opacityPattern.write('/Gs1 gs /Pattern cs /Sh1 scn');\r\n      opacityPattern.end(`${pageBBox.join(' ')} re f`);\r\n\r\n      this.doc.page.patterns[this.id] = opacityPattern;\r\n    } else {\r\n      this.doc.page.patterns[this.id] = pattern;\r\n    }\r\n\r\n    return pattern;\r\n  }\r\n\r\n  apply(op) {\r\n    // apply gradient transform to existing document ctm\r\n    const [m0, m1, m2, m3, m4, m5] = this.doc._ctm;\r\n    const [m11, m12, m21, m22, dx, dy] = this.transform;\r\n    const m = [\r\n      m0 * m11 + m2 * m12,\r\n      m1 * m11 + m3 * m12,\r\n      m0 * m21 + m2 * m22,\r\n      m1 * m21 + m3 * m22,\r\n      m0 * dx + m2 * dy + m4,\r\n      m1 * dx + m3 * dy + m5\r\n    ];\r\n\r\n    if (!this.embedded || m.join(' ') !== this.matrix.join(' ')) {\r\n      this.embed(m);\r\n    }\r\n    return this.doc.addContent(`/${this.id} ${op}`);\r\n  }\r\n}\r\n\r\nclass PDFLinearGradient extends PDFGradient {\r\n  constructor(doc, x1, y1, x2, y2) {\r\n    super(doc);\r\n    this.x1 = x1;\r\n    this.y1 = y1;\r\n    this.x2 = x2;\r\n    this.y2 = y2;\r\n  }\r\n\r\n  shader(fn) {\r\n    return this.doc.ref({\r\n      ShadingType: 2,\r\n      ColorSpace: this._colorSpace,\r\n      Coords: [this.x1, this.y1, this.x2, this.y2],\r\n      Function: fn,\r\n      Extend: [true, true]\r\n    });\r\n  }\r\n\r\n  opacityGradient() {\r\n    return new PDFLinearGradient(this.doc, this.x1, this.y1, this.x2, this.y2);\r\n  }\r\n}\r\n\r\nclass PDFRadialGradient extends PDFGradient {\r\n  constructor(doc, x1, y1, r1, x2, y2, r2) {\r\n    super(doc);\r\n    this.doc = doc;\r\n    this.x1 = x1;\r\n    this.y1 = y1;\r\n    this.r1 = r1;\r\n    this.x2 = x2;\r\n    this.y2 = y2;\r\n    this.r2 = r2;\r\n  }\r\n\r\n  shader(fn) {\r\n    return this.doc.ref({\r\n      ShadingType: 3,\r\n      ColorSpace: this._colorSpace,\r\n      Coords: [this.x1, this.y1, this.r1, this.x2, this.y2, this.r2],\r\n      Function: fn,\r\n      Extend: [true, true]\r\n    });\r\n  }\r\n\r\n  opacityGradient() {\r\n    return new PDFRadialGradient(\r\n      this.doc,\r\n      this.x1,\r\n      this.y1,\r\n      this.r1,\r\n      this.x2,\r\n      this.y2,\r\n      this.r2\r\n    );\r\n  }\r\n}\r\n\r\nexport default { PDFGradient, PDFLinearGradient, PDFRadialGradient };\r\n","import Gradient from '../gradient';\r\n\r\nconst { PDFGradient, PDFLinearGradient, PDFRadialGradient } = Gradient;\r\n\r\nexport default {\r\n  initColor() {\r\n    // The opacity dictionaries\r\n    this._opacityRegistry = {};\r\n    this._opacityCount = 0;\r\n    return (this._gradCount = 0);\r\n  },\r\n\r\n  _normalizeColor(color) {\r\n    if (color instanceof PDFGradient) {\r\n      return color;\r\n    }\r\n\r\n    if (typeof color === 'string') {\r\n      if (color.charAt(0) === '#') {\r\n        if (color.length === 4) {\r\n          color = color.replace(\r\n            /#([0-9A-F])([0-9A-F])([0-9A-F])/i,\r\n            '#$1$1$2$2$3$3'\r\n          );\r\n        }\r\n        const hex = parseInt(color.slice(1), 16);\r\n        color = [hex >> 16, (hex >> 8) & 0xff, hex & 0xff];\r\n      } else if (namedColors[color]) {\r\n        color = namedColors[color];\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(color)) {\r\n      // RGB\r\n      if (color.length === 3) {\r\n        color = color.map(part => part / 255);\r\n        // CMYK\r\n      } else if (color.length === 4) {\r\n        color = color.map(part => part / 100);\r\n      }\r\n      return color;\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  _setColor(color, stroke) {\r\n    color = this._normalizeColor(color);\r\n    if (!color) {\r\n      return false;\r\n    }\r\n\r\n    const op = stroke ? 'SCN' : 'scn';\r\n\r\n    if (color instanceof PDFGradient) {\r\n      this._setColorSpace('Pattern', stroke);\r\n      color.apply(op);\r\n    } else {\r\n      const space = color.length === 4 ? 'DeviceCMYK' : 'DeviceRGB';\r\n      this._setColorSpace(space, stroke);\r\n\r\n      color = color.join(' ');\r\n      this.addContent(`${color} ${op}`);\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  _setColorSpace(space, stroke) {\r\n    const op = stroke ? 'CS' : 'cs';\r\n    return this.addContent(`/${space} ${op}`);\r\n  },\r\n\r\n  fillColor(color, opacity) {\r\n    const set = this._setColor(color, false);\r\n    if (set) {\r\n      this.fillOpacity(opacity);\r\n    }\r\n\r\n    // save this for text wrapper, which needs to reset\r\n    // the fill color on new pages\r\n    this._fillColor = [color, opacity];\r\n    return this;\r\n  },\r\n\r\n  strokeColor(color, opacity) {\r\n    const set = this._setColor(color, true);\r\n    if (set) {\r\n      this.strokeOpacity(opacity);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  opacity(opacity) {\r\n    this._doOpacity(opacity, opacity);\r\n    return this;\r\n  },\r\n\r\n  fillOpacity(opacity) {\r\n    this._doOpacity(opacity, null);\r\n    return this;\r\n  },\r\n\r\n  strokeOpacity(opacity) {\r\n    this._doOpacity(null, opacity);\r\n    return this;\r\n  },\r\n\r\n  _doOpacity(fillOpacity, strokeOpacity) {\r\n    let dictionary, name;\r\n    if (fillOpacity == null && strokeOpacity == null) {\r\n      return;\r\n    }\r\n\r\n    if (fillOpacity != null) {\r\n      fillOpacity = Math.max(0, Math.min(1, fillOpacity));\r\n    }\r\n    if (strokeOpacity != null) {\r\n      strokeOpacity = Math.max(0, Math.min(1, strokeOpacity));\r\n    }\r\n    const key = `${fillOpacity}_${strokeOpacity}`;\r\n\r\n    if (this._opacityRegistry[key]) {\r\n      [dictionary, name] = this._opacityRegistry[key];\r\n    } else {\r\n      dictionary = { Type: 'ExtGState' };\r\n\r\n      if (fillOpacity != null) {\r\n        dictionary.ca = fillOpacity;\r\n      }\r\n      if (strokeOpacity != null) {\r\n        dictionary.CA = strokeOpacity;\r\n      }\r\n\r\n      dictionary = this.ref(dictionary);\r\n      dictionary.end();\r\n      const id = ++this._opacityCount;\r\n      name = `Gs${id}`;\r\n      this._opacityRegistry[key] = [dictionary, name];\r\n    }\r\n\r\n    this.page.ext_gstates[name] = dictionary;\r\n    return this.addContent(`/${name} gs`);\r\n  },\r\n\r\n  linearGradient(x1, y1, x2, y2) {\r\n    return new PDFLinearGradient(this, x1, y1, x2, y2);\r\n  },\r\n\r\n  radialGradient(x1, y1, r1, x2, y2, r2) {\r\n    return new PDFRadialGradient(this, x1, y1, r1, x2, y2, r2);\r\n  }\r\n};\r\n\r\nvar namedColors = {\r\n  aliceblue: [240, 248, 255],\r\n  antiquewhite: [250, 235, 215],\r\n  aqua: [0, 255, 255],\r\n  aquamarine: [127, 255, 212],\r\n  azure: [240, 255, 255],\r\n  beige: [245, 245, 220],\r\n  bisque: [255, 228, 196],\r\n  black: [0, 0, 0],\r\n  blanchedalmond: [255, 235, 205],\r\n  blue: [0, 0, 255],\r\n  blueviolet: [138, 43, 226],\r\n  brown: [165, 42, 42],\r\n  burlywood: [222, 184, 135],\r\n  cadetblue: [95, 158, 160],\r\n  chartreuse: [127, 255, 0],\r\n  chocolate: [210, 105, 30],\r\n  coral: [255, 127, 80],\r\n  cornflowerblue: [100, 149, 237],\r\n  cornsilk: [255, 248, 220],\r\n  crimson: [220, 20, 60],\r\n  cyan: [0, 255, 255],\r\n  darkblue: [0, 0, 139],\r\n  darkcyan: [0, 139, 139],\r\n  darkgoldenrod: [184, 134, 11],\r\n  darkgray: [169, 169, 169],\r\n  darkgreen: [0, 100, 0],\r\n  darkgrey: [169, 169, 169],\r\n  darkkhaki: [189, 183, 107],\r\n  darkmagenta: [139, 0, 139],\r\n  darkolivegreen: [85, 107, 47],\r\n  darkorange: [255, 140, 0],\r\n  darkorchid: [153, 50, 204],\r\n  darkred: [139, 0, 0],\r\n  darksalmon: [233, 150, 122],\r\n  darkseagreen: [143, 188, 143],\r\n  darkslateblue: [72, 61, 139],\r\n  darkslategray: [47, 79, 79],\r\n  darkslategrey: [47, 79, 79],\r\n  darkturquoise: [0, 206, 209],\r\n  darkviolet: [148, 0, 211],\r\n  deeppink: [255, 20, 147],\r\n  deepskyblue: [0, 191, 255],\r\n  dimgray: [105, 105, 105],\r\n  dimgrey: [105, 105, 105],\r\n  dodgerblue: [30, 144, 255],\r\n  firebrick: [178, 34, 34],\r\n  floralwhite: [255, 250, 240],\r\n  forestgreen: [34, 139, 34],\r\n  fuchsia: [255, 0, 255],\r\n  gainsboro: [220, 220, 220],\r\n  ghostwhite: [248, 248, 255],\r\n  gold: [255, 215, 0],\r\n  goldenrod: [218, 165, 32],\r\n  gray: [128, 128, 128],\r\n  grey: [128, 128, 128],\r\n  green: [0, 128, 0],\r\n  greenyellow: [173, 255, 47],\r\n  honeydew: [240, 255, 240],\r\n  hotpink: [255, 105, 180],\r\n  indianred: [205, 92, 92],\r\n  indigo: [75, 0, 130],\r\n  ivory: [255, 255, 240],\r\n  khaki: [240, 230, 140],\r\n  lavender: [230, 230, 250],\r\n  lavenderblush: [255, 240, 245],\r\n  lawngreen: [124, 252, 0],\r\n  lemonchiffon: [255, 250, 205],\r\n  lightblue: [173, 216, 230],\r\n  lightcoral: [240, 128, 128],\r\n  lightcyan: [224, 255, 255],\r\n  lightgoldenrodyellow: [250, 250, 210],\r\n  lightgray: [211, 211, 211],\r\n  lightgreen: [144, 238, 144],\r\n  lightgrey: [211, 211, 211],\r\n  lightpink: [255, 182, 193],\r\n  lightsalmon: [255, 160, 122],\r\n  lightseagreen: [32, 178, 170],\r\n  lightskyblue: [135, 206, 250],\r\n  lightslategray: [119, 136, 153],\r\n  lightslategrey: [119, 136, 153],\r\n  lightsteelblue: [176, 196, 222],\r\n  lightyellow: [255, 255, 224],\r\n  lime: [0, 255, 0],\r\n  limegreen: [50, 205, 50],\r\n  linen: [250, 240, 230],\r\n  magenta: [255, 0, 255],\r\n  maroon: [128, 0, 0],\r\n  mediumaquamarine: [102, 205, 170],\r\n  mediumblue: [0, 0, 205],\r\n  mediumorchid: [186, 85, 211],\r\n  mediumpurple: [147, 112, 219],\r\n  mediumseagreen: [60, 179, 113],\r\n  mediumslateblue: [123, 104, 238],\r\n  mediumspringgreen: [0, 250, 154],\r\n  mediumturquoise: [72, 209, 204],\r\n  mediumvioletred: [199, 21, 133],\r\n  midnightblue: [25, 25, 112],\r\n  mintcream: [245, 255, 250],\r\n  mistyrose: [255, 228, 225],\r\n  moccasin: [255, 228, 181],\r\n  navajowhite: [255, 222, 173],\r\n  navy: [0, 0, 128],\r\n  oldlace: [253, 245, 230],\r\n  olive: [128, 128, 0],\r\n  olivedrab: [107, 142, 35],\r\n  orange: [255, 165, 0],\r\n  orangered: [255, 69, 0],\r\n  orchid: [218, 112, 214],\r\n  palegoldenrod: [238, 232, 170],\r\n  palegreen: [152, 251, 152],\r\n  paleturquoise: [175, 238, 238],\r\n  palevioletred: [219, 112, 147],\r\n  papayawhip: [255, 239, 213],\r\n  peachpuff: [255, 218, 185],\r\n  peru: [205, 133, 63],\r\n  pink: [255, 192, 203],\r\n  plum: [221, 160, 221],\r\n  powderblue: [176, 224, 230],\r\n  purple: [128, 0, 128],\r\n  red: [255, 0, 0],\r\n  rosybrown: [188, 143, 143],\r\n  royalblue: [65, 105, 225],\r\n  saddlebrown: [139, 69, 19],\r\n  salmon: [250, 128, 114],\r\n  sandybrown: [244, 164, 96],\r\n  seagreen: [46, 139, 87],\r\n  seashell: [255, 245, 238],\r\n  sienna: [160, 82, 45],\r\n  silver: [192, 192, 192],\r\n  skyblue: [135, 206, 235],\r\n  slateblue: [106, 90, 205],\r\n  slategray: [112, 128, 144],\r\n  slategrey: [112, 128, 144],\r\n  snow: [255, 250, 250],\r\n  springgreen: [0, 255, 127],\r\n  steelblue: [70, 130, 180],\r\n  tan: [210, 180, 140],\r\n  teal: [0, 128, 128],\r\n  thistle: [216, 191, 216],\r\n  tomato: [255, 99, 71],\r\n  turquoise: [64, 224, 208],\r\n  violet: [238, 130, 238],\r\n  wheat: [245, 222, 179],\r\n  white: [255, 255, 255],\r\n  whitesmoke: [245, 245, 245],\r\n  yellow: [255, 255, 0],\r\n  yellowgreen: [154, 205, 50]\r\n};\r\n","let cx, cy, px, py, sx, sy;\r\n\r\ncx = cy = px = py = sx = sy = 0;\r\n\r\nconst parameters = {\r\n  A: 7,\r\n  a: 7,\r\n  C: 6,\r\n  c: 6,\r\n  H: 1,\r\n  h: 1,\r\n  L: 2,\r\n  l: 2,\r\n  M: 2,\r\n  m: 2,\r\n  Q: 4,\r\n  q: 4,\r\n  S: 4,\r\n  s: 4,\r\n  T: 2,\r\n  t: 2,\r\n  V: 1,\r\n  v: 1,\r\n  Z: 0,\r\n  z: 0\r\n};\r\n\r\nconst parse = function(path) {\r\n  let cmd;\r\n  const ret = [];\r\n  let args = [];\r\n  let curArg = '';\r\n  let foundDecimal = false;\r\n  let params = 0;\r\n\r\n  for (let c of path) {\r\n    if (parameters[c] != null) {\r\n      params = parameters[c];\r\n      if (cmd) {\r\n        // save existing command\r\n        if (curArg.length > 0) {\r\n          args[args.length] = +curArg;\r\n        }\r\n        ret[ret.length] = { cmd, args };\r\n\r\n        args = [];\r\n        curArg = '';\r\n        foundDecimal = false;\r\n      }\r\n\r\n      cmd = c;\r\n    } else if (\r\n      [' ', ','].includes(c) ||\r\n      (c === '-' && curArg.length > 0 && curArg[curArg.length - 1] !== 'e') ||\r\n      (c === '.' && foundDecimal)\r\n    ) {\r\n      if (curArg.length === 0) {\r\n        continue;\r\n      }\r\n\r\n      if (args.length === params) {\r\n        // handle reused commands\r\n        ret[ret.length] = { cmd, args };\r\n        args = [+curArg];\r\n\r\n        // handle assumed commands\r\n        if (cmd === 'M') {\r\n          cmd = 'L';\r\n        }\r\n        if (cmd === 'm') {\r\n          cmd = 'l';\r\n        }\r\n      } else {\r\n        args[args.length] = +curArg;\r\n      }\r\n\r\n      foundDecimal = c === '.';\r\n\r\n      // fix for negative numbers or repeated decimals with no delimeter between commands\r\n      curArg = ['-', '.'].includes(c) ? c : '';\r\n    } else {\r\n      curArg += c;\r\n      if (c === '.') {\r\n        foundDecimal = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  // add the last command\r\n  if (curArg.length > 0) {\r\n    if (args.length === params) {\r\n      // handle reused commands\r\n      ret[ret.length] = { cmd, args };\r\n      args = [+curArg];\r\n\r\n      // handle assumed commands\r\n      if (cmd === 'M') {\r\n        cmd = 'L';\r\n      }\r\n      if (cmd === 'm') {\r\n        cmd = 'l';\r\n      }\r\n    } else {\r\n      args[args.length] = +curArg;\r\n    }\r\n  }\r\n\r\n  ret[ret.length] = { cmd, args };\r\n\r\n  return ret;\r\n};\r\n\r\nconst apply = function(commands, doc) {\r\n  // current point, control point, and subpath starting point\r\n  cx = cy = px = py = sx = sy = 0;\r\n\r\n  // run the commands\r\n  for (let i = 0; i < commands.length; i++) {\r\n    const c = commands[i];\r\n    if (typeof runners[c.cmd] === 'function') {\r\n      runners[c.cmd](doc, c.args);\r\n    }\r\n  }\r\n};\r\n\r\nconst runners = {\r\n  M(doc, a) {\r\n    cx = a[0];\r\n    cy = a[1];\r\n    px = py = null;\r\n    sx = cx;\r\n    sy = cy;\r\n    return doc.moveTo(cx, cy);\r\n  },\r\n\r\n  m(doc, a) {\r\n    cx += a[0];\r\n    cy += a[1];\r\n    px = py = null;\r\n    sx = cx;\r\n    sy = cy;\r\n    return doc.moveTo(cx, cy);\r\n  },\r\n\r\n  C(doc, a) {\r\n    cx = a[4];\r\n    cy = a[5];\r\n    px = a[2];\r\n    py = a[3];\r\n    return doc.bezierCurveTo(...a);\r\n  },\r\n\r\n  c(doc, a) {\r\n    doc.bezierCurveTo(\r\n      a[0] + cx,\r\n      a[1] + cy,\r\n      a[2] + cx,\r\n      a[3] + cy,\r\n      a[4] + cx,\r\n      a[5] + cy\r\n    );\r\n    px = cx + a[2];\r\n    py = cy + a[3];\r\n    cx += a[4];\r\n    return (cy += a[5]);\r\n  },\r\n\r\n  S(doc, a) {\r\n    if (px === null) {\r\n      px = cx;\r\n      py = cy;\r\n    }\r\n\r\n    doc.bezierCurveTo(cx - (px - cx), cy - (py - cy), a[0], a[1], a[2], a[3]);\r\n    px = a[0];\r\n    py = a[1];\r\n    cx = a[2];\r\n    return (cy = a[3]);\r\n  },\r\n\r\n  s(doc, a) {\r\n    if (px === null) {\r\n      px = cx;\r\n      py = cy;\r\n    }\r\n\r\n    doc.bezierCurveTo(\r\n      cx - (px - cx),\r\n      cy - (py - cy),\r\n      cx + a[0],\r\n      cy + a[1],\r\n      cx + a[2],\r\n      cy + a[3]\r\n    );\r\n    px = cx + a[0];\r\n    py = cy + a[1];\r\n    cx += a[2];\r\n    return (cy += a[3]);\r\n  },\r\n\r\n  Q(doc, a) {\r\n    px = a[0];\r\n    py = a[1];\r\n    cx = a[2];\r\n    cy = a[3];\r\n    return doc.quadraticCurveTo(a[0], a[1], cx, cy);\r\n  },\r\n\r\n  q(doc, a) {\r\n    doc.quadraticCurveTo(a[0] + cx, a[1] + cy, a[2] + cx, a[3] + cy);\r\n    px = cx + a[0];\r\n    py = cy + a[1];\r\n    cx += a[2];\r\n    return (cy += a[3]);\r\n  },\r\n\r\n  T(doc, a) {\r\n    if (px === null) {\r\n      px = cx;\r\n      py = cy;\r\n    } else {\r\n      px = cx - (px - cx);\r\n      py = cy - (py - cy);\r\n    }\r\n\r\n    doc.quadraticCurveTo(px, py, a[0], a[1]);\r\n    px = cx - (px - cx);\r\n    py = cy - (py - cy);\r\n    cx = a[0];\r\n    return (cy = a[1]);\r\n  },\r\n\r\n  t(doc, a) {\r\n    if (px === null) {\r\n      px = cx;\r\n      py = cy;\r\n    } else {\r\n      px = cx - (px - cx);\r\n      py = cy - (py - cy);\r\n    }\r\n\r\n    doc.quadraticCurveTo(px, py, cx + a[0], cy + a[1]);\r\n    cx += a[0];\r\n    return (cy += a[1]);\r\n  },\r\n\r\n  A(doc, a) {\r\n    solveArc(doc, cx, cy, a);\r\n    cx = a[5];\r\n    return (cy = a[6]);\r\n  },\r\n\r\n  a(doc, a) {\r\n    a[5] += cx;\r\n    a[6] += cy;\r\n    solveArc(doc, cx, cy, a);\r\n    cx = a[5];\r\n    return (cy = a[6]);\r\n  },\r\n\r\n  L(doc, a) {\r\n    cx = a[0];\r\n    cy = a[1];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  l(doc, a) {\r\n    cx += a[0];\r\n    cy += a[1];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  H(doc, a) {\r\n    cx = a[0];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  h(doc, a) {\r\n    cx += a[0];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  V(doc, a) {\r\n    cy = a[0];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  v(doc, a) {\r\n    cy += a[0];\r\n    px = py = null;\r\n    return doc.lineTo(cx, cy);\r\n  },\r\n\r\n  Z(doc) {\r\n    doc.closePath();\r\n    cx = sx;\r\n    return (cy = sy);\r\n  },\r\n\r\n  z(doc) {\r\n    doc.closePath();\r\n    cx = sx;\r\n    return (cy = sy);\r\n  }\r\n};\r\n\r\nconst solveArc = function(doc, x, y, coords) {\r\n  const [rx, ry, rot, large, sweep, ex, ey] = coords;\r\n  const segs = arcToSegments(ex, ey, rx, ry, large, sweep, rot, x, y);\r\n\r\n  for (let seg of segs) {\r\n    const bez = segmentToBezier(...seg);\r\n    doc.bezierCurveTo(...bez);\r\n  }\r\n};\r\n\r\n// from Inkscape svgtopdf, thanks!\r\nconst arcToSegments = function(x, y, rx, ry, large, sweep, rotateX, ox, oy) {\r\n  const th = rotateX * (Math.PI / 180);\r\n  const sin_th = Math.sin(th);\r\n  const cos_th = Math.cos(th);\r\n  rx = Math.abs(rx);\r\n  ry = Math.abs(ry);\r\n  px = cos_th * (ox - x) * 0.5 + sin_th * (oy - y) * 0.5;\r\n  py = cos_th * (oy - y) * 0.5 - sin_th * (ox - x) * 0.5;\r\n  let pl = (px * px) / (rx * rx) + (py * py) / (ry * ry);\r\n  if (pl > 1) {\r\n    pl = Math.sqrt(pl);\r\n    rx *= pl;\r\n    ry *= pl;\r\n  }\r\n\r\n  const a00 = cos_th / rx;\r\n  const a01 = sin_th / rx;\r\n  const a10 = -sin_th / ry;\r\n  const a11 = cos_th / ry;\r\n  const x0 = a00 * ox + a01 * oy;\r\n  const y0 = a10 * ox + a11 * oy;\r\n  const x1 = a00 * x + a01 * y;\r\n  const y1 = a10 * x + a11 * y;\r\n\r\n  const d = (x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0);\r\n  let sfactor_sq = 1 / d - 0.25;\r\n  if (sfactor_sq < 0) {\r\n    sfactor_sq = 0;\r\n  }\r\n  let sfactor = Math.sqrt(sfactor_sq);\r\n  if (sweep === large) {\r\n    sfactor = -sfactor;\r\n  }\r\n\r\n  const xc = 0.5 * (x0 + x1) - sfactor * (y1 - y0);\r\n  const yc = 0.5 * (y0 + y1) + sfactor * (x1 - x0);\r\n\r\n  const th0 = Math.atan2(y0 - yc, x0 - xc);\r\n  const th1 = Math.atan2(y1 - yc, x1 - xc);\r\n\r\n  let th_arc = th1 - th0;\r\n  if (th_arc < 0 && sweep === 1) {\r\n    th_arc += 2 * Math.PI;\r\n  } else if (th_arc > 0 && sweep === 0) {\r\n    th_arc -= 2 * Math.PI;\r\n  }\r\n\r\n  const segments = Math.ceil(Math.abs(th_arc / (Math.PI * 0.5 + 0.001)));\r\n  const result = [];\r\n\r\n  for (let i = 0; i < segments; i++) {\r\n    const th2 = th0 + (i * th_arc) / segments;\r\n    const th3 = th0 + ((i + 1) * th_arc) / segments;\r\n    result[i] = [xc, yc, th2, th3, rx, ry, sin_th, cos_th];\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nconst segmentToBezier = function(cx, cy, th0, th1, rx, ry, sin_th, cos_th) {\r\n  const a00 = cos_th * rx;\r\n  const a01 = -sin_th * ry;\r\n  const a10 = sin_th * rx;\r\n  const a11 = cos_th * ry;\r\n\r\n  const th_half = 0.5 * (th1 - th0);\r\n  const t =\r\n    ((8 / 3) * Math.sin(th_half * 0.5) * Math.sin(th_half * 0.5)) /\r\n    Math.sin(th_half);\r\n  const x1 = cx + Math.cos(th0) - t * Math.sin(th0);\r\n  const y1 = cy + Math.sin(th0) + t * Math.cos(th0);\r\n  const x3 = cx + Math.cos(th1);\r\n  const y3 = cy + Math.sin(th1);\r\n  const x2 = x3 + t * Math.sin(th1);\r\n  const y2 = y3 - t * Math.cos(th1);\r\n\r\n  return [\r\n    a00 * x1 + a01 * y1,\r\n    a10 * x1 + a11 * y1,\r\n    a00 * x2 + a01 * y2,\r\n    a10 * x2 + a11 * y2,\r\n    a00 * x3 + a01 * y3,\r\n    a10 * x3 + a11 * y3\r\n  ];\r\n};\r\n\r\nclass SVGPath {\r\n  static apply(doc, path) {\r\n    const commands = parse(path);\r\n    apply(commands, doc);\r\n  }\r\n}\r\n\r\nexport default SVGPath;\r\n","import SVGPath from '../path';\r\nimport PDFObject from '../object';\r\n\r\nconst { number } = PDFObject;\r\n\r\n// This constant is used to approximate a symmetrical arc using a cubic\r\n// Bezier curve.\r\nconst KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\r\nexport default {\r\n  initVector() {\r\n    this._ctm = [1, 0, 0, 1, 0, 0]; // current transformation matrix\r\n    return (this._ctmStack = []);\r\n  },\r\n\r\n  save() {\r\n    this._ctmStack.push(this._ctm.slice());\r\n    // TODO: save/restore colorspace and styles so not setting it unnessesarily all the time?\r\n    return this.addContent('q');\r\n  },\r\n\r\n  restore() {\r\n    this._ctm = this._ctmStack.pop() || [1, 0, 0, 1, 0, 0];\r\n    return this.addContent('Q');\r\n  },\r\n\r\n  closePath() {\r\n    return this.addContent('h');\r\n  },\r\n\r\n  lineWidth(w) {\r\n    return this.addContent(`${number(w)} w`);\r\n  },\r\n\r\n  _CAP_STYLES: {\r\n    BUTT: 0,\r\n    ROUND: 1,\r\n    SQUARE: 2\r\n  },\r\n\r\n  lineCap(c) {\r\n    if (typeof c === 'string') {\r\n      c = this._CAP_STYLES[c.toUpperCase()];\r\n    }\r\n    return this.addContent(`${c} J`);\r\n  },\r\n\r\n  _JOIN_STYLES: {\r\n    MITER: 0,\r\n    ROUND: 1,\r\n    BEVEL: 2\r\n  },\r\n\r\n  lineJoin(j) {\r\n    if (typeof j === 'string') {\r\n      j = this._JOIN_STYLES[j.toUpperCase()];\r\n    }\r\n    return this.addContent(`${j} j`);\r\n  },\r\n\r\n  miterLimit(m) {\r\n    return this.addContent(`${number(m)} M`);\r\n  },\r\n\r\n  dash(length, options = {}) {\r\n    const originalLength = length;\r\n    if (!Array.isArray(length)) {\r\n      length = [length, options.space || length];\r\n    }\r\n\r\n    const valid = length.every(x => Number.isFinite(x) && x > 0);\r\n    if (!valid) {\r\n      throw new Error(\r\n        `dash(${JSON.stringify(originalLength)}, ${JSON.stringify(\r\n          options\r\n        )}) invalid, lengths must be numeric and greater than zero`\r\n      );\r\n    }\r\n\r\n    length = length.map(number).join(' ');\r\n    return this.addContent(`[${length}] ${number(options.phase || 0)} d`);\r\n  },\r\n\r\n  undash() {\r\n    return this.addContent('[] 0 d');\r\n  },\r\n\r\n  moveTo(x, y) {\r\n    return this.addContent(`${number(x)} ${number(y)} m`);\r\n  },\r\n\r\n  lineTo(x, y) {\r\n    return this.addContent(`${number(x)} ${number(y)} l`);\r\n  },\r\n\r\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n    return this.addContent(\r\n      `${number(cp1x)} ${number(cp1y)} ${number(cp2x)} ${number(cp2y)} ${number(\r\n        x\r\n      )} ${number(y)} c`\r\n    );\r\n  },\r\n\r\n  quadraticCurveTo(cpx, cpy, x, y) {\r\n    return this.addContent(\r\n      `${number(cpx)} ${number(cpy)} ${number(x)} ${number(y)} v`\r\n    );\r\n  },\r\n\r\n  rect(x, y, w, h) {\r\n    return this.addContent(\r\n      `${number(x)} ${number(y)} ${number(w)} ${number(h)} re`\r\n    );\r\n  },\r\n\r\n  roundedRect(x, y, w, h, r) {\r\n    if (r == null) {\r\n      r = 0;\r\n    }\r\n    r = Math.min(r, 0.5 * w, 0.5 * h);\r\n\r\n    // amount to inset control points from corners (see `ellipse`)\r\n    const c = r * (1.0 - KAPPA);\r\n\r\n    this.moveTo(x + r, y);\r\n    this.lineTo(x + w - r, y);\r\n    this.bezierCurveTo(x + w - c, y, x + w, y + c, x + w, y + r);\r\n    this.lineTo(x + w, y + h - r);\r\n    this.bezierCurveTo(x + w, y + h - c, x + w - c, y + h, x + w - r, y + h);\r\n    this.lineTo(x + r, y + h);\r\n    this.bezierCurveTo(x + c, y + h, x, y + h - c, x, y + h - r);\r\n    this.lineTo(x, y + r);\r\n    this.bezierCurveTo(x, y + c, x + c, y, x + r, y);\r\n    return this.closePath();\r\n  },\r\n\r\n  ellipse(x, y, r1, r2) {\r\n    // based on http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas/2173084#2173084\r\n    if (r2 == null) {\r\n      r2 = r1;\r\n    }\r\n    x -= r1;\r\n    y -= r2;\r\n    const ox = r1 * KAPPA;\r\n    const oy = r2 * KAPPA;\r\n    const xe = x + r1 * 2;\r\n    const ye = y + r2 * 2;\r\n    const xm = x + r1;\r\n    const ym = y + r2;\r\n\r\n    this.moveTo(x, ym);\r\n    this.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\r\n    this.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\r\n    this.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\r\n    this.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\r\n    return this.closePath();\r\n  },\r\n\r\n  circle(x, y, radius) {\r\n    return this.ellipse(x, y, radius);\r\n  },\r\n\r\n  arc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n    if (anticlockwise == null) {\r\n      anticlockwise = false;\r\n    }\r\n    const TWO_PI = 2.0 * Math.PI;\r\n    const HALF_PI = 0.5 * Math.PI;\r\n\r\n    let deltaAng = endAngle - startAngle;\r\n\r\n    if (Math.abs(deltaAng) > TWO_PI) {\r\n      // draw only full circle if more than that is specified\r\n      deltaAng = TWO_PI;\r\n    } else if (deltaAng !== 0 && anticlockwise !== deltaAng < 0) {\r\n      // necessary to flip direction of rendering\r\n      const dir = anticlockwise ? -1 : 1;\r\n      deltaAng = dir * TWO_PI + deltaAng;\r\n    }\r\n\r\n    const numSegs = Math.ceil(Math.abs(deltaAng) / HALF_PI);\r\n    const segAng = deltaAng / numSegs;\r\n    const handleLen = (segAng / HALF_PI) * KAPPA * radius;\r\n    let curAng = startAngle;\r\n\r\n    // component distances between anchor point and control point\r\n    let deltaCx = -Math.sin(curAng) * handleLen;\r\n    let deltaCy = Math.cos(curAng) * handleLen;\r\n\r\n    // anchor point\r\n    let ax = x + Math.cos(curAng) * radius;\r\n    let ay = y + Math.sin(curAng) * radius;\r\n\r\n    // calculate and render segments\r\n    this.moveTo(ax, ay);\r\n\r\n    for (let segIdx = 0; segIdx < numSegs; segIdx++) {\r\n      // starting control point\r\n      const cp1x = ax + deltaCx;\r\n      const cp1y = ay + deltaCy;\r\n\r\n      // step angle\r\n      curAng += segAng;\r\n\r\n      // next anchor point\r\n      ax = x + Math.cos(curAng) * radius;\r\n      ay = y + Math.sin(curAng) * radius;\r\n\r\n      // next control point delta\r\n      deltaCx = -Math.sin(curAng) * handleLen;\r\n      deltaCy = Math.cos(curAng) * handleLen;\r\n\r\n      // ending control point\r\n      const cp2x = ax - deltaCx;\r\n      const cp2y = ay - deltaCy;\r\n\r\n      // render segment\r\n      this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, ax, ay);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  polygon(...points) {\r\n    this.moveTo(...(points.shift() || []));\r\n    for (let point of points) {\r\n      this.lineTo(...(point || []));\r\n    }\r\n    return this.closePath();\r\n  },\r\n\r\n  path(path) {\r\n    SVGPath.apply(this, path);\r\n    return this;\r\n  },\r\n\r\n  _windingRule(rule) {\r\n    if (/even-?odd/.test(rule)) {\r\n      return '*';\r\n    }\r\n\r\n    return '';\r\n  },\r\n\r\n  fill(color, rule) {\r\n    if (/(even-?odd)|(non-?zero)/.test(color)) {\r\n      rule = color;\r\n      color = null;\r\n    }\r\n\r\n    if (color) {\r\n      this.fillColor(color);\r\n    }\r\n    return this.addContent(`f${this._windingRule(rule)}`);\r\n  },\r\n\r\n  stroke(color) {\r\n    if (color) {\r\n      this.strokeColor(color);\r\n    }\r\n    return this.addContent('S');\r\n  },\r\n\r\n  fillAndStroke(fillColor, strokeColor, rule) {\r\n    if (strokeColor == null) {\r\n      strokeColor = fillColor;\r\n    }\r\n    const isFillRule = /(even-?odd)|(non-?zero)/;\r\n    if (isFillRule.test(fillColor)) {\r\n      rule = fillColor;\r\n      fillColor = null;\r\n    }\r\n\r\n    if (isFillRule.test(strokeColor)) {\r\n      rule = strokeColor;\r\n      strokeColor = fillColor;\r\n    }\r\n\r\n    if (fillColor) {\r\n      this.fillColor(fillColor);\r\n      this.strokeColor(strokeColor);\r\n    }\r\n\r\n    return this.addContent(`B${this._windingRule(rule)}`);\r\n  },\r\n\r\n  clip(rule) {\r\n    return this.addContent(`W${this._windingRule(rule)} n`);\r\n  },\r\n\r\n  transform(m11, m12, m21, m22, dx, dy) {\r\n    // keep track of the current transformation matrix\r\n    const m = this._ctm;\r\n    const [m0, m1, m2, m3, m4, m5] = m;\r\n    m[0] = m0 * m11 + m2 * m12;\r\n    m[1] = m1 * m11 + m3 * m12;\r\n    m[2] = m0 * m21 + m2 * m22;\r\n    m[3] = m1 * m21 + m3 * m22;\r\n    m[4] = m0 * dx + m2 * dy + m4;\r\n    m[5] = m1 * dx + m3 * dy + m5;\r\n\r\n    const values = [m11, m12, m21, m22, dx, dy].map(v => number(v)).join(' ');\r\n    return this.addContent(`${values} cm`);\r\n  },\r\n\r\n  translate(x, y) {\r\n    return this.transform(1, 0, 0, 1, x, y);\r\n  },\r\n\r\n  rotate(angle, options = {}) {\r\n    let y;\r\n    const rad = (angle * Math.PI) / 180;\r\n    const cos = Math.cos(rad);\r\n    const sin = Math.sin(rad);\r\n    let x = (y = 0);\r\n\r\n    if (options.origin != null) {\r\n      [x, y] = options.origin;\r\n      const x1 = x * cos - y * sin;\r\n      const y1 = x * sin + y * cos;\r\n      x -= x1;\r\n      y -= y1;\r\n    }\r\n\r\n    return this.transform(cos, sin, -sin, cos, x, y);\r\n  },\r\n\r\n  scale(xFactor, yFactor, options = {}) {\r\n    let y;\r\n    if (yFactor == null) {\r\n      yFactor = xFactor;\r\n    }\r\n    if (typeof yFactor === 'object') {\r\n      options = yFactor;\r\n      yFactor = xFactor;\r\n    }\r\n\r\n    let x = (y = 0);\r\n    if (options.origin != null) {\r\n      [x, y] = options.origin;\r\n      x -= xFactor * x;\r\n      y -= yFactor * y;\r\n    }\r\n\r\n    return this.transform(xFactor, 0, 0, yFactor, x, y);\r\n  }\r\n};\r\n","import fs from 'fs';\r\n\r\nconst WIN_ANSI_MAP = {\r\n  402: 131,\r\n  8211: 150,\r\n  8212: 151,\r\n  8216: 145,\r\n  8217: 146,\r\n  8218: 130,\r\n  8220: 147,\r\n  8221: 148,\r\n  8222: 132,\r\n  8224: 134,\r\n  8225: 135,\r\n  8226: 149,\r\n  8230: 133,\r\n  8364: 128,\r\n  8240: 137,\r\n  8249: 139,\r\n  8250: 155,\r\n  710: 136,\r\n  8482: 153,\r\n  338: 140,\r\n  339: 156,\r\n  732: 152,\r\n  352: 138,\r\n  353: 154,\r\n  376: 159,\r\n  381: 142,\r\n  382: 158\r\n};\r\n\r\nconst characters = `\\\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n.notdef       .notdef        .notdef        .notdef\r\n  \r\nspace         exclam         quotedbl       numbersign\r\ndollar        percent        ampersand      quotesingle\r\nparenleft     parenright     asterisk       plus\r\ncomma         hyphen         period         slash\r\nzero          one            two            three\r\nfour          five           six            seven\r\neight         nine           colon          semicolon\r\nless          equal          greater        question\r\n  \r\nat            A              B              C\r\nD             E              F              G\r\nH             I              J              K\r\nL             M              N              O\r\nP             Q              R              S\r\nT             U              V              W\r\nX             Y              Z              bracketleft\r\nbackslash     bracketright   asciicircum    underscore\r\n  \r\ngrave         a              b              c\r\nd             e              f              g\r\nh             i              j              k\r\nl             m              n              o\r\np             q              r              s\r\nt             u              v              w\r\nx             y              z              braceleft\r\nbar           braceright     asciitilde     .notdef\r\n  \r\nEuro          .notdef        quotesinglbase florin\r\nquotedblbase  ellipsis       dagger         daggerdbl\r\ncircumflex    perthousand    Scaron         guilsinglleft\r\nOE            .notdef        Zcaron         .notdef\r\n.notdef       quoteleft      quoteright     quotedblleft\r\nquotedblright bullet         endash         emdash\r\ntilde         trademark      scaron         guilsinglright\r\noe            .notdef        zcaron         ydieresis\r\n  \r\nspace         exclamdown     cent           sterling\r\ncurrency      yen            brokenbar      section\r\ndieresis      copyright      ordfeminine    guillemotleft\r\nlogicalnot    hyphen         registered     macron\r\ndegree        plusminus      twosuperior    threesuperior\r\nacute         mu             paragraph      periodcentered\r\ncedilla       onesuperior    ordmasculine   guillemotright\r\nonequarter    onehalf        threequarters  questiondown\r\n  \r\nAgrave        Aacute         Acircumflex    Atilde\r\nAdieresis     Aring          AE             Ccedilla\r\nEgrave        Eacute         Ecircumflex    Edieresis\r\nIgrave        Iacute         Icircumflex    Idieresis\r\nEth           Ntilde         Ograve         Oacute\r\nOcircumflex   Otilde         Odieresis      multiply\r\nOslash        Ugrave         Uacute         Ucircumflex\r\nUdieresis     Yacute         Thorn          germandbls\r\n  \r\nagrave        aacute         acircumflex    atilde\r\nadieresis     aring          ae             ccedilla\r\negrave        eacute         ecircumflex    edieresis\r\nigrave        iacute         icircumflex    idieresis\r\neth           ntilde         ograve         oacute\r\nocircumflex   otilde         odieresis      divide\r\noslash        ugrave         uacute         ucircumflex\r\nudieresis     yacute         thorn          ydieresis\\\r\n`.split(/\\s+/);\r\n\r\nclass AFMFont {\r\n  static open(filename) {\r\n    return new AFMFont(fs.readFileSync(filename, 'utf8'));\r\n  }\r\n\r\n  constructor(contents) {\r\n    this.contents = contents;\r\n    this.attributes = {};\r\n    this.glyphWidths = {};\r\n    this.boundingBoxes = {};\r\n    this.kernPairs = {};\r\n\r\n    this.parse();\r\n    // todo: remove charWidths since appears to not be used\r\n    this.charWidths = new Array(256);\r\n    for (let char = 0; char <= 255; char++) {\r\n      this.charWidths[char] = this.glyphWidths[characters[char]];\r\n    }\r\n\r\n    this.bbox = this.attributes['FontBBox'].split(/\\s+/).map(e => +e);\r\n    this.ascender = +(this.attributes['Ascender'] || 0);\r\n    this.descender = +(this.attributes['Descender'] || 0);\r\n    this.xHeight = +(this.attributes['XHeight'] || 0);\r\n    this.capHeight = +(this.attributes['CapHeight'] || 0);\r\n    this.lineGap =\r\n      this.bbox[3] - this.bbox[1] - (this.ascender - this.descender);\r\n  }\r\n\r\n  parse() {\r\n    let section = '';\r\n    for (let line of this.contents.split('\\n')) {\r\n      var match;\r\n      var a;\r\n      if ((match = line.match(/^Start(\\w+)/))) {\r\n        section = match[1];\r\n        continue;\r\n      } else if ((match = line.match(/^End(\\w+)/))) {\r\n        section = '';\r\n        continue;\r\n      }\r\n\r\n      switch (section) {\r\n        case 'FontMetrics':\r\n          match = line.match(/(^\\w+)\\s+(.*)/);\r\n          var key = match[1];\r\n          var value = match[2];\r\n\r\n          if ((a = this.attributes[key])) {\r\n            if (!Array.isArray(a)) {\r\n              a = this.attributes[key] = [a];\r\n            }\r\n            a.push(value);\r\n          } else {\r\n            this.attributes[key] = value;\r\n          }\r\n          break;\r\n\r\n        case 'CharMetrics':\r\n          if (!/^CH?\\s/.test(line)) {\r\n            continue;\r\n          }\r\n          var name = line.match(/\\bN\\s+(\\.?\\w+)\\s*;/)[1];\r\n          this.glyphWidths[name] = +line.match(/\\bWX\\s+(\\d+)\\s*;/)[1];\r\n          break;\r\n\r\n        case 'KernPairs':\r\n          match = line.match(/^KPX\\s+(\\.?\\w+)\\s+(\\.?\\w+)\\s+(-?\\d+)/);\r\n          if (match) {\r\n            this.kernPairs[match[1] + '\\0' + match[2]] = parseInt(match[3]);\r\n          }\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  encodeText(text) {\r\n    const res = [];\r\n    for (let i = 0, len = text.length; i < len; i++) {\r\n      let char = text.charCodeAt(i);\r\n      char = WIN_ANSI_MAP[char] || char;\r\n      res.push(char.toString(16));\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  glyphsForString(string) {\r\n    const glyphs = [];\r\n\r\n    for (let i = 0, len = string.length; i < len; i++) {\r\n      const charCode = string.charCodeAt(i);\r\n      glyphs.push(this.characterToGlyph(charCode));\r\n    }\r\n\r\n    return glyphs;\r\n  }\r\n\r\n  characterToGlyph(character) {\r\n    return characters[WIN_ANSI_MAP[character] || character] || '.notdef';\r\n  }\r\n\r\n  widthOfGlyph(glyph) {\r\n    return this.glyphWidths[glyph] || 0;\r\n  }\r\n\r\n  getKernPair(left, right) {\r\n    return this.kernPairs[left + '\\0' + right] || 0;\r\n  }\r\n\r\n  advancesForGlyphs(glyphs) {\r\n    const advances = [];\r\n\r\n    for (let index = 0; index < glyphs.length; index++) {\r\n      const left = glyphs[index];\r\n      const right = glyphs[index + 1];\r\n      advances.push(this.widthOfGlyph(left) + this.getKernPair(left, right));\r\n    }\r\n\r\n    return advances;\r\n  }\r\n}\r\n\r\nexport default AFMFont;\r\n","class PDFFont {\r\n  constructor() {}\r\n\r\n  encode() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n\r\n  widthOfString() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n\r\n  ref() {\r\n    return this.dictionary != null\r\n      ? this.dictionary\r\n      : (this.dictionary = this.document.ref());\r\n  }\r\n\r\n  finalize() {\r\n    if (this.embedded || this.dictionary == null) {\r\n      return;\r\n    }\r\n\r\n    this.embed();\r\n    return (this.embedded = true);\r\n  }\r\n\r\n  embed() {\r\n    throw new Error('Must be implemented by subclasses');\r\n  }\r\n\r\n  lineHeight(size, includeGap) {\r\n    if (includeGap == null) {\r\n      includeGap = false;\r\n    }\r\n    const gap = includeGap ? this.lineGap : 0;\r\n    return ((this.ascender + gap - this.descender) / 1000) * size;\r\n  }\r\n}\r\n\r\nexport default PDFFont;\r\n","import AFMFont from './afm';\r\nimport PDFFont from '../font';\r\nimport fs from 'fs';\r\n\r\n// This insanity is so bundlers can inline the font files\r\nconst STANDARD_FONTS = {\r\n  Courier() {\r\n    return fs.readFileSync(__dirname + '/data/Courier.afm', 'utf8');\r\n  },\r\n  'Courier-Bold'() {\r\n    return fs.readFileSync(__dirname + '/data/Courier-Bold.afm', 'utf8');\r\n  },\r\n  'Courier-Oblique'() {\r\n    return fs.readFileSync(__dirname + '/data/Courier-Oblique.afm', 'utf8');\r\n  },\r\n  'Courier-BoldOblique'() {\r\n    return fs.readFileSync(__dirname + '/data/Courier-BoldOblique.afm', 'utf8');\r\n  },\r\n  Helvetica() {\r\n    return fs.readFileSync(__dirname + '/data/Helvetica.afm', 'utf8');\r\n  },\r\n  'Helvetica-Bold'() {\r\n    return fs.readFileSync(__dirname + '/data/Helvetica-Bold.afm', 'utf8');\r\n  },\r\n  'Helvetica-Oblique'() {\r\n    return fs.readFileSync(__dirname + '/data/Helvetica-Oblique.afm', 'utf8');\r\n  },\r\n  'Helvetica-BoldOblique'() {\r\n    return fs.readFileSync(\r\n      __dirname + '/data/Helvetica-BoldOblique.afm',\r\n      'utf8'\r\n    );\r\n  },\r\n  'Times-Roman'() {\r\n    return fs.readFileSync(__dirname + '/data/Times-Roman.afm', 'utf8');\r\n  },\r\n  'Times-Bold'() {\r\n    return fs.readFileSync(__dirname + '/data/Times-Bold.afm', 'utf8');\r\n  },\r\n  'Times-Italic'() {\r\n    return fs.readFileSync(__dirname + '/data/Times-Italic.afm', 'utf8');\r\n  },\r\n  'Times-BoldItalic'() {\r\n    return fs.readFileSync(__dirname + '/data/Times-BoldItalic.afm', 'utf8');\r\n  },\r\n  Symbol() {\r\n    return fs.readFileSync(__dirname + '/data/Symbol.afm', 'utf8');\r\n  },\r\n  ZapfDingbats() {\r\n    return fs.readFileSync(__dirname + '/data/ZapfDingbats.afm', 'utf8');\r\n  }\r\n};\r\n\r\nclass StandardFont extends PDFFont {\r\n  constructor(document, name, id) {\r\n    super();\r\n    this.document = document;\r\n    this.name = name;\r\n    this.id = id;\r\n    this.font = new AFMFont(STANDARD_FONTS[this.name]());\r\n    ({\r\n      ascender: this.ascender,\r\n      descender: this.descender,\r\n      bbox: this.bbox,\r\n      lineGap: this.lineGap,\r\n      xHeight: this.xHeight,\r\n      capHeight: this.capHeight\r\n    } = this.font);\r\n  }\r\n\r\n  embed() {\r\n    this.dictionary.data = {\r\n      Type: 'Font',\r\n      BaseFont: this.name,\r\n      Subtype: 'Type1',\r\n      Encoding: 'WinAnsiEncoding'\r\n    };\r\n\r\n    return this.dictionary.end();\r\n  }\r\n\r\n  encode(text) {\r\n    const encoded = this.font.encodeText(text);\r\n    const glyphs = this.font.glyphsForString(`${text}`);\r\n    const advances = this.font.advancesForGlyphs(glyphs);\r\n    const positions = [];\r\n    for (let i = 0; i < glyphs.length; i++) {\r\n      const glyph = glyphs[i];\r\n      positions.push({\r\n        xAdvance: advances[i],\r\n        yAdvance: 0,\r\n        xOffset: 0,\r\n        yOffset: 0,\r\n        advanceWidth: this.font.widthOfGlyph(glyph)\r\n      });\r\n    }\r\n\r\n    return [encoded, positions];\r\n  }\r\n\r\n  widthOfString(string, size) {\r\n    const glyphs = this.font.glyphsForString(`${string}`);\r\n    const advances = this.font.advancesForGlyphs(glyphs);\r\n\r\n    let width = 0;\r\n    for (let advance of advances) {\r\n      width += advance;\r\n    }\r\n\r\n    const scale = size / 1000;\r\n    return width * scale;\r\n  }\r\n\r\n  static isStandardFont(name) {\r\n    return name in STANDARD_FONTS;\r\n  }\r\n}\r\n\r\nexport default StandardFont;\r\n","import PDFFont from '../font';\r\n\r\nconst toHex = function(num) {\r\n  return `0000${num.toString(16)}`.slice(-4);\r\n};\r\n\r\nclass EmbeddedFont extends PDFFont {\r\n  constructor(document, font, id) {\r\n    super();\r\n    this.document = document;\r\n    this.font = font;\r\n    this.id = id;\r\n    this.subset = this.font.createSubset();\r\n    this.unicode = [[0]];\r\n    this.widths = [this.font.getGlyph(0).advanceWidth];\r\n\r\n    this.name = this.font.postscriptName;\r\n    this.scale = 1000 / this.font.unitsPerEm;\r\n    this.ascender = this.font.ascent * this.scale;\r\n    this.descender = this.font.descent * this.scale;\r\n    this.xHeight = this.font.xHeight * this.scale;\r\n    this.capHeight = this.font.capHeight * this.scale;\r\n    this.lineGap = this.font.lineGap * this.scale;\r\n    this.bbox = this.font.bbox;\r\n\r\n    if (document.options.fontLayoutCache !== false) {\r\n      this.layoutCache = Object.create(null);\r\n    }\r\n  }\r\n\r\n  layoutRun(text, features) {\r\n    const run = this.font.layout(text, features);\r\n\r\n    // Normalize position values\r\n    for (let i = 0; i < run.positions.length; i++) {\r\n      const position = run.positions[i];\r\n      for (let key in position) {\r\n        position[key] *= this.scale;\r\n      }\r\n\r\n      position.advanceWidth = run.glyphs[i].advanceWidth * this.scale;\r\n    }\r\n\r\n    return run;\r\n  }\r\n\r\n  layoutCached(text) {\r\n    if (!this.layoutCache) {\r\n      return this.layoutRun(text);\r\n    }\r\n    let cached;\r\n    if ((cached = this.layoutCache[text])) {\r\n      return cached;\r\n    }\r\n\r\n    const run = this.layoutRun(text);\r\n    this.layoutCache[text] = run;\r\n    return run;\r\n  }\r\n\r\n  layout(text, features, onlyWidth) {\r\n    // Skip the cache if any user defined features are applied\r\n    if (features) {\r\n      return this.layoutRun(text, features);\r\n    }\r\n\r\n    let glyphs = onlyWidth ? null : [];\r\n    let positions = onlyWidth ? null : [];\r\n    let advanceWidth = 0;\r\n\r\n    // Split the string by words to increase cache efficiency.\r\n    // For this purpose, spaces and tabs are a good enough delimeter.\r\n    let last = 0;\r\n    let index = 0;\r\n    while (index <= text.length) {\r\n      var needle;\r\n      if (\r\n        (index === text.length && last < index) ||\r\n        ((needle = text.charAt(index)), [' ', '\\t'].includes(needle))\r\n      ) {\r\n        const run = this.layoutCached(text.slice(last, ++index));\r\n        if (!onlyWidth) {\r\n          glyphs = glyphs.concat(run.glyphs);\r\n          positions = positions.concat(run.positions);\r\n        }\r\n\r\n        advanceWidth += run.advanceWidth;\r\n        last = index;\r\n      } else {\r\n        index++;\r\n      }\r\n    }\r\n\r\n    return { glyphs, positions, advanceWidth };\r\n  }\r\n\r\n  encode(text, features) {\r\n    const { glyphs, positions } = this.layout(text, features);\r\n\r\n    const res = [];\r\n    for (let i = 0; i < glyphs.length; i++) {\r\n      const glyph = glyphs[i];\r\n      const gid = this.subset.includeGlyph(glyph.id);\r\n      res.push(`0000${gid.toString(16)}`.slice(-4));\r\n\r\n      if (this.widths[gid] == null) {\r\n        this.widths[gid] = glyph.advanceWidth * this.scale;\r\n      }\r\n      if (this.unicode[gid] == null) {\r\n        this.unicode[gid] = glyph.codePoints;\r\n      }\r\n    }\r\n\r\n    return [res, positions];\r\n  }\r\n\r\n  widthOfString(string, size, features) {\r\n    const width = this.layout(string, features, true).advanceWidth;\r\n    const scale = size / 1000;\r\n    return width * scale;\r\n  }\r\n\r\n  embed() {\r\n    const isCFF = this.subset.cff != null;\r\n    const fontFile = this.document.ref();\r\n\r\n    if (isCFF) {\r\n      fontFile.data.Subtype = 'CIDFontType0C';\r\n    }\r\n\r\n    this.subset\r\n      .encodeStream()\r\n      .on('data', data => fontFile.write(data))\r\n      .on('end', () => fontFile.end());\r\n\r\n    const familyClass =\r\n      ((this.font['OS/2'] != null\r\n        ? this.font['OS/2'].sFamilyClass\r\n        : undefined) || 0) >> 8;\r\n    let flags = 0;\r\n    if (this.font.post.isFixedPitch) {\r\n      flags |= 1 << 0;\r\n    }\r\n    if (1 <= familyClass && familyClass <= 7) {\r\n      flags |= 1 << 1;\r\n    }\r\n    flags |= 1 << 2; // assume the font uses non-latin characters\r\n    if (familyClass === 10) {\r\n      flags |= 1 << 3;\r\n    }\r\n    if (this.font.head.macStyle.italic) {\r\n      flags |= 1 << 6;\r\n    }\r\n\r\n    // generate a tag (6 uppercase letters. 17 is the char code offset from '0' to 'A'. 73 will map to 'Z')\r\n    const tag = [1, 2, 3, 4, 5, 6]\r\n      .map(i => String.fromCharCode((this.id.charCodeAt(i) || 73) + 17))\r\n      .join('');\r\n    const name = tag + '+' + this.font.postscriptName;\r\n\r\n    const { bbox } = this.font;\r\n    const descriptor = this.document.ref({\r\n      Type: 'FontDescriptor',\r\n      FontName: name,\r\n      Flags: flags,\r\n      FontBBox: [\r\n        bbox.minX * this.scale,\r\n        bbox.minY * this.scale,\r\n        bbox.maxX * this.scale,\r\n        bbox.maxY * this.scale\r\n      ],\r\n      ItalicAngle: this.font.italicAngle,\r\n      Ascent: this.ascender,\r\n      Descent: this.descender,\r\n      CapHeight: (this.font.capHeight || this.font.ascent) * this.scale,\r\n      XHeight: (this.font.xHeight || 0) * this.scale,\r\n      StemV: 0\r\n    }); // not sure how to calculate this\r\n\r\n    if (isCFF) {\r\n      descriptor.data.FontFile3 = fontFile;\r\n    } else {\r\n      descriptor.data.FontFile2 = fontFile;\r\n    }\r\n\r\n    descriptor.end();\r\n\r\n    const descendantFontData = {\r\n      Type: 'Font',\r\n      Subtype: 'CIDFontType0',\r\n      BaseFont: name,\r\n      CIDSystemInfo: {\r\n        Registry: new String('Adobe'),\r\n        Ordering: new String('Identity'),\r\n        Supplement: 0\r\n      },\r\n      FontDescriptor: descriptor,\r\n      W: [0, this.widths]\r\n    };\r\n\r\n    if (!isCFF) {\r\n      descendantFontData.Subtype = 'CIDFontType2';\r\n      descendantFontData.CIDToGIDMap = 'Identity';\r\n    }\r\n\r\n    const descendantFont = this.document.ref(descendantFontData);\r\n\r\n    descendantFont.end();\r\n\r\n    this.dictionary.data = {\r\n      Type: 'Font',\r\n      Subtype: 'Type0',\r\n      BaseFont: name,\r\n      Encoding: 'Identity-H',\r\n      DescendantFonts: [descendantFont],\r\n      ToUnicode: this.toUnicodeCmap()\r\n    };\r\n\r\n    return this.dictionary.end();\r\n  }\r\n\r\n  // Maps the glyph ids encoded in the PDF back to unicode strings\r\n  // Because of ligature substitutions and the like, there may be one or more\r\n  // unicode characters represented by each glyph.\r\n  toUnicodeCmap() {\r\n    const cmap = this.document.ref();\r\n\r\n    const entries = [];\r\n    for (let codePoints of this.unicode) {\r\n      const encoded = [];\r\n\r\n      // encode codePoints to utf16\r\n      for (let value of codePoints) {\r\n        if (value > 0xffff) {\r\n          value -= 0x10000;\r\n          encoded.push(toHex(((value >>> 10) & 0x3ff) | 0xd800));\r\n          value = 0xdc00 | (value & 0x3ff);\r\n        }\r\n\r\n        encoded.push(toHex(value));\r\n      }\r\n\r\n      entries.push(`<${encoded.join(' ')}>`);\r\n    }\r\n\r\n    cmap.end(`\\\r\n/CIDInit /ProcSet findresource begin\r\n12 dict begin\r\nbegincmap\r\n/CIDSystemInfo <<\r\n  /Registry (Adobe)\r\n  /Ordering (UCS)\r\n  /Supplement 0\r\n>> def\r\n/CMapName /Adobe-Identity-UCS def\r\n/CMapType 2 def\r\n1 begincodespacerange\r\n<0000><ffff>\r\nendcodespacerange\r\n1 beginbfrange\r\n<0000> <${toHex(entries.length - 1)}> [${entries.join(' ')}]\r\nendbfrange\r\nendcmap\r\nCMapName currentdict /CMap defineresource pop\r\nend\r\nend\\\r\n`);\r\n\r\n    return cmap;\r\n  }\r\n}\r\n\r\nexport default EmbeddedFont;\r\n","import fs from 'fs';\r\nimport fontkit from 'fontkit';\r\nimport StandardFont from './font/standard';\r\nimport EmbeddedFont from './font/embedded';\r\n\r\nclass PDFFontFactory {\r\n  static open(document, src, family, id) {\r\n    let font;\r\n    if (typeof src === 'string') {\r\n      if (StandardFont.isStandardFont(src)) {\r\n        return new StandardFont(document, src, id);\r\n      }\r\n\r\n      src = fs.readFileSync(src);\r\n    }\r\n    if (Buffer.isBuffer(src)) {\r\n      font = fontkit.create(src, family);\r\n    } else if (src instanceof Uint8Array) {\r\n      font = fontkit.create(Buffer.from(src), family);\r\n    } else if (src instanceof ArrayBuffer) {\r\n      font = fontkit.create(Buffer.from(new Uint8Array(src)), family);\r\n    }\r\n\r\n    if (font == null) {\r\n      throw new Error('Not a supported font format or standard PDF font.');\r\n    }\r\n\r\n    return new EmbeddedFont(document, font, id);\r\n  }\r\n}\r\n\r\nexport default PDFFontFactory;\r\n","import PDFFontFactory from '../font_factory';\r\n\r\nexport default {\r\n  initFonts(defaultFont = 'Helvetica') {\r\n    // Lookup table for embedded fonts\r\n    this._fontFamilies = {};\r\n    this._fontCount = 0;\r\n\r\n    // Font state\r\n    this._fontSize = 12;\r\n    this._font = null;\r\n\r\n    this._registeredFonts = {};\r\n\r\n    // Set the default font\r\n    if (defaultFont) {\r\n      this.font(defaultFont);\r\n    }\r\n  },\r\n\r\n  font(src, family, size) {\r\n    let cacheKey, font;\r\n    if (typeof family === 'number') {\r\n      size = family;\r\n      family = null;\r\n    }\r\n\r\n    // check registered fonts if src is a string\r\n    if (typeof src === 'string' && this._registeredFonts[src]) {\r\n      cacheKey = src;\r\n      ({ src, family } = this._registeredFonts[src]);\r\n    } else {\r\n      cacheKey = family || src;\r\n      if (typeof cacheKey !== 'string') {\r\n        cacheKey = null;\r\n      }\r\n    }\r\n\r\n    if (size != null) {\r\n      this.fontSize(size);\r\n    }\r\n\r\n    // fast path: check if the font is already in the PDF\r\n    if ((font = this._fontFamilies[cacheKey])) {\r\n      this._font = font;\r\n      return this;\r\n    }\r\n\r\n    // load the font\r\n    const id = `F${++this._fontCount}`;\r\n    this._font = PDFFontFactory.open(this, src, family, id);\r\n\r\n    // check for existing font familes with the same name already in the PDF\r\n    // useful if the font was passed as a buffer\r\n    if ((font = this._fontFamilies[this._font.name])) {\r\n      this._font = font;\r\n      return this;\r\n    }\r\n\r\n    // save the font for reuse later\r\n    if (cacheKey) {\r\n      this._fontFamilies[cacheKey] = this._font;\r\n    }\r\n\r\n    if (this._font.name) {\r\n      this._fontFamilies[this._font.name] = this._font;\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  fontSize(_fontSize) {\r\n    this._fontSize = _fontSize;\r\n    return this;\r\n  },\r\n\r\n  currentLineHeight(includeGap) {\r\n    if (includeGap == null) {\r\n      includeGap = false;\r\n    }\r\n    return this._font.lineHeight(this._fontSize, includeGap);\r\n  },\r\n\r\n  registerFont(name, src, family) {\r\n    this._registeredFonts[name] = {\r\n      src,\r\n      family\r\n    };\r\n\r\n    return this;\r\n  }\r\n};\r\n","import { EventEmitter } from 'events';\r\nimport LineBreaker from 'linebreak';\r\n\r\nclass LineWrapper extends EventEmitter {\r\n  constructor(document, options) {\r\n    super();\r\n    this.document = document;\r\n    this.indent = options.indent || 0;\r\n    this.characterSpacing = options.characterSpacing || 0;\r\n    this.wordSpacing = options.wordSpacing === 0;\r\n    this.columns = options.columns || 1;\r\n    this.columnGap = options.columnGap != null ? options.columnGap : 18; // 1/4 inch\r\n    this.lineWidth =\r\n      (options.width - this.columnGap * (this.columns - 1)) / this.columns;\r\n    this.spaceLeft = this.lineWidth;\r\n    this.startX = this.document.x;\r\n    this.startY = this.document.y;\r\n    this.column = 1;\r\n    this.ellipsis = options.ellipsis;\r\n    this.continuedX = 0;\r\n    this.features = options.features;\r\n\r\n    // calculate the maximum Y position the text can appear at\r\n    if (options.height != null) {\r\n      this.height = options.height;\r\n      this.maxY = this.startY + options.height;\r\n    } else {\r\n      this.maxY = this.document.page.maxY();\r\n    }\r\n\r\n    // handle paragraph indents\r\n    this.on('firstLine', options => {\r\n      // if this is the first line of the text segment, and\r\n      // we're continuing where we left off, indent that much\r\n      // otherwise use the user specified indent option\r\n      const indent = this.continuedX || this.indent;\r\n      this.document.x += indent;\r\n      this.lineWidth -= indent;\r\n\r\n      return this.once('line', () => {\r\n        this.document.x -= indent;\r\n        this.lineWidth += indent;\r\n        if (options.continued && !this.continuedX) {\r\n          this.continuedX = this.indent;\r\n        }\r\n        if (!options.continued) {\r\n          return (this.continuedX = 0);\r\n        }\r\n      });\r\n    });\r\n\r\n    // handle left aligning last lines of paragraphs\r\n    this.on('lastLine', options => {\r\n      const { align } = options;\r\n      if (align === 'justify') {\r\n        options.align = 'left';\r\n      }\r\n      this.lastLine = true;\r\n\r\n      return this.once('line', () => {\r\n        this.document.y += options.paragraphGap || 0;\r\n        options.align = align;\r\n        return (this.lastLine = false);\r\n      });\r\n    });\r\n  }\r\n\r\n  wordWidth(word) {\r\n    return (\r\n      this.document.widthOfString(word, this) +\r\n      this.characterSpacing +\r\n      this.wordSpacing\r\n    );\r\n  }\r\n\r\n  eachWord(text, fn) {\r\n    // setup a unicode line breaker\r\n    let bk;\r\n    const breaker = new LineBreaker(text);\r\n    let last = null;\r\n    const wordWidths = Object.create(null);\r\n\r\n    while ((bk = breaker.nextBreak())) {\r\n      var shouldContinue;\r\n      let word = text.slice(\r\n        (last != null ? last.position : undefined) || 0,\r\n        bk.position\r\n      );\r\n      let w =\r\n        wordWidths[word] != null\r\n          ? wordWidths[word]\r\n          : (wordWidths[word] = this.wordWidth(word));\r\n\r\n      // if the word is longer than the whole line, chop it up\r\n      // TODO: break by grapheme clusters, not JS string characters\r\n      if (w > this.lineWidth + this.continuedX) {\r\n        // make some fake break objects\r\n        let lbk = last;\r\n        const fbk = {};\r\n\r\n        while (word.length) {\r\n          // fit as much of the word as possible into the space we have\r\n          var l, mightGrow;\r\n          if (w > this.spaceLeft) {\r\n            // start our check at the end of our available space - this method is faster than a loop of each character and it resolves\r\n            // an issue with long loops when processing massive words, such as a huge number of spaces\r\n            l = Math.ceil(this.spaceLeft / (w / word.length));\r\n            w = this.wordWidth(word.slice(0, l));\r\n            mightGrow = w <= this.spaceLeft && l < word.length;\r\n          } else {\r\n            l = word.length;\r\n          }\r\n          let mustShrink = w > this.spaceLeft && l > 0;\r\n          // shrink or grow word as necessary after our near-guess above\r\n          while (mustShrink || mightGrow) {\r\n            if (mustShrink) {\r\n              w = this.wordWidth(word.slice(0, --l));\r\n              mustShrink = w > this.spaceLeft && l > 0;\r\n            } else {\r\n              w = this.wordWidth(word.slice(0, ++l));\r\n              mustShrink = w > this.spaceLeft && l > 0;\r\n              mightGrow = w <= this.spaceLeft && l < word.length;\r\n            }\r\n          }\r\n\r\n          // check for the edge case where a single character cannot fit into a line.\r\n          if (l === 0 && this.spaceLeft === this.lineWidth) {\r\n            l = 1;\r\n          }\r\n\r\n          // send a required break unless this is the last piece and a linebreak is not specified\r\n          fbk.required = bk.required || l < word.length;\r\n          shouldContinue = fn(word.slice(0, l), w, fbk, lbk);\r\n          lbk = { required: false };\r\n\r\n          // get the remaining piece of the word\r\n          word = word.slice(l);\r\n          w = this.wordWidth(word);\r\n\r\n          if (shouldContinue === false) {\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        // otherwise just emit the break as it was given to us\r\n        shouldContinue = fn(word, w, bk, last);\r\n      }\r\n\r\n      if (shouldContinue === false) {\r\n        break;\r\n      }\r\n      last = bk;\r\n    }\r\n  }\r\n\r\n  wrap(text, options) {\r\n    // override options from previous continued fragments\r\n    if (options.indent != null) {\r\n      this.indent = options.indent;\r\n    }\r\n    if (options.characterSpacing != null) {\r\n      this.characterSpacing = options.characterSpacing;\r\n    }\r\n    if (options.wordSpacing != null) {\r\n      this.wordSpacing = options.wordSpacing;\r\n    }\r\n    if (options.ellipsis != null) {\r\n      this.ellipsis = options.ellipsis;\r\n    }\r\n\r\n    // make sure we're actually on the page\r\n    // and that the first line of is never by\r\n    // itself at the bottom of a page (orphans)\r\n    const nextY = this.document.y + this.document.currentLineHeight(true);\r\n    if (this.document.y > this.maxY || nextY > this.maxY) {\r\n      this.nextSection();\r\n    }\r\n\r\n    let buffer = '';\r\n    let textWidth = 0;\r\n    let wc = 0;\r\n    let lc = 0;\r\n\r\n    let { y } = this.document; // used to reset Y pos if options.continued (below)\r\n    const emitLine = () => {\r\n      options.textWidth = textWidth + this.wordSpacing * (wc - 1);\r\n      options.wordCount = wc;\r\n      options.lineWidth = this.lineWidth;\r\n      ({ y } = this.document);\r\n      this.emit('line', buffer, options, this);\r\n      return lc++;\r\n    };\r\n\r\n    this.emit('sectionStart', options, this);\r\n\r\n    this.eachWord(text, (word, w, bk, last) => {\r\n      if (last == null || last.required) {\r\n        this.emit('firstLine', options, this);\r\n        this.spaceLeft = this.lineWidth;\r\n      }\r\n\r\n      if (w <= this.spaceLeft) {\r\n        buffer += word;\r\n        textWidth += w;\r\n        wc++;\r\n      }\r\n\r\n      if (bk.required || w > this.spaceLeft) {\r\n        // if the user specified a max height and an ellipsis, and is about to pass the\r\n        // max height and max columns after the next line, append the ellipsis\r\n        const lh = this.document.currentLineHeight(true);\r\n        if (\r\n          this.height != null &&\r\n          this.ellipsis &&\r\n          this.document.y + lh * 2 > this.maxY &&\r\n          this.column >= this.columns\r\n        ) {\r\n          if (this.ellipsis === true) {\r\n            this.ellipsis = '…';\r\n          } // map default ellipsis character\r\n          buffer = buffer.replace(/\\s+$/, '');\r\n          textWidth = this.wordWidth(buffer + this.ellipsis);\r\n\r\n          // remove characters from the buffer until the ellipsis fits\r\n          // to avoid infinite loop need to stop while-loop if buffer is empty string\r\n          while (buffer && textWidth > this.lineWidth) {\r\n            buffer = buffer.slice(0, -1).replace(/\\s+$/, '');\r\n            textWidth = this.wordWidth(buffer + this.ellipsis);\r\n          }\r\n          // need to add ellipsis only if there is enough space for it\r\n          if (textWidth <= this.lineWidth) {\r\n            buffer = buffer + this.ellipsis;\r\n          }\r\n\r\n          textWidth = this.wordWidth(buffer);\r\n        }\r\n\r\n        if (bk.required) {\r\n          if (w > this.spaceLeft) {\r\n            emitLine();\r\n            buffer = word;\r\n            textWidth = w;\r\n            wc = 1;\r\n          }\r\n\r\n          this.emit('lastLine', options, this);\r\n        }\r\n\r\n        emitLine();\r\n\r\n        // if we've reached the edge of the page,\r\n        // continue on a new page or column\r\n        if (this.document.y + lh > this.maxY) {\r\n          const shouldContinue = this.nextSection();\r\n\r\n          // stop if we reached the maximum height\r\n          if (!shouldContinue) {\r\n            wc = 0;\r\n            buffer = '';\r\n            return false;\r\n          }\r\n        }\r\n\r\n        // reset the space left and buffer\r\n        if (bk.required) {\r\n          this.spaceLeft = this.lineWidth;\r\n          buffer = '';\r\n          textWidth = 0;\r\n          return (wc = 0);\r\n        } else {\r\n          // reset the space left and buffer\r\n          this.spaceLeft = this.lineWidth - w;\r\n          buffer = word;\r\n          textWidth = w;\r\n          return (wc = 1);\r\n        }\r\n      } else {\r\n        return (this.spaceLeft -= w);\r\n      }\r\n    });\r\n\r\n    if (wc > 0) {\r\n      this.emit('lastLine', options, this);\r\n      emitLine();\r\n    }\r\n\r\n    this.emit('sectionEnd', options, this);\r\n\r\n    // if the wrap is set to be continued, save the X position\r\n    // to start the first line of the next segment at, and reset\r\n    // the y position\r\n    if (options.continued === true) {\r\n      if (lc > 1) {\r\n        this.continuedX = 0;\r\n      }\r\n      this.continuedX += options.textWidth || 0;\r\n      return (this.document.y = y);\r\n    } else {\r\n      return (this.document.x = this.startX);\r\n    }\r\n  }\r\n\r\n  nextSection(options) {\r\n    this.emit('sectionEnd', options, this);\r\n\r\n    if (++this.column > this.columns) {\r\n      // if a max height was specified by the user, we're done.\r\n      // otherwise, the default is to make a new page at the bottom.\r\n      if (this.height != null) {\r\n        return false;\r\n      }\r\n\r\n      this.document.continueOnNewPage();\r\n      this.column = 1;\r\n      this.startY = this.document.page.margins.top;\r\n      this.maxY = this.document.page.maxY();\r\n      this.document.x = this.startX;\r\n      if (this.document._fillColor) {\r\n        this.document.fillColor(...this.document._fillColor);\r\n      }\r\n      this.emit('pageBreak', options, this);\r\n    } else {\r\n      this.document.x += this.lineWidth + this.columnGap;\r\n      this.document.y = this.startY;\r\n      this.emit('columnBreak', options, this);\r\n    }\r\n\r\n    this.emit('sectionStart', options, this);\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default LineWrapper;\r\n","import LineWrapper from '../line_wrapper';\r\nimport PDFObject from '../object';\r\n\r\nconst { number } = PDFObject;\r\n\r\nexport default {\r\n  initText() {\r\n    this._line = this._line.bind(this);\r\n    // Current coordinates\r\n    this.x = 0;\r\n    this.y = 0;\r\n    return (this._lineGap = 0);\r\n  },\r\n\r\n  lineGap(_lineGap) {\r\n    this._lineGap = _lineGap;\r\n    return this;\r\n  },\r\n\r\n  moveDown(lines) {\r\n    if (lines == null) {\r\n      lines = 1;\r\n    }\r\n    this.y += this.currentLineHeight(true) * lines + this._lineGap;\r\n    return this;\r\n  },\r\n\r\n  moveUp(lines) {\r\n    if (lines == null) {\r\n      lines = 1;\r\n    }\r\n    this.y -= this.currentLineHeight(true) * lines + this._lineGap;\r\n    return this;\r\n  },\r\n\r\n  _text(text, x, y, options, lineCallback) {\r\n    options = this._initOptions(x, y, options);\r\n\r\n    // Convert text to a string\r\n    text = text == null ? '' : `${text}`;\r\n\r\n    // if the wordSpacing option is specified, remove multiple consecutive spaces\r\n    if (options.wordSpacing) {\r\n      text = text.replace(/\\s{2,}/g, ' ');\r\n    }\r\n\r\n    const addStructure = () => {\r\n      if (options.structParent) {\r\n        options.structParent.add(this.struct(options.structType || 'P',\r\n          [ this.markStructureContent(options.structType || 'P') ]));\r\n      }\r\n    };\r\n\r\n    // word wrapping\r\n    if (options.width) {\r\n      let wrapper = this._wrapper;\r\n      if (!wrapper) {\r\n        wrapper = new LineWrapper(this, options);\r\n        wrapper.on('line', lineCallback);\r\n        wrapper.on('firstLine', addStructure);\r\n      }\r\n\r\n      this._wrapper = options.continued ? wrapper : null;\r\n      this._textOptions = options.continued ? options : null;\r\n      wrapper.wrap(text, options);\r\n\r\n      // render paragraphs as single lines\r\n    } else {\r\n      for (let line of text.split('\\n')) {\r\n        addStructure();\r\n        lineCallback(line, options);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  text(text, x, y, options) {\r\n    return this._text(text, x, y, options, this._line);\r\n  },\r\n\r\n  widthOfString(string, options = {}) {\r\n    return (\r\n      this._font.widthOfString(string, this._fontSize, options.features) +\r\n      (options.characterSpacing || 0) * (string.length - 1)\r\n    );\r\n  },\r\n\r\n  heightOfString(text, options) {\r\n    const { x, y } = this;\r\n\r\n    options = this._initOptions(options);\r\n    options.height = Infinity; // don't break pages\r\n\r\n    const lineGap = options.lineGap || this._lineGap || 0;\r\n    this._text(text, this.x, this.y, options, () => {\r\n      return (this.y += this.currentLineHeight(true) + lineGap);\r\n    });\r\n\r\n    const height = this.y - y;\r\n    this.x = x;\r\n    this.y = y;\r\n\r\n    return height;\r\n  },\r\n\r\n  list(list, x, y, options, wrapper) {\r\n    options = this._initOptions(x, y, options);\r\n\r\n    const listType = options.listType || 'bullet';\r\n    const unit = Math.round((this._font.ascender / 1000) * this._fontSize);\r\n    const midLine = unit / 2;\r\n    const r = options.bulletRadius || unit / 3;\r\n    const indent =\r\n      options.textIndent || (listType === 'bullet' ? r * 5 : unit * 2);\r\n    const itemIndent =\r\n      options.bulletIndent || (listType === 'bullet' ? r * 8 : unit * 2);\r\n\r\n    let level = 1;\r\n    const items = [];\r\n    const levels = [];\r\n    const numbers = [];\r\n\r\n    var flatten = function(list) {\r\n      let n = 1;\r\n      for (let i = 0; i < list.length; i++) {\r\n        const item = list[i];\r\n        if (Array.isArray(item)) {\r\n          level++;\r\n          flatten(item);\r\n          level--;\r\n        } else {\r\n          items.push(item);\r\n          levels.push(level);\r\n          if (listType !== 'bullet') {\r\n            numbers.push(n++);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    flatten(list);\r\n\r\n    const label = function(n) {\r\n      switch (listType) {\r\n        case 'numbered':\r\n          return `${n}.`;\r\n        case 'lettered':\r\n          var letter = String.fromCharCode(((n - 1) % 26) + 65);\r\n          var times = Math.floor((n - 1) / 26 + 1);\r\n          var text = Array(times + 1).join(letter);\r\n          return `${text}.`;\r\n      }\r\n    };\r\n\r\n    wrapper = new LineWrapper(this, options);\r\n    wrapper.on('line', this._line);\r\n\r\n    level = 1;\r\n    let i = 0;\r\n    wrapper.on('firstLine', () => {\r\n      let item, itemType, labelType, bodyType;\r\n      if (options.structParent) {\r\n        if (options.structTypes) {\r\n          [ itemType, labelType, bodyType ] = options.structTypes;\r\n        } else {\r\n          [ itemType, labelType, bodyType ] = [ 'LI', 'Lbl', 'LBody' ];\r\n        }\r\n      }\r\n\r\n      if (itemType) {\r\n        item = this.struct(itemType);\r\n        options.structParent.add(item);\r\n      } else if (options.structParent) {\r\n        item = options.structParent;\r\n      }\r\n\r\n      let l;\r\n      if ((l = levels[i++]) !== level) {\r\n        const diff = itemIndent * (l - level);\r\n        this.x += diff;\r\n        wrapper.lineWidth -= diff;\r\n        level = l;\r\n      }\r\n\r\n      if (item && (labelType || bodyType)) {\r\n        item.add(this.struct(labelType || bodyType,\r\n          [ this.markStructureContent(labelType || bodyType) ]));\r\n      }\r\n      switch (listType) {\r\n        case 'bullet':\r\n          this.circle(this.x - indent + r, this.y + midLine, r);\r\n          this.fill();\r\n          break;\r\n        case 'numbered':\r\n        case 'lettered':\r\n          var text = label(numbers[i - 1]);\r\n          this._fragment(text, this.x - indent, this.y, options);\r\n          break;\r\n      }\r\n\r\n      if (item && labelType && bodyType) {\r\n        item.add(this.struct(bodyType, [ this.markStructureContent(bodyType) ]));\r\n      }\r\n      if (item && item !== options.structParent) {\r\n        item.end();\r\n      }\r\n    });\r\n\r\n    wrapper.on('sectionStart', () => {\r\n      const pos = indent + itemIndent * (level - 1);\r\n      this.x += pos;\r\n      return (wrapper.lineWidth -= pos);\r\n    });\r\n\r\n    wrapper.on('sectionEnd', () => {\r\n      const pos = indent + itemIndent * (level - 1);\r\n      this.x -= pos;\r\n      return (wrapper.lineWidth += pos);\r\n    });\r\n\r\n    wrapper.wrap(items.join('\\n'), options);\r\n\r\n    return this;\r\n  },\r\n\r\n  _initOptions(x = {}, y, options = {}) {\r\n    if (typeof x === 'object') {\r\n      options = x;\r\n      x = null;\r\n    }\r\n\r\n    // clone options object\r\n    const result = Object.assign({}, options);\r\n\r\n    // extend options with previous values for continued text\r\n    if (this._textOptions) {\r\n      for (let key in this._textOptions) {\r\n        const val = this._textOptions[key];\r\n        if (key !== 'continued') {\r\n          if (result[key] === undefined) {\r\n            result[key] = val;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update the current position\r\n    if (x != null) {\r\n      this.x = x;\r\n    }\r\n    if (y != null) {\r\n      this.y = y;\r\n    }\r\n\r\n    // wrap to margins if no x or y position passed\r\n    if (result.lineBreak !== false) {\r\n      if (result.width == null) {\r\n        result.width = this.page.width - this.x - this.page.margins.right;\r\n      }\r\n      result.width = Math.max(result.width, 0);\r\n    }\r\n\r\n    if (!result.columns) {\r\n      result.columns = 0;\r\n    }\r\n    if (result.columnGap == null) {\r\n      result.columnGap = 18;\r\n    } // 1/4 inch\r\n\r\n    return result;\r\n  },\r\n\r\n  _line(text, options = {}, wrapper) {\r\n    this._fragment(text, this.x, this.y, options);\r\n    const lineGap = options.lineGap || this._lineGap || 0;\r\n\r\n    if (!wrapper) {\r\n      return (this.x += this.widthOfString(text));\r\n    } else {\r\n      return (this.y += this.currentLineHeight(true) + lineGap);\r\n    }\r\n  },\r\n\r\n  _fragment(text, x, y, options) {\r\n    let dy, encoded, i, positions, textWidth, words;\r\n    text = `${text}`.replace(/\\n/g, '');\r\n    if (text.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // handle options\r\n    const align = options.align || 'left';\r\n    let wordSpacing = options.wordSpacing || 0;\r\n    const characterSpacing = options.characterSpacing || 0;\r\n\r\n    // text alignments\r\n    if (options.width) {\r\n      switch (align) {\r\n        case 'right':\r\n          textWidth = this.widthOfString(text.replace(/\\s+$/, ''), options);\r\n          x += options.lineWidth - textWidth;\r\n          break;\r\n\r\n        case 'center':\r\n          x += options.lineWidth / 2 - options.textWidth / 2;\r\n          break;\r\n\r\n        case 'justify':\r\n          // calculate the word spacing value\r\n          words = text.trim().split(/\\s+/);\r\n          textWidth = this.widthOfString(text.replace(/\\s+/g, ''), options);\r\n          var spaceWidth = this.widthOfString(' ') + characterSpacing;\r\n          wordSpacing = Math.max(\r\n            0,\r\n            (options.lineWidth - textWidth) / Math.max(1, words.length - 1) -\r\n              spaceWidth\r\n          );\r\n          break;\r\n      }\r\n    }\r\n\r\n    // text baseline alignments based on http://wiki.apache.org/xmlgraphics-fop/LineLayout/AlignmentHandling\r\n    if (typeof options.baseline === 'number') {\r\n      dy = -options.baseline;\r\n    } else {\r\n      switch (options.baseline) {\r\n        case 'svg-middle':\r\n          dy = 0.5 * this._font.xHeight;\r\n          break;\r\n        case 'middle':\r\n        case 'svg-central':\r\n          dy = 0.5 * (this._font.descender + this._font.ascender);\r\n          break;\r\n        case 'bottom':\r\n        case 'ideographic':\r\n          dy = this._font.descender;\r\n          break;\r\n        case 'alphabetic':\r\n          dy = 0;\r\n          break;\r\n        case 'mathematical':\r\n          dy = 0.5 * this._font.ascender;\r\n          break;\r\n        case 'hanging':\r\n          dy = 0.8 * this._font.ascender;\r\n          break;\r\n        case 'top':\r\n          dy = this._font.ascender;\r\n          break;\r\n        default:\r\n          dy = this._font.ascender;\r\n      }\r\n      dy = (dy / 1000) * this._fontSize;\r\n    }\r\n\r\n    // calculate the actual rendered width of the string after word and character spacing\r\n    const renderedWidth =\r\n      options.textWidth +\r\n      wordSpacing * (options.wordCount - 1) +\r\n      characterSpacing * (text.length - 1);\r\n\r\n    // create link annotations if the link option is given\r\n    if (options.link != null) {\r\n      this.link(x, y, renderedWidth, this.currentLineHeight(), options.link);\r\n    }\r\n    if (options.goTo != null) {\r\n      this.goTo(x, y, renderedWidth, this.currentLineHeight(), options.goTo);\r\n    }\r\n    if (options.destination != null) {\r\n      this.addNamedDestination(options.destination, 'XYZ', x, y, null);\r\n    }\r\n\r\n    // create underline or strikethrough line\r\n    if (options.underline || options.strike) {\r\n      this.save();\r\n      if (!options.stroke) {\r\n        this.strokeColor(...(this._fillColor || []));\r\n      }\r\n\r\n      const lineWidth =\r\n        this._fontSize < 10 ? 0.5 : Math.floor(this._fontSize / 10);\r\n      this.lineWidth(lineWidth);\r\n\r\n      const d = options.underline ? 1 : 2;\r\n      let lineY = y + this.currentLineHeight() / d;\r\n      if (options.underline) {\r\n        lineY -= lineWidth;\r\n      }\r\n\r\n      this.moveTo(x, lineY);\r\n      this.lineTo(x + renderedWidth, lineY);\r\n      this.stroke();\r\n      this.restore();\r\n    }\r\n\r\n    this.save();\r\n\r\n    // oblique (angle in degrees or boolean)\r\n    if (options.oblique) {\r\n      let skew;\r\n      if (typeof options.oblique === 'number') {\r\n        skew = -Math.tan((options.oblique * Math.PI) / 180);\r\n      } else {\r\n        skew = -0.25;\r\n      }\r\n      this.transform(1, 0, 0, 1, x, y);\r\n      this.transform(1, 0, skew, 1, -skew * dy, 0);\r\n      this.transform(1, 0, 0, 1, -x, -y);\r\n    }\r\n\r\n    // flip coordinate system\r\n    this.transform(1, 0, 0, -1, 0, this.page.height);\r\n    y = this.page.height - y - dy;\r\n\r\n    // add current font to page if necessary\r\n    if (this.page.fonts[this._font.id] == null) {\r\n      this.page.fonts[this._font.id] = this._font.ref();\r\n    }\r\n\r\n    // begin the text object\r\n    this.addContent('BT');\r\n\r\n    // text position\r\n    this.addContent(`1 0 0 1 ${number(x)} ${number(y)} Tm`);\r\n\r\n    // font and font size\r\n    this.addContent(`/${this._font.id} ${number(this._fontSize)} Tf`);\r\n\r\n    // rendering mode\r\n    const mode = options.fill && options.stroke ? 2 : options.stroke ? 1 : 0;\r\n    if (mode) {\r\n      this.addContent(`${mode} Tr`);\r\n    }\r\n\r\n    // Character spacing\r\n    if (characterSpacing) {\r\n      this.addContent(`${number(characterSpacing)} Tc`);\r\n    }\r\n\r\n    // Add the actual text\r\n    // If we have a word spacing value, we need to encode each word separately\r\n    // since the normal Tw operator only works on character code 32, which isn't\r\n    // used for embedded fonts.\r\n    if (wordSpacing) {\r\n      words = text.trim().split(/\\s+/);\r\n      wordSpacing += this.widthOfString(' ') + characterSpacing;\r\n      wordSpacing *= 1000 / this._fontSize;\r\n\r\n      encoded = [];\r\n      positions = [];\r\n      for (let word of words) {\r\n        const [encodedWord, positionsWord] = this._font.encode(\r\n          word,\r\n          options.features\r\n        );\r\n        encoded = encoded.concat(encodedWord);\r\n        positions = positions.concat(positionsWord);\r\n\r\n        // add the word spacing to the end of the word\r\n        // clone object because of cache\r\n        const space = {};\r\n        const object = positions[positions.length - 1];\r\n        for (let key in object) {\r\n          const val = object[key];\r\n          space[key] = val;\r\n        }\r\n        space.xAdvance += wordSpacing;\r\n        positions[positions.length - 1] = space;\r\n      }\r\n    } else {\r\n      [encoded, positions] = this._font.encode(text, options.features);\r\n    }\r\n\r\n    const scale = this._fontSize / 1000;\r\n    const commands = [];\r\n    let last = 0;\r\n    let hadOffset = false;\r\n\r\n    // Adds a segment of text to the TJ command buffer\r\n    const addSegment = cur => {\r\n      if (last < cur) {\r\n        const hex = encoded.slice(last, cur).join('');\r\n        const advance =\r\n          positions[cur - 1].xAdvance - positions[cur - 1].advanceWidth;\r\n        commands.push(`<${hex}> ${number(-advance)}`);\r\n      }\r\n\r\n      return (last = cur);\r\n    };\r\n\r\n    // Flushes the current TJ commands to the output stream\r\n    const flush = i => {\r\n      addSegment(i);\r\n\r\n      if (commands.length > 0) {\r\n        this.addContent(`[${commands.join(' ')}] TJ`);\r\n        return (commands.length = 0);\r\n      }\r\n    };\r\n\r\n    for (i = 0; i < positions.length; i++) {\r\n      // If we have an x or y offset, we have to break out of the current TJ command\r\n      // so we can move the text position.\r\n      const pos = positions[i];\r\n      if (pos.xOffset || pos.yOffset) {\r\n        // Flush the current buffer\r\n        flush(i);\r\n\r\n        // Move the text position and flush just the current character\r\n        this.addContent(\r\n          `1 0 0 1 ${number(x + pos.xOffset * scale)} ${number(\r\n            y + pos.yOffset * scale\r\n          )} Tm`\r\n        );\r\n        flush(i + 1);\r\n\r\n        hadOffset = true;\r\n      } else {\r\n        // If the last character had an offset, reset the text position\r\n        if (hadOffset) {\r\n          this.addContent(`1 0 0 1 ${number(x)} ${number(y)} Tm`);\r\n          hadOffset = false;\r\n        }\r\n\r\n        // Group segments that don't have any advance adjustments\r\n        if (pos.xAdvance - pos.advanceWidth !== 0) {\r\n          addSegment(i + 1);\r\n        }\r\n      }\r\n\r\n      x += pos.xAdvance * scale;\r\n    }\r\n\r\n    // Flush any remaining commands\r\n    flush(i);\r\n\r\n    // end the text object\r\n    this.addContent('ET');\r\n\r\n    // restore flipped coordinate system\r\n    return this.restore();\r\n  }\r\n};\r\n","const MARKERS = [\r\n  0xffc0,\r\n  0xffc1,\r\n  0xffc2,\r\n  0xffc3,\r\n  0xffc5,\r\n  0xffc6,\r\n  0xffc7,\r\n  0xffc8,\r\n  0xffc9,\r\n  0xffca,\r\n  0xffcb,\r\n  0xffcc,\r\n  0xffcd,\r\n  0xffce,\r\n  0xffcf\r\n];\r\n\r\nconst COLOR_SPACE_MAP = {\r\n  1: 'DeviceGray',\r\n  3: 'DeviceRGB',\r\n  4: 'DeviceCMYK'\r\n};\r\n\r\nclass JPEG {\r\n  constructor(data, label) {\r\n    let marker;\r\n    this.data = data;\r\n    this.label = label;\r\n    if (this.data.readUInt16BE(0) !== 0xffd8) {\r\n      throw 'SOI not found in JPEG';\r\n    }\r\n\r\n    let pos = 2;\r\n    while (pos < this.data.length) {\r\n      marker = this.data.readUInt16BE(pos);\r\n      pos += 2;\r\n      if (MARKERS.includes(marker)) {\r\n        break;\r\n      }\r\n      pos += this.data.readUInt16BE(pos);\r\n    }\r\n\r\n    if (!MARKERS.includes(marker)) {\r\n      throw 'Invalid JPEG.';\r\n    }\r\n    pos += 2;\r\n\r\n    this.bits = this.data[pos++];\r\n    this.height = this.data.readUInt16BE(pos);\r\n    pos += 2;\r\n\r\n    this.width = this.data.readUInt16BE(pos);\r\n    pos += 2;\r\n\r\n    const channels = this.data[pos++];\r\n    this.colorSpace = COLOR_SPACE_MAP[channels];\r\n\r\n    this.obj = null;\r\n  }\r\n\r\n  embed(document) {\r\n    if (this.obj) {\r\n      return;\r\n    }\r\n\r\n    this.obj = document.ref({\r\n      Type: 'XObject',\r\n      Subtype: 'Image',\r\n      BitsPerComponent: this.bits,\r\n      Width: this.width,\r\n      Height: this.height,\r\n      ColorSpace: this.colorSpace,\r\n      Filter: 'DCTDecode'\r\n    });\r\n\r\n    // add extra decode params for CMYK images. By swapping the\r\n    // min and max values from the default, we invert the colors. See\r\n    // section 4.8.4 of the spec.\r\n    if (this.colorSpace === 'DeviceCMYK') {\r\n      this.obj.data['Decode'] = [1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0];\r\n    }\r\n\r\n    this.obj.end(this.data);\r\n\r\n    // free memory\r\n    return (this.data = null);\r\n  }\r\n}\r\n\r\nexport default JPEG;\r\n","import zlib from 'zlib';\r\nimport PNG from 'png-js';\r\n\r\nclass PNGImage {\r\n  constructor(data, label) {\r\n    this.label = label;\r\n    this.image = new PNG(data);\r\n    this.width = this.image.width;\r\n    this.height = this.image.height;\r\n    this.imgData = this.image.imgData;\r\n    this.obj = null;\r\n  }\r\n\r\n  embed(document) {\r\n    let dataDecoded = false;\r\n\r\n    this.document = document;\r\n    if (this.obj) {\r\n      return;\r\n    }\r\n\r\n    const hasAlphaChannel = this.image.hasAlphaChannel;\r\n    const isInterlaced = this.image.interlaceMethod === 1;\r\n\r\n    this.obj = this.document.ref({\r\n      Type: 'XObject',\r\n      Subtype: 'Image',\r\n      BitsPerComponent: hasAlphaChannel ? 8 : this.image.bits,\r\n      Width: this.width,\r\n      Height: this.height,\r\n      Filter: 'FlateDecode'\r\n    });\r\n\r\n    if (!hasAlphaChannel) {\r\n      const params = this.document.ref({\r\n        Predictor: isInterlaced ? 1 : 15,\r\n        Colors: this.image.colors,\r\n        BitsPerComponent: this.image.bits,\r\n        Columns: this.width\r\n      });\r\n\r\n      this.obj.data['DecodeParms'] = params;\r\n      params.end();\r\n    }\r\n\r\n    if (this.image.palette.length === 0) {\r\n      this.obj.data['ColorSpace'] = this.image.colorSpace;\r\n    } else {\r\n      // embed the color palette in the PDF as an object stream\r\n      const palette = this.document.ref();\r\n      palette.end(Buffer.from(this.image.palette));\r\n\r\n      // build the color space array for the image\r\n      this.obj.data['ColorSpace'] = [\r\n        'Indexed',\r\n        'DeviceRGB',\r\n        this.image.palette.length / 3 - 1,\r\n        palette\r\n      ];\r\n    }\r\n\r\n    // For PNG color types 0, 2 and 3, the transparency data is stored in\r\n    // a dedicated PNG chunk.\r\n    if (this.image.transparency.grayscale != null) {\r\n      // Use Color Key Masking (spec section 4.8.5)\r\n      // An array with N elements, where N is two times the number of color components.\r\n      const val = this.image.transparency.grayscale;\r\n      this.obj.data['Mask'] = [val, val];\r\n    } else if (this.image.transparency.rgb) {\r\n      // Use Color Key Masking (spec section 4.8.5)\r\n      // An array with N elements, where N is two times the number of color components.\r\n      const { rgb } = this.image.transparency;\r\n      const mask = [];\r\n      for (let x of rgb) {\r\n        mask.push(x, x);\r\n      }\r\n\r\n      this.obj.data['Mask'] = mask;\r\n    } else if (this.image.transparency.indexed) {\r\n      // Create a transparency SMask for the image based on the data\r\n      // in the PLTE and tRNS sections. See below for details on SMasks.\r\n      dataDecoded = true;\r\n      return this.loadIndexedAlphaChannel();\r\n    } else if (hasAlphaChannel) {\r\n      // For PNG color types 4 and 6, the transparency data is stored as a alpha\r\n      // channel mixed in with the main image data. Separate this data out into an\r\n      // SMask object and store it separately in the PDF.\r\n      dataDecoded = true;\r\n      return this.splitAlphaChannel();\r\n    }\r\n\r\n    if (isInterlaced && !dataDecoded) {\r\n      return this.decodeData();\r\n    }\r\n\r\n    this.finalize();\r\n  }\r\n\r\n  finalize() {\r\n    if (this.alphaChannel) {\r\n      const sMask = this.document.ref({\r\n        Type: 'XObject',\r\n        Subtype: 'Image',\r\n        Height: this.height,\r\n        Width: this.width,\r\n        BitsPerComponent: 8,\r\n        Filter: 'FlateDecode',\r\n        ColorSpace: 'DeviceGray',\r\n        Decode: [0, 1]\r\n      });\r\n\r\n      sMask.end(this.alphaChannel);\r\n      this.obj.data['SMask'] = sMask;\r\n    }\r\n\r\n    // add the actual image data\r\n    this.obj.end(this.imgData);\r\n\r\n    // free memory\r\n    this.image = null;\r\n    return (this.imgData = null);\r\n  }\r\n\r\n  splitAlphaChannel() {\r\n    return this.image.decodePixels(pixels => {\r\n      let a, p;\r\n      const colorCount = this.image.colors;\r\n      const pixelCount = this.width * this.height;\r\n      const imgData = Buffer.alloc(pixelCount * colorCount);\r\n      const alphaChannel = Buffer.alloc(pixelCount);\r\n\r\n      let i = (p = a = 0);\r\n      const len = pixels.length;\r\n      // For 16bit images copy only most significant byte (MSB) - PNG data is always stored in network byte order (MSB first)\r\n      const skipByteCount = this.image.bits === 16 ? 1 : 0;\r\n      while (i < len) {\r\n        for (let colorIndex = 0; colorIndex < colorCount; colorIndex++) {\r\n          imgData[p++] = pixels[i++];\r\n          i += skipByteCount;\r\n        }\r\n        alphaChannel[a++] = pixels[i++];\r\n        i += skipByteCount;\r\n      }\r\n\r\n      this.imgData = zlib.deflateSync(imgData);\r\n      this.alphaChannel = zlib.deflateSync(alphaChannel);\r\n      return this.finalize();\r\n    });\r\n  }\r\n\r\n  loadIndexedAlphaChannel() {\r\n    const transparency = this.image.transparency.indexed;\r\n    return this.image.decodePixels(pixels => {\r\n      const alphaChannel = Buffer.alloc(this.width * this.height);\r\n\r\n      let i = 0;\r\n      for (let j = 0, end = pixels.length; j < end; j++) {\r\n        alphaChannel[i++] = transparency[pixels[j]];\r\n      }\r\n\r\n      this.alphaChannel = zlib.deflateSync(alphaChannel);\r\n      return this.finalize();\r\n    });\r\n  }\r\n\r\n  decodeData() {\r\n    this.image.decodePixels(pixels => {\r\n      this.imgData = zlib.deflateSync(pixels);\r\n      this.finalize();\r\n    });\r\n  }\r\n}\r\n\r\nexport default PNGImage;\r\n","/*\r\nPDFImage - embeds images in PDF documents\r\nBy Devon Govett\r\n*/\r\n\r\nimport fs from 'fs';\r\nimport JPEG from './image/jpeg';\r\nimport PNG from './image/png';\r\n\r\nclass PDFImage {\r\n  static open(src, label) {\r\n    let data;\r\n    if (Buffer.isBuffer(src)) {\r\n      data = src;\r\n    } else if (src instanceof ArrayBuffer) {\r\n      data = Buffer.from(new Uint8Array(src));\r\n    } else {\r\n      let match;\r\n      if ((match = /^data:.+;base64,(.*)$/.exec(src))) {\r\n        data = Buffer.from(match[1], 'base64');\r\n      } else {\r\n        data = fs.readFileSync(src);\r\n        if (!data) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (data[0] === 0xff && data[1] === 0xd8) {\r\n      return new JPEG(data, label);\r\n    } else if (data[0] === 0x89 && data.toString('ascii', 1, 4) === 'PNG') {\r\n      return new PNG(data, label);\r\n    } else {\r\n      throw new Error('Unknown image format.');\r\n    }\r\n  }\r\n}\r\n\r\nexport default PDFImage;\r\n","import PDFImage from '../image';\r\n\r\nexport default {\r\n  initImages() {\r\n    this._imageRegistry = {};\r\n    return (this._imageCount = 0);\r\n  },\r\n\r\n  image(src, x, y, options = {}) {\r\n    let bh, bp, bw, image, ip, left, left1;\r\n    if (typeof x === 'object') {\r\n      options = x;\r\n      x = null;\r\n    }\r\n\r\n    x = (left = x != null ? x : options.x) != null ? left : this.x;\r\n    y = (left1 = y != null ? y : options.y) != null ? left1 : this.y;\r\n\r\n    if (typeof src === 'string') {\r\n      image = this._imageRegistry[src];\r\n    }\r\n\r\n    if (!image) {\r\n      if (src.width && src.height) {\r\n        image = src;\r\n      } else {\r\n        image = this.openImage(src);\r\n      }\r\n    }\r\n\r\n    if (!image.obj) {\r\n      image.embed(this);\r\n    }\r\n\r\n    if (this.page.xobjects[image.label] == null) {\r\n      this.page.xobjects[image.label] = image.obj;\r\n    }\r\n\r\n    let w = options.width || image.width;\r\n    let h = options.height || image.height;\r\n\r\n    if (options.width && !options.height) {\r\n      const wp = w / image.width;\r\n      w = image.width * wp;\r\n      h = image.height * wp;\r\n    } else if (options.height && !options.width) {\r\n      const hp = h / image.height;\r\n      w = image.width * hp;\r\n      h = image.height * hp;\r\n    } else if (options.scale) {\r\n      w = image.width * options.scale;\r\n      h = image.height * options.scale;\r\n    } else if (options.fit) {\r\n      [bw, bh] = options.fit;\r\n      bp = bw / bh;\r\n      ip = image.width / image.height;\r\n      if (ip > bp) {\r\n        w = bw;\r\n        h = bw / ip;\r\n      } else {\r\n        h = bh;\r\n        w = bh * ip;\r\n      }\r\n    } else if (options.cover) {\r\n      [bw, bh] = options.cover;\r\n      bp = bw / bh;\r\n      ip = image.width / image.height;\r\n      if (ip > bp) {\r\n        h = bh;\r\n        w = bh * ip;\r\n      } else {\r\n        w = bw;\r\n        h = bw / ip;\r\n      }\r\n    }\r\n\r\n    if (options.fit || options.cover) {\r\n      if (options.align === 'center') {\r\n        x = x + bw / 2 - w / 2;\r\n      } else if (options.align === 'right') {\r\n        x = x + bw - w;\r\n      }\r\n\r\n      if (options.valign === 'center') {\r\n        y = y + bh / 2 - h / 2;\r\n      } else if (options.valign === 'bottom') {\r\n        y = y + bh - h;\r\n      }\r\n    }\r\n\r\n    // create link annotations if the link option is given\r\n    if (options.link != null) {\r\n      this.link(x, y, w, h, options.link);\r\n    }\r\n    if (options.goTo != null) {\r\n      this.goTo(x, y, w, h, options.goTo);\r\n    }\r\n    if (options.destination != null) {\r\n      this.addNamedDestination(options.destination, 'XYZ', x, y, null);\r\n    }\r\n\r\n    // Set the current y position to below the image if it is in the document flow\r\n    if (this.y === y) {\r\n      this.y += h;\r\n    }\r\n\r\n    this.save();\r\n    this.transform(w, 0, 0, -h, x, y + h);\r\n    this.addContent(`/${image.label} Do`);\r\n    this.restore();\r\n\r\n    return this;\r\n  },\r\n\r\n  openImage(src) {\r\n    let image;\r\n    if (typeof src === 'string') {\r\n      image = this._imageRegistry[src];\r\n    }\r\n\r\n    if (!image) {\r\n      image = PDFImage.open(src, `I${++this._imageCount}`);\r\n      if (typeof src === 'string') {\r\n        this._imageRegistry[src] = image;\r\n      }\r\n    }\r\n\r\n    return image;\r\n  }\r\n};\r\n","export default {\r\n  annotate(x, y, w, h, options) {\r\n    options.Type = 'Annot';\r\n    options.Rect = this._convertRect(x, y, w, h);\r\n    options.Border = [0, 0, 0];\r\n\r\n    if (options.Subtype === 'Link' && typeof options.F === 'undefined') {\r\n      options.F = 1 << 2; // Print Annotation Flag\r\n    }\r\n\r\n    if (options.Subtype !== 'Link') {\r\n      if (options.C == null) {\r\n        options.C = this._normalizeColor(options.color || [0, 0, 0]);\r\n      }\r\n    } // convert colors\r\n    delete options.color;\r\n\r\n    if (typeof options.Dest === 'string') {\r\n      options.Dest = new String(options.Dest);\r\n    }\r\n\r\n    // Capitalize keys\r\n    for (let key in options) {\r\n      const val = options[key];\r\n      options[key[0].toUpperCase() + key.slice(1)] = val;\r\n    }\r\n\r\n    const ref = this.ref(options);\r\n    this.page.annotations.push(ref);\r\n    ref.end();\r\n    return this;\r\n  },\r\n\r\n  note(x, y, w, h, contents, options = {}) {\r\n    options.Subtype = 'Text';\r\n    options.Contents = new String(contents);\r\n    options.Name = 'Comment';\r\n    if (options.color == null) {\r\n      options.color = [243, 223, 92];\r\n    }\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  goTo(x, y, w, h, name, options = {}) {\r\n    options.Subtype = 'Link';\r\n    options.A = this.ref({\r\n      S: 'GoTo',\r\n      D: new String(name)\r\n    });\r\n    options.A.end();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  link(x, y, w, h, url, options = {}) {\r\n    options.Subtype = 'Link';\r\n\r\n    if (typeof url === 'number') {\r\n      // Link to a page in the document (the page must already exist)\r\n      const pages = this._root.data.Pages.data;\r\n      if (url >= 0 && url < pages.Kids.length) {\r\n        options.A = this.ref({\r\n          S: 'GoTo',\r\n          D: [pages.Kids[url], 'XYZ', null, null, null]\r\n        });\r\n        options.A.end();\r\n      } else {\r\n        throw new Error(`The document has no page ${url}`);\r\n      }\r\n    } else {\r\n      // Link to an external url\r\n      options.A = this.ref({\r\n        S: 'URI',\r\n        URI: new String(url)\r\n      });\r\n      options.A.end();\r\n    }\r\n\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  _markup(x, y, w, h, options = {}) {\r\n    const [x1, y1, x2, y2] = this._convertRect(x, y, w, h);\r\n    options.QuadPoints = [x1, y2, x2, y2, x1, y1, x2, y1];\r\n    options.Contents = new String();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  highlight(x, y, w, h, options = {}) {\r\n    options.Subtype = 'Highlight';\r\n    if (options.color == null) {\r\n      options.color = [241, 238, 148];\r\n    }\r\n    return this._markup(x, y, w, h, options);\r\n  },\r\n\r\n  underline(x, y, w, h, options = {}) {\r\n    options.Subtype = 'Underline';\r\n    return this._markup(x, y, w, h, options);\r\n  },\r\n\r\n  strike(x, y, w, h, options = {}) {\r\n    options.Subtype = 'StrikeOut';\r\n    return this._markup(x, y, w, h, options);\r\n  },\r\n\r\n  lineAnnotation(x1, y1, x2, y2, options = {}) {\r\n    options.Subtype = 'Line';\r\n    options.Contents = new String();\r\n    options.L = [x1, this.page.height - y1, x2, this.page.height - y2];\r\n    return this.annotate(x1, y1, x2, y2, options);\r\n  },\r\n\r\n  rectAnnotation(x, y, w, h, options = {}) {\r\n    options.Subtype = 'Square';\r\n    options.Contents = new String();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  ellipseAnnotation(x, y, w, h, options = {}) {\r\n    options.Subtype = 'Circle';\r\n    options.Contents = new String();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  textAnnotation(x, y, w, h, text, options = {}) {\r\n    options.Subtype = 'FreeText';\r\n    options.Contents = new String(text);\r\n    options.DA = new String();\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  fileAnnotation(x, y, w, h, file = {}, options = {}) {\r\n    // create hidden file\r\n    const filespec = this.file(\r\n      file.src,\r\n      Object.assign({ hidden: true }, file)\r\n    );\r\n\r\n    options.Subtype = 'FileAttachment';\r\n    options.FS = filespec;\r\n\r\n    // add description from filespec unless description (Contents) has already been set\r\n    if (options.Contents) {\r\n      options.Contents = new String(options.Contents);\r\n    } else if (filespec.data.Desc) {\r\n      options.Contents = filespec.data.Desc;\r\n    }\r\n\r\n    return this.annotate(x, y, w, h, options);\r\n  },\r\n\r\n  _convertRect(x1, y1, w, h) {\r\n    // flip y1 and y2\r\n    let y2 = y1;\r\n    y1 += h;\r\n\r\n    // make x2\r\n    let x2 = x1 + w;\r\n\r\n    // apply current transformation matrix to points\r\n    const [m0, m1, m2, m3, m4, m5] = this._ctm;\r\n    x1 = m0 * x1 + m2 * y1 + m4;\r\n    y1 = m1 * x1 + m3 * y1 + m5;\r\n    x2 = m0 * x2 + m2 * y2 + m4;\r\n    y2 = m1 * x2 + m3 * y2 + m5;\r\n\r\n    return [x1, y1, x2, y2];\r\n  }\r\n};\r\n","class PDFOutline {\r\n  constructor(document, parent, title, dest, options = { expanded: false }) {\r\n    this.document = document;\r\n    this.options = options;\r\n    this.outlineData = {};\r\n\r\n    if (dest !== null) {\r\n      this.outlineData['Dest'] = [dest.dictionary, 'Fit'];\r\n    }\r\n\r\n    if (parent !== null) {\r\n      this.outlineData['Parent'] = parent;\r\n    }\r\n\r\n    if (title !== null) {\r\n      this.outlineData['Title'] = new String(title);\r\n    }\r\n\r\n    this.dictionary = this.document.ref(this.outlineData);\r\n    this.children = [];\r\n  }\r\n\r\n  addItem(title, options = { expanded: false }) {\r\n    const result = new PDFOutline(\r\n      this.document,\r\n      this.dictionary,\r\n      title,\r\n      this.document.page,\r\n      options\r\n    );\r\n    this.children.push(result);\r\n\r\n    return result;\r\n  }\r\n\r\n  endOutline() {\r\n    if (this.children.length > 0) {\r\n      if (this.options.expanded) {\r\n        this.outlineData.Count = this.children.length;\r\n      }\r\n\r\n      const first = this.children[0],\r\n        last = this.children[this.children.length - 1];\r\n      this.outlineData.First = first.dictionary;\r\n      this.outlineData.Last = last.dictionary;\r\n\r\n      for (let i = 0, len = this.children.length; i < len; i++) {\r\n        const child = this.children[i];\r\n        if (i > 0) {\r\n          child.outlineData.Prev = this.children[i - 1].dictionary;\r\n        }\r\n        if (i < this.children.length - 1) {\r\n          child.outlineData.Next = this.children[i + 1].dictionary;\r\n        }\r\n        child.endOutline();\r\n      }\r\n    }\r\n\r\n    return this.dictionary.end();\r\n  }\r\n}\r\n\r\nexport default PDFOutline;\r\n","import PDFOutline from '../outline';\r\n\r\nexport default {\r\n  initOutline() {\r\n    return (this.outline = new PDFOutline(this, null, null, null));\r\n  },\r\n\r\n  endOutline() {\r\n    this.outline.endOutline();\r\n    if (this.outline.children.length > 0) {\r\n      this._root.data.Outlines = this.outline.dictionary;\r\n      return (this._root.data.PageMode = 'UseOutlines');\r\n    }\r\n  }\r\n};\r\n","/*\r\nPDFStructureContent - a reference to a marked structure content\r\nBy Ben Schmidt\r\n*/\r\n\r\nclass PDFStructureContent {\r\n  constructor(pageRef, mcid) {\r\n    this.refs = [{ pageRef, mcid }];\r\n  }\r\n\r\n  push(structContent) {\r\n    structContent.refs.forEach((ref) => this.refs.push(ref));\r\n  }\r\n}\r\n\r\nexport default PDFStructureContent;\r\n","/*\r\nPDFStructureElement - represents an element in the PDF logical structure tree\r\nBy Ben Schmidt\r\n*/\r\n\r\nimport PDFStructureContent from \"./structure_content\";\r\n\r\nclass PDFStructureElement {\r\n  constructor(document, type, options = {}, children = null) {\r\n    this.document = document;\r\n\r\n    this._attached = false;\r\n    this._ended = false;\r\n    this._flushed = false;\r\n    this.dictionary = document.ref({\r\n      // Type: \"StructElem\",\r\n      S: type\r\n    });\r\n\r\n    const data = this.dictionary.data;\r\n\r\n    if (Array.isArray(options) || this._isValidChild(options)) {\r\n      children = options;\r\n      options = {};\r\n    }\r\n\r\n    if (typeof options.title !== 'undefined') {\r\n      data.T = new String(options.title);\r\n    }\r\n    if (typeof options.lang !== 'undefined') {\r\n      data.Lang = new String(options.lang);\r\n    }\r\n    if (typeof options.alt !== 'undefined') {\r\n      data.Alt = new String(options.alt);\r\n    }\r\n    if (typeof options.expanded !== 'undefined') {\r\n      data.E = new String(options.expanded);\r\n    }\r\n    if (typeof options.actual !== 'undefined') {\r\n      data.ActualText = new String(options.actual);\r\n    }\r\n\r\n    this._children = [];\r\n\r\n    if (children) {\r\n      if (!Array.isArray(children)) {\r\n        children = [children];\r\n      }\r\n      children.forEach((child) => this.add(child));\r\n      this.end();\r\n    }\r\n  }\r\n\r\n  add(child) {\r\n    if (this._ended) {\r\n      throw new Error(`Cannot add child to already-ended structure element`);\r\n    }\r\n\r\n    if (!this._isValidChild(child)) {\r\n      throw new Error(`Invalid structure element child`);\r\n    }\r\n\r\n    if (child instanceof PDFStructureElement) {\r\n      child.setParent(this.dictionary);\r\n      if (this._attached) {\r\n        child.setAttached();\r\n      }\r\n    }\r\n\r\n    if (child instanceof PDFStructureContent) {\r\n      this._addContentToParentTree(child);\r\n    }\r\n\r\n    if (typeof child === 'function' && this._attached) {\r\n      // _contentForClosure() adds the content to the parent tree\r\n      child = this._contentForClosure(child);\r\n    }\r\n\r\n    this._children.push(child);\r\n\r\n    return this;\r\n  }\r\n\r\n  _addContentToParentTree(content) {\r\n    content.refs.forEach(({ pageRef, mcid }) => {\r\n      const pageStructParents = this.document.getStructParentTree()\r\n        .get(pageRef.data.StructParents);\r\n      pageStructParents[mcid] = this.dictionary;\r\n    });\r\n  }\r\n\r\n  setParent(parentRef) {\r\n    if (this.dictionary.data.P) {\r\n      throw new Error(`Structure element added to more than one parent`);\r\n    }\r\n\r\n    this.dictionary.data.P = parentRef;\r\n\r\n    this._flush();\r\n  }\r\n\r\n  setAttached() {\r\n    if (this._attached) {\r\n      return;\r\n    }\r\n\r\n    this._children.forEach((child, index) => {\r\n      if (child instanceof PDFStructureElement) {\r\n        child.setAttached();\r\n      }\r\n      if (typeof child === 'function') {\r\n        this._children[index] = this._contentForClosure(child);\r\n      }\r\n    });\r\n\r\n    this._attached = true;\r\n\r\n    this._flush();\r\n  }\r\n\r\n  end() {\r\n    if (this._ended) {\r\n      return;\r\n    }\r\n\r\n    this._children\r\n      .filter((child) => child instanceof PDFStructureElement)\r\n      .forEach((child) => child.end());\r\n\r\n    this._ended = true;\r\n\r\n    this._flush();\r\n  }\r\n\r\n  _isValidChild(child) {\r\n    return child instanceof PDFStructureElement ||\r\n        child instanceof PDFStructureContent ||\r\n        typeof child === 'function';\r\n  }\r\n\r\n  _contentForClosure(closure) {\r\n    const content = this.document.markStructureContent(this.dictionary.data.S);\r\n    closure();\r\n    this.document.endMarkedContent();\r\n\r\n    this._addContentToParentTree(content);\r\n\r\n    return content;\r\n  }\r\n\r\n  _isFlushable() {\r\n    if (!this.dictionary.data.P || !this._ended) {\r\n      return false;\r\n    }\r\n\r\n    return this._children.every((child) => {\r\n      if (typeof child === 'function') {\r\n        return false;\r\n      }\r\n      if (child instanceof PDFStructureElement) {\r\n        return child._isFlushable();\r\n      }\r\n      return true;\r\n    });\r\n  }\r\n\r\n  _flush() {\r\n    if (this._flushed || !this._isFlushable()) {\r\n      return;\r\n    }\r\n\r\n    this.dictionary.data.K = [];\r\n\r\n    this._children.forEach((child) => this._flushChild(child));\r\n\r\n    this.dictionary.end();\r\n\r\n    // free memory used by children; the dictionary itself may still be\r\n    // referenced by a parent structure element or root, but we can\r\n    // at least trim the tree here\r\n    this._children = [];\r\n    this.dictionary.data.K = null;\r\n\r\n    this._flushed = true;\r\n  }\r\n\r\n  _flushChild(child) {\r\n    if (child instanceof PDFStructureElement) {\r\n      this.dictionary.data.K.push(child.dictionary);\r\n    }\r\n\r\n    if (child instanceof PDFStructureContent) {\r\n      child.refs.forEach(({ pageRef, mcid }) => {\r\n        if (!this.dictionary.data.Pg) {\r\n          this.dictionary.data.Pg = pageRef;\r\n        }\r\n\r\n        if (this.dictionary.data.Pg === pageRef) {\r\n          this.dictionary.data.K.push(mcid);\r\n        } else {\r\n          this.dictionary.data.K.push({\r\n            Type: \"MCR\",\r\n            Pg: pageRef,\r\n            MCID: mcid\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport default PDFStructureElement;\r\n","/*\r\nPDFNumberTree - represents a number tree object\r\n*/\r\n\r\nimport PDFTree from \"./tree\";\r\n\r\nclass PDFNumberTree extends PDFTree {\r\n  _compareKeys(a, b) {\r\n    return parseInt(a) - parseInt(b);\r\n  }\r\n\r\n  _keysName() {\r\n    return \"Nums\";\r\n  }\r\n\r\n  _dataForKey(k) {\r\n    return parseInt(k);\r\n  }\r\n}\r\n\r\nexport default PDFNumberTree;\r\n","/*\r\nMarkings mixin - support marked content sequences in content streams\r\nBy Ben Schmidt\r\n*/\r\n\r\nimport PDFStructureElement from \"../structure_element\";\r\nimport PDFStructureContent from \"../structure_content\";\r\nimport PDFNumberTree from \"../number_tree\";\r\nimport PDFObject from \"../object\";\r\n\r\nexport default {\r\n\r\n  initMarkings(options) {\r\n    this.structChildren = [];\r\n\r\n    if (options.tagged) {\r\n      this.getMarkingsDictionary().data.Marked = true;\r\n    }\r\n  },\r\n\r\n  markContent(tag, options = null) {\r\n    if (tag === 'Artifact' || (options && options.mcid)) {\r\n      let toClose = 0;\r\n      this.page.markings.forEach((marking) => {\r\n        if (toClose || marking.structContent || marking.tag === 'Artifact') {\r\n          toClose++;\r\n        }\r\n      });\r\n      while (toClose--) {\r\n        this.endMarkedContent();\r\n      }\r\n    }\r\n\r\n    if (!options) {\r\n      this.page.markings.push({ tag });\r\n      this.addContent(`/${tag} BMC`);\r\n      return this;\r\n    }\r\n\r\n    this.page.markings.push({ tag, options });\r\n\r\n    const dictionary = {};\r\n\r\n    if (typeof options.mcid !== 'undefined') {\r\n      dictionary.MCID = options.mcid;\r\n    }\r\n    if (tag === 'Artifact') {\r\n      if (typeof options.type === 'string') {\r\n        dictionary.Type = options.type;\r\n      }\r\n      if (Array.isArray(options.bbox)) {\r\n        dictionary.BBox = [options.bbox[0], this.page.height - options.bbox[3],\r\n          options.bbox[2], this.page.height - options.bbox[1]];\r\n      }\r\n      if (Array.isArray(options.attached) &&\r\n        options.attached.every(val => typeof val === 'string')) {\r\n        dictionary.Attached = options.attached;\r\n      }\r\n    }\r\n    if (tag === 'Span') {\r\n      if (options.lang) {\r\n        dictionary.Lang = new String(options.lang);\r\n      }\r\n      if (options.alt) {\r\n        dictionary.Alt = new String(options.alt);\r\n      }\r\n      if (options.expanded) {\r\n        dictionary.E = new String(options.expanded);\r\n      }\r\n      if (options.actual) {\r\n        dictionary.ActualText = new String(options.actual);\r\n      }\r\n    }\r\n\r\n    this.addContent(`/${tag} ${PDFObject.convert(dictionary)} BDC`);\r\n    return this;\r\n  },\r\n\r\n  markStructureContent(tag, options = {}) {\r\n    const pageStructParents = this.getStructParentTree().get(this.page.structParentTreeKey);\r\n    const mcid = pageStructParents.length;\r\n    pageStructParents.push(null);\r\n\r\n    this.markContent(tag, { ...options, mcid });\r\n\r\n    const structContent = new PDFStructureContent(this.page.dictionary, mcid);\r\n    this.page.markings.slice(-1)[0].structContent = structContent;\r\n    return structContent;\r\n  },\r\n\r\n  endMarkedContent() {\r\n    this.page.markings.pop();\r\n    this.addContent('EMC');\r\n    return this;\r\n  },\r\n\r\n  struct(type, options = {}, children = null) {\r\n    return new PDFStructureElement(this, type, options, children);\r\n  },\r\n\r\n  addStructure(structElem) {\r\n    const structTreeRoot = this.getStructTreeRoot();\r\n    structElem.setParent(structTreeRoot);\r\n    structElem.setAttached();\r\n    this.structChildren.push(structElem);\r\n    if (!structTreeRoot.data.K) {\r\n      structTreeRoot.data.K = [];\r\n    }\r\n    structTreeRoot.data.K.push(structElem.dictionary);\r\n    return this;\r\n  },\r\n\r\n  initPageMarkings(pageMarkings) {\r\n    pageMarkings.forEach((marking) => {\r\n      if (marking.structContent) {\r\n        const structContent = marking.structContent;\r\n        const newStructContent = this.markStructureContent(marking.tag, marking.options);\r\n        structContent.push(newStructContent);\r\n        this.page.markings.slice(-1)[0].structContent = structContent;\r\n      } else {\r\n        this.markContent(marking.tag, marking.options);\r\n      }\r\n    });\r\n  },\r\n\r\n  endPageMarkings(page) {\r\n    const pageMarkings = page.markings;\r\n    pageMarkings.forEach(() => page.write('EMC'));\r\n    page.markings = [];\r\n    return pageMarkings;\r\n  },\r\n\r\n  getMarkingsDictionary() {\r\n    if (!this._root.data.Markings) {\r\n      this._root.data.Markings = this.ref({});\r\n    }\r\n    return this._root.data.Markings;\r\n  },\r\n\r\n  getStructTreeRoot() {\r\n    if (!this._root.data.StructTreeRoot) {\r\n      this._root.data.StructTreeRoot = this.ref({\r\n        Type: \"StructTreeRoot\",\r\n        ParentTree: new PDFNumberTree(),\r\n        ParentTreeNextKey: 0\r\n      });\r\n    }\r\n    return this._root.data.StructTreeRoot;\r\n  },\r\n\r\n  getStructParentTree() {\r\n    return this.getStructTreeRoot().data.ParentTree;\r\n  },\r\n\r\n  createStructParentTreeNextKey() {\r\n    // initialise the Markings dictionary\r\n    this.getMarkingsDictionary();\r\n\r\n    const structTreeRoot = this.getStructTreeRoot();\r\n    const key = structTreeRoot.data.ParentTreeNextKey++;\r\n    structTreeRoot.data.ParentTree.add(key, []);\r\n    return key;\r\n  },\r\n\r\n  endMarkings() {\r\n    const structTreeRoot = this._root.data.StructTreeRoot;\r\n    if (structTreeRoot) {\r\n      structTreeRoot.end();\r\n      this.structChildren.forEach((structElem) => structElem.end());\r\n    }\r\n    if (this._root.data.Markings) {\r\n      this._root.data.Markings.end();\r\n    }\r\n  }\r\n\r\n};\r\n","const FIELD_FLAGS = {\r\n  readOnly: 1,\r\n  required: 2,\r\n  noExport: 4,\r\n  multiline: 0x1000,\r\n  password: 0x2000,\r\n  toggleToOffButton: 0x4000,\r\n  radioButton: 0x8000,\r\n  pushButton: 0x10000,\r\n  combo: 0x20000,\r\n  edit: 0x40000,\r\n  sort: 0x80000,\r\n  multiSelect: 0x200000,\r\n  noSpell: 0x400000\r\n};\r\nconst FIELD_JUSTIFY = {\r\n  left: 0,\r\n  center: 1,\r\n  right: 2\r\n};\r\nconst VALUE_MAP = { value: 'V', defaultValue: 'DV' };\r\nconst FORMAT_SPECIAL = {\r\n  zip: '0',\r\n  zipPlus4: '1',\r\n  zip4: '1',\r\n  phone: '2',\r\n  ssn: '3'\r\n};\r\nconst FORMAT_DEFAULT = {\r\n  number: {\r\n    nDec: 0,\r\n    sepComma: false,\r\n    negStyle: 'MinusBlack',\r\n    currency: '',\r\n    currencyPrepend: true\r\n  },\r\n  percent: {\r\n    nDec: 0,\r\n    sepComma: false\r\n  }\r\n};\r\n\r\nexport default {\r\n  /**\r\n   * Must call if adding AcroForms to a document. Must also call font() before\r\n   * this method to set the default font.\r\n   */\r\n  initForm() {\r\n    if (!this._font) {\r\n      throw new Error('Must set a font before calling initForm method');\r\n    }\r\n    this._acroform = {\r\n      fonts: {},\r\n      defaultFont: this._font.name\r\n    };\r\n    this._acroform.fonts[this._font.id] = this._font.ref();\r\n\r\n    let data = {\r\n      Fields: [],\r\n      NeedAppearances: true,\r\n      DA: new String(`/${this._font.id} 0 Tf 0 g`),\r\n      DR: {\r\n        Font: {}\r\n      }\r\n    };\r\n    data.DR.Font[this._font.id] = this._font.ref();\r\n    const AcroForm = this.ref(data);\r\n    this._root.data.AcroForm = AcroForm;\r\n    return this;\r\n  },\r\n\r\n  /**\r\n   * Called automatically by document.js\r\n   */\r\n  endAcroForm() {\r\n    if (this._root.data.AcroForm) {\r\n      if (\r\n        !Object.keys(this._acroform.fonts).length &&\r\n        !this._acroform.defaultFont\r\n      ) {\r\n        throw new Error('No fonts specified for PDF form');\r\n      }\r\n      let fontDict = this._root.data.AcroForm.data.DR.Font;\r\n      Object.keys(this._acroform.fonts).forEach(name => {\r\n        fontDict[name] = this._acroform.fonts[name];\r\n      });\r\n      this._root.data.AcroForm.data.Fields.forEach(fieldRef => {\r\n        this._endChild(fieldRef);\r\n      });\r\n      this._root.data.AcroForm.end();\r\n    }\r\n    return this;\r\n  },\r\n\r\n  _endChild(ref) {\r\n    if (Array.isArray(ref.data.Kids)) {\r\n      ref.data.Kids.forEach(childRef => {\r\n        this._endChild(childRef);\r\n      });\r\n      ref.end();\r\n    }\r\n    return this;\r\n  },\r\n\r\n  /**\r\n   * Creates and adds a form field to the document. Form fields are intermediate\r\n   * nodes in a PDF form that are used to specify form name heirarchy and form\r\n   * value defaults.\r\n   * @param {string} name - field name (T attribute in field dictionary)\r\n   * @param {object} options  - other attributes to include in field dictionary\r\n   */\r\n  formField(name, options = {}) {\r\n    let fieldDict = this._fieldDict(name, null, options);\r\n    let fieldRef = this.ref(fieldDict);\r\n    this._addToParent(fieldRef);\r\n    return fieldRef;\r\n  },\r\n\r\n  /**\r\n   * Creates and adds a Form Annotation to the document. Form annotations are\r\n   * called Widget annotations internally within a PDF file.\r\n   * @param {string} name - form field name (T attribute of widget annotation\r\n   * dictionary)\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @param {number} w\r\n   * @param {number} h\r\n   * @param {object} options\r\n   */\r\n  formAnnotation(name, type, x, y, w, h, options = {}) {\r\n    let fieldDict = this._fieldDict(name, type, options);\r\n    fieldDict.Subtype = 'Widget';\r\n    if (fieldDict.F === undefined) {\r\n      fieldDict.F = 4; // print the annotation\r\n    }\r\n\r\n    // Add Field annot to page, and get it's ref\r\n    this.annotate(x, y, w, h, fieldDict);\r\n    let annotRef = this.page.annotations[this.page.annotations.length - 1];\r\n\r\n    return this._addToParent(annotRef);\r\n  },\r\n\r\n  formText(name, x, y, w, h, options = {}) {\r\n    return this.formAnnotation(name, 'text', x, y, w, h, options);\r\n  },\r\n\r\n  formPushButton(name, x, y, w, h, options = {}) {\r\n    return this.formAnnotation(name, 'pushButton', x, y, w, h, options);\r\n  },\r\n\r\n  formCombo(name, x, y, w, h, options = {}) {\r\n    return this.formAnnotation(name, 'combo', x, y, w, h, options);\r\n  },\r\n\r\n  formList(name, x, y, w, h, options = {}) {\r\n    return this.formAnnotation(name, 'list', x, y, w, h, options);\r\n  },\r\n\r\n  formRadioButton(name, x, y, w, h, options = {}) {\r\n    return this.formAnnotation(name, 'radioButton', x, y, w, h, options);\r\n  },\r\n\r\n  formCheckbox(name, x, y, w, h, options = {}) {\r\n    return this.formAnnotation(name, 'checkbox', x, y, w, h, options);\r\n  },\r\n\r\n  _addToParent(fieldRef) {\r\n    let parent = fieldRef.data.Parent;\r\n    if (parent) {\r\n      if (!parent.data.Kids) {\r\n        parent.data.Kids = [];\r\n      }\r\n      parent.data.Kids.push(fieldRef);\r\n    } else {\r\n      this._root.data.AcroForm.data.Fields.push(fieldRef);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  _fieldDict(name, type, options = {}) {\r\n    if (!this._acroform) {\r\n      throw new Error(\r\n        'Call document.initForms() method before adding form elements to document'\r\n      );\r\n    }\r\n    let opts = Object.assign({}, options);\r\n    if (type !== null) {\r\n      opts = this._resolveType(type, options);\r\n    }\r\n    opts = this._resolveFlags(opts);\r\n    opts = this._resolveJustify(opts);\r\n    opts = this._resolveFont(opts);\r\n    opts = this._resolveStrings(opts);\r\n    opts = this._resolveColors(opts);\r\n    opts = this._resolveFormat(opts);\r\n    opts.T = new String(name);\r\n    if (opts.parent) {\r\n      opts.Parent = opts.parent;\r\n      delete opts.parent;\r\n    }\r\n    return opts;\r\n  },\r\n\r\n  _resolveType(type, opts) {\r\n    if (type === 'text') {\r\n      opts.FT = 'Tx';\r\n    } else if (type === 'pushButton') {\r\n      opts.FT = 'Btn';\r\n      opts.pushButton = true;\r\n    } else if (type === 'radioButton') {\r\n      opts.FT = 'Btn';\r\n      opts.radioButton = true;\r\n    } else if (type === 'checkbox') {\r\n      opts.FT = 'Btn';\r\n    } else if (type === 'combo') {\r\n      opts.FT = 'Ch';\r\n      opts.combo = true;\r\n    } else if (type === 'list') {\r\n      opts.FT = 'Ch';\r\n    } else {\r\n      throw new Error(`Invalid form annotation type '${type}'`);\r\n    }\r\n    return opts;\r\n  },\r\n\r\n  _resolveFormat(opts) {\r\n    const f = opts.format;\r\n    if (f && f.type) {\r\n      let fnKeystroke;\r\n      let fnFormat;\r\n      let params = '';\r\n      if (FORMAT_SPECIAL[f.type] !== undefined) {\r\n        fnKeystroke = `AFSpecial_Keystroke`;\r\n        fnFormat = `AFSpecial_Format`;\r\n        params = FORMAT_SPECIAL[f.type];\r\n      } else {\r\n        let format = f.type.charAt(0).toUpperCase() + f.type.slice(1);\r\n        fnKeystroke = `AF${format}_Keystroke`;\r\n        fnFormat = `AF${format}_Format`;\r\n\r\n        if (f.type === 'date') {\r\n          fnKeystroke += 'Ex';\r\n          params = String(f.param);\r\n        } else if (f.type === 'time') {\r\n          params = String(f.param);\r\n        } else if (f.type === 'number') {\r\n          let p = Object.assign({}, FORMAT_DEFAULT.number, f);\r\n          params = String(\r\n            [\r\n              String(p.nDec),\r\n              p.sepComma ? '0' : '1',\r\n              '\"' + p.negStyle + '\"',\r\n              'null',\r\n              '\"' + p.currency + '\"',\r\n              String(p.currencyPrepend)\r\n            ].join(',')\r\n          );\r\n        } else if (f.type === 'percent') {\r\n          let p = Object.assign({}, FORMAT_DEFAULT.percent, f);\r\n          params = String([String(p.nDec), p.sepComma ? '0' : '1'].join(','));\r\n        }\r\n      }\r\n      opts.AA = opts.AA ? opts.AA : {};\r\n      opts.AA.K = {\r\n        S: 'JavaScript',\r\n        JS: new String(`${fnKeystroke}(${params});`)\r\n      };\r\n      opts.AA.F = {\r\n        S: 'JavaScript',\r\n        JS: new String(`${fnFormat}(${params});`)\r\n      };\r\n    }\r\n    delete opts.format;\r\n    return opts;\r\n  },\r\n\r\n  _resolveColors(opts) {\r\n    let color = this._normalizeColor(opts.backgroundColor);\r\n    if (color) {\r\n      if (!opts.MK) {\r\n        opts.MK = {};\r\n      }\r\n      opts.MK.BG = color;\r\n    }\r\n    color = this._normalizeColor(opts.borderColor);\r\n    if (color) {\r\n      if (!opts.MK) {\r\n        opts.MK = {};\r\n      }\r\n      opts.MK.BC = color;\r\n    }\r\n    delete opts.backgroundColor;\r\n    delete opts.borderColor;\r\n    return opts;\r\n  },\r\n\r\n  _resolveFlags(options) {\r\n    let result = 0;\r\n    Object.keys(options).forEach(key => {\r\n      if (FIELD_FLAGS[key]) {\r\n        result |= FIELD_FLAGS[key];\r\n        delete options[key];\r\n      }\r\n    });\r\n    if (result !== 0) {\r\n      options.Ff = options.Ff ? options.Ff : 0;\r\n      options.Ff |= result;\r\n    }\r\n    return options;\r\n  },\r\n\r\n  _resolveJustify(options) {\r\n    let result = 0;\r\n    if (options.align !== undefined) {\r\n      if (typeof FIELD_JUSTIFY[options.align] === 'number') {\r\n        result = FIELD_JUSTIFY[options.align];\r\n      }\r\n      delete options.align;\r\n    }\r\n    if (result !== 0) {\r\n      options.Q = result; // default\r\n    }\r\n    return options;\r\n  },\r\n\r\n  _resolveFont(options) {\r\n    // add current font to document-level AcroForm dict if necessary\r\n    if (this._acroform.fonts[this._font.id] === null) {\r\n      this._acroform.fonts[this._font.id] = this._font.ref();\r\n    }\r\n\r\n    // add current font to field's resource dict (RD) if not the default acroform font\r\n    if (this._acroform.defaultFont !== this._font.name) {\r\n      options.DR = { Font: {} };\r\n      options.DR.Font[this._font.id] = this._font.ref();\r\n      options.DA = new String(`/${this._font.id} 0 Tf 0 g`);\r\n    }\r\n    return options;\r\n  },\r\n\r\n  _resolveStrings(options) {\r\n    let select = [];\r\n    function appendChoices(a) {\r\n      if (Array.isArray(a)) {\r\n        for (let idx = 0; idx < a.length; idx++) {\r\n          if (typeof a[idx] === 'string') {\r\n            select.push(new String(a[idx]));\r\n          } else {\r\n            select.push(a[idx]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    appendChoices(options.Opt);\r\n    if (options.select) {\r\n      appendChoices(options.select);\r\n      delete options.select;\r\n    }\r\n    if (select.length) {\r\n      options.Opt = select;\r\n    }\r\n\r\n    Object.keys(VALUE_MAP).forEach(key => {\r\n      if (options[key] !== undefined) {\r\n        options[VALUE_MAP[key]] = options[key];\r\n        delete options[key];\r\n      }\r\n    });\r\n    ['V', 'DV'].forEach(key => {\r\n      if (typeof options[key] === 'string') {\r\n        options[key] = new String(options[key]);\r\n      }\r\n    });\r\n\r\n    if (options.MK && options.MK.CA) {\r\n      options.MK.CA = new String(options.MK.CA);\r\n    }\r\n    if (options.label) {\r\n      options.MK = options.MK ? options.MK : {};\r\n      options.MK.CA = new String(options.label);\r\n      delete options.label;\r\n    }\r\n    return options;\r\n  }\r\n};\r\n","import fs from 'fs';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nexport default {\r\n  /**\r\n   * Embed contents of `src` in PDF\r\n   * @param {Buffer | ArrayBuffer | string} src input Buffer, ArrayBuffer, base64 encoded string or path to file\r\n   * @param {object} options\r\n   *  * options.name: filename to be shown in PDF, will use `src` if none set\r\n   *  * options.type: filetype to be shown in PDF\r\n   *  * options.description: description to be shown in PDF\r\n   *  * options.hidden: if true, do not add attachment to EmbeddedFiles dictionary. Useful for file attachment annotations\r\n   *  * options.creationDate: override creation date\r\n   *  * options.modifiedDate: override modified date\r\n   * @returns filespec reference\r\n   */\r\n  file(src, options = {}) {\r\n    options.name = options.name || src;\r\n\r\n    const refBody = {\r\n      Type: 'EmbeddedFile',\r\n      Params: {}\r\n    };\r\n    let data;\r\n\r\n    if (!src) {\r\n      throw new Error('No src specified');\r\n    }\r\n    if (Buffer.isBuffer(src)) {\r\n      data = src;\r\n    } else if (src instanceof ArrayBuffer) {\r\n      data = Buffer.from(new Uint8Array(src));\r\n    } else {\r\n      let match;\r\n      if ((match = /^data:(.*);base64,(.*)$/.exec(src))) {\r\n        if (match[1]) {\r\n          refBody.Subtype = match[1].replace('/', '#2F');\r\n        }\r\n        data = Buffer.from(match[2], 'base64');\r\n      } else {\r\n        data = fs.readFileSync(src);\r\n        if (!data) {\r\n          throw new Error(`Could not read contents of file at filepath ${src}`);\r\n        }\r\n\r\n        // update CreationDate and ModDate\r\n        const { birthtime, ctime } = fs.statSync(src);\r\n        refBody.Params.CreationDate = birthtime;\r\n        refBody.Params.ModDate = ctime;\r\n      }\r\n    }\r\n\r\n    // override creation date and modified date\r\n    if (options.creationDate instanceof Date) {\r\n      refBody.Params.CreationDate = options.creationDate;\r\n    }\r\n    if (options.modifiedDate instanceof Date) {\r\n      refBody.Params.ModDate = options.modifiedDate;\r\n    }\r\n    // add optional subtype\r\n    if (options.type) {\r\n      refBody.Subtype = options.type.replace('/', '#2F');\r\n    }\r\n\r\n    // add checksum and size information\r\n    const checksum = CryptoJS.MD5(\r\n      CryptoJS.lib.WordArray.create(new Uint8Array(data))\r\n    );\r\n    refBody.Params.CheckSum = new String(checksum);\r\n    refBody.Params.Size = data.byteLength;\r\n\r\n    // save some space when embedding the same file again\r\n    // if a file with the same name and metadata exists, reuse its reference\r\n    let ref;\r\n    if (!this._fileRegistry) this._fileRegistry = {};\r\n    let file = this._fileRegistry[options.name];\r\n    if (file && isEqual(refBody, file)) {\r\n      ref = file.ref;\r\n    } else {\r\n      ref = this.ref(refBody);\r\n      ref.end(data);\r\n\r\n      this._fileRegistry[options.name] = { ...refBody, ref };\r\n    }\r\n    // add filespec for embedded file\r\n    const fileSpecBody = {\r\n      Type: 'Filespec',\r\n      F: new String(options.name),\r\n      EF: { F: ref },\r\n      UF: new String(options.name)\r\n    };\r\n    if (options.description) {\r\n      fileSpecBody.Desc = new String(options.description);\r\n    }\r\n    const filespec = this.ref(fileSpecBody);\r\n    filespec.end();\r\n\r\n    if (!options.hidden) {\r\n      this.addNamedEmbeddedFile(options.name, filespec);\r\n    }\r\n\r\n    return filespec;\r\n  }\r\n};\r\n\r\n/** check two embedded file metadata objects for equality */\r\nfunction isEqual(a, b) {\r\n  if (\r\n    a.Subtype !== b.Subtype ||\r\n    a.Params.CheckSum.toString() !== b.Params.CheckSum.toString() ||\r\n    a.Params.Size !== b.Params.Size ||\r\n    a.Params.CreationDate !== b.Params.CreationDate ||\r\n    a.Params.ModDate !== b.Params.ModDate\r\n  ) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n","/*\r\nPDFDocument - represents an entire PDF document\r\nBy Devon Govett\r\n*/\r\n\r\nimport stream from 'stream';\r\nimport fs from 'fs';\r\nimport PDFObject from './object';\r\nimport PDFReference from './reference';\r\nimport PDFPage from './page';\r\nimport PDFNameTree from './name_tree';\r\nimport PDFSecurity from './security';\r\nimport ColorMixin from './mixins/color';\r\nimport VectorMixin from './mixins/vector';\r\nimport FontsMixin from './mixins/fonts';\r\nimport TextMixin from './mixins/text';\r\nimport ImagesMixin from './mixins/images';\r\nimport AnnotationsMixin from './mixins/annotations';\r\nimport OutlineMixin from './mixins/outline';\r\nimport MarkingsMixin from './mixins/markings';\r\nimport AcroFormMixin from './mixins/acroform';\r\nimport AttachmentsMixin from './mixins/attachments';\r\nimport LineWrapper from './line_wrapper';\r\n\r\nclass PDFDocument extends stream.Readable {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    this.options = options;\r\n\r\n    // PDF version\r\n    switch (options.pdfVersion) {\r\n      case '1.4':\r\n        this.version = 1.4;\r\n        break;\r\n      case '1.5':\r\n        this.version = 1.5;\r\n        break;\r\n      case '1.6':\r\n        this.version = 1.6;\r\n        break;\r\n      case '1.7':\r\n      case '1.7ext3':\r\n        this.version = 1.7;\r\n        break;\r\n      default:\r\n        this.version = 1.3;\r\n        break;\r\n    }\r\n\r\n    // Whether streams should be compressed\r\n    this.compress =\r\n      this.options.compress != null ? this.options.compress : true;\r\n\r\n    this._pageBuffer = [];\r\n    this._pageBufferStart = 0;\r\n\r\n    // The PDF object store\r\n    this._offsets = [];\r\n    this._waiting = 0;\r\n    this._ended = false;\r\n    this._offset = 0;\r\n    const Pages = this.ref({\r\n      Type: 'Pages',\r\n      Count: 0,\r\n      Kids: []\r\n    });\r\n\r\n    const Names = this.ref({\r\n      Dests: new PDFNameTree()\r\n    });\r\n\r\n    this._root = this.ref({\r\n      Type: 'Catalog',\r\n      Pages,\r\n      Names\r\n    });\r\n\r\n    if (this.options.lang) {\r\n      this._root.data.Lang = new String(this.options.lang);\r\n    }\r\n\r\n    // The current page\r\n    this.page = null;\r\n\r\n    // Initialize mixins\r\n    this.initColor();\r\n    this.initVector();\r\n    this.initFonts(options.font);\r\n    this.initText();\r\n    this.initImages();\r\n    this.initOutline();\r\n    this.initMarkings(options);\r\n\r\n    // Initialize the metadata\r\n    this.info = {\r\n      Producer: 'PDFKit',\r\n      Creator: 'PDFKit',\r\n      CreationDate: new Date()\r\n    };\r\n\r\n    if (this.options.info) {\r\n      for (let key in this.options.info) {\r\n        const val = this.options.info[key];\r\n        this.info[key] = val;\r\n      }\r\n    }\r\n\r\n    if (this.options.displayTitle) {\r\n      this._root.data.ViewerPreferences = this.ref({\r\n        DisplayDocTitle: true\r\n      });\r\n    }\r\n\r\n    // Generate file ID\r\n    this._id = PDFSecurity.generateFileID(this.info);\r\n\r\n    // Initialize security settings\r\n    this._security = PDFSecurity.create(this, options);\r\n\r\n    // Write the header\r\n    // PDF version\r\n    this._write(`%PDF-${this.version}`);\r\n\r\n    // 4 binary chars, as recommended by the spec\r\n    this._write('%\\xFF\\xFF\\xFF\\xFF');\r\n\r\n    // Add the first page\r\n    if (this.options.autoFirstPage !== false) {\r\n      this.addPage();\r\n    }\r\n  }\r\n\r\n  addPage(options) {\r\n    if (options == null) {\r\n      ({ options } = this);\r\n    }\r\n\r\n    // end the current page if needed\r\n    if (!this.options.bufferPages) {\r\n      this.flushPages();\r\n    }\r\n\r\n    // create a page object\r\n    this.page = new PDFPage(this, options);\r\n    this._pageBuffer.push(this.page);\r\n\r\n    // add the page to the object store\r\n    const pages = this._root.data.Pages.data;\r\n    pages.Kids.push(this.page.dictionary);\r\n    pages.Count++;\r\n\r\n    // reset x and y coordinates\r\n    this.x = this.page.margins.left;\r\n    this.y = this.page.margins.top;\r\n\r\n    // flip PDF coordinate system so that the origin is in\r\n    // the top left rather than the bottom left\r\n    this._ctm = [1, 0, 0, 1, 0, 0];\r\n    this.transform(1, 0, 0, -1, 0, this.page.height);\r\n\r\n    this.emit('pageAdded');\r\n\r\n    return this;\r\n  }\r\n\r\n  continueOnNewPage(options) {\r\n    const pageMarkings = this.endPageMarkings(this.page);\r\n\r\n    this.addPage(options);\r\n\r\n    this.initPageMarkings(pageMarkings);\r\n\r\n    return this;\r\n  }\r\n\r\n  bufferedPageRange() {\r\n    return { start: this._pageBufferStart, count: this._pageBuffer.length };\r\n  }\r\n\r\n  switchToPage(n) {\r\n    let page;\r\n    if (!(page = this._pageBuffer[n - this._pageBufferStart])) {\r\n      throw new Error(\r\n        `switchToPage(${n}) out of bounds, current buffer covers pages ${\r\n          this._pageBufferStart\r\n        } to ${this._pageBufferStart + this._pageBuffer.length - 1}`\r\n      );\r\n    }\r\n\r\n    return (this.page = page);\r\n  }\r\n\r\n  flushPages() {\r\n    // this local variable exists so we're future-proof against\r\n    // reentrant calls to flushPages.\r\n    const pages = this._pageBuffer;\r\n    this._pageBuffer = [];\r\n    this._pageBufferStart += pages.length;\r\n    for (let page of pages) {\r\n      this.endPageMarkings(page);\r\n      page.end();\r\n    }\r\n  }\r\n\r\n  addNamedDestination(name, ...args) {\r\n    if (args.length === 0) {\r\n      args = ['XYZ', null, null, null];\r\n    }\r\n    if (args[0] === 'XYZ' && args[2] !== null) {\r\n      args[2] = this.page.height - args[2];\r\n    }\r\n    args.unshift(this.page.dictionary);\r\n    this._root.data.Names.data.Dests.add(name, args);\r\n  }\r\n\r\n  addNamedEmbeddedFile(name, ref) {\r\n    if (!this._root.data.Names.data.EmbeddedFiles) {\r\n      // disabling /Limits for this tree fixes attachments not showing in Adobe Reader\r\n      this._root.data.Names.data.EmbeddedFiles = new PDFNameTree({ limits: false });\r\n    }\r\n\r\n    // add filespec to EmbeddedFiles\r\n    this._root.data.Names.data.EmbeddedFiles.add(name, ref);\r\n  }\r\n\r\n  addNamedJavaScript(name, js) {\r\n    if (!this._root.data.Names.data.JavaScript) {\r\n      this._root.data.Names.data.JavaScript = new PDFNameTree();\r\n    }\r\n    let data = {\r\n      JS: new String(js),\r\n      S: 'JavaScript'\r\n    };\r\n    this._root.data.Names.data.JavaScript.add(name, data);\r\n  }\r\n\r\n  ref(data) {\r\n    const ref = new PDFReference(this, this._offsets.length + 1, data);\r\n    this._offsets.push(null); // placeholder for this object's offset once it is finalized\r\n    this._waiting++;\r\n    return ref;\r\n  }\r\n\r\n  _read() {}\r\n  // do nothing, but this method is required by node\r\n\r\n  _write(data) {\r\n    if (!Buffer.isBuffer(data)) {\r\n      data = Buffer.from(data + '\\n', 'binary');\r\n    }\r\n\r\n    this.push(data);\r\n    return (this._offset += data.length);\r\n  }\r\n\r\n  addContent(data) {\r\n    this.page.write(data);\r\n    return this;\r\n  }\r\n\r\n  _refEnd(ref) {\r\n    this._offsets[ref.id - 1] = ref.offset;\r\n    if (--this._waiting === 0 && this._ended) {\r\n      this._finalize();\r\n      return (this._ended = false);\r\n    }\r\n  }\r\n\r\n  write(filename, fn) {\r\n    // print a deprecation warning with a stacktrace\r\n    const err = new Error(`\\\r\nPDFDocument#write is deprecated, and will be removed in a future version of PDFKit. \\\r\nPlease pipe the document into a Node stream.\\\r\n`);\r\n\r\n    console.warn(err.stack);\r\n\r\n    this.pipe(fs.createWriteStream(filename));\r\n    this.end();\r\n    return this.once('end', fn);\r\n  }\r\n\r\n  end() {\r\n    this.flushPages();\r\n    this._info = this.ref();\r\n    for (let key in this.info) {\r\n      let val = this.info[key];\r\n      if (typeof val === 'string') {\r\n        val = new String(val);\r\n      }\r\n\r\n      let entry = this.ref(val);\r\n      entry.end();\r\n\r\n      this._info.data[key] = entry;\r\n    }\r\n\r\n    this._info.end();\r\n\r\n    for (let name in this._fontFamilies) {\r\n      const font = this._fontFamilies[name];\r\n      font.finalize();\r\n    }\r\n\r\n    this.endOutline();\r\n    this.endMarkings();\r\n\r\n    this._root.end();\r\n    this._root.data.Pages.end();\r\n    this._root.data.Names.end();\r\n    this.endAcroForm();\r\n\r\n    if (this._root.data.ViewerPreferences) {\r\n      this._root.data.ViewerPreferences.end();\r\n    }\r\n\r\n    if (this._security) {\r\n      this._security.end();\r\n    }\r\n\r\n    if (this._waiting === 0) {\r\n      return this._finalize();\r\n    } else {\r\n      return (this._ended = true);\r\n    }\r\n  }\r\n\r\n  _finalize() {\r\n    // generate xref\r\n    const xRefOffset = this._offset;\r\n    this._write('xref');\r\n    this._write(`0 ${this._offsets.length + 1}`);\r\n    this._write('0000000000 65535 f ');\r\n\r\n    for (let offset of this._offsets) {\r\n      offset = `0000000000${offset}`.slice(-10);\r\n      this._write(offset + ' 00000 n ');\r\n    }\r\n\r\n    // trailer\r\n    const trailer = {\r\n      Size: this._offsets.length + 1,\r\n      Root: this._root,\r\n      Info: this._info,\r\n      ID: [this._id, this._id]\r\n    };\r\n    if (this._security) {\r\n      trailer.Encrypt = this._security.dictionary;\r\n    }\r\n\r\n    this._write('trailer');\r\n    this._write(PDFObject.convert(trailer));\r\n\r\n    this._write('startxref');\r\n    this._write(`${xRefOffset}`);\r\n    this._write('%%EOF');\r\n\r\n    // end the stream\r\n    return this.push(null);\r\n  }\r\n\r\n  toString() {\r\n    return '[object PDFDocument]';\r\n  }\r\n}\r\n\r\nconst mixin = methods => {\r\n  Object.assign(PDFDocument.prototype, methods);\r\n};\r\n\r\nmixin(ColorMixin);\r\nmixin(VectorMixin);\r\nmixin(FontsMixin);\r\nmixin(TextMixin);\r\nmixin(ImagesMixin);\r\nmixin(AnnotationsMixin);\r\nmixin(OutlineMixin);\r\nmixin(MarkingsMixin);\r\nmixin(AcroFormMixin);\r\nmixin(AttachmentsMixin);\r\n\r\nPDFDocument.LineWrapper = LineWrapper;\r\n\r\nexport default PDFDocument;\r\n"]},"metadata":{},"sourceType":"module"}